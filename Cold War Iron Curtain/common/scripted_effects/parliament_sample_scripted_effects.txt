
sort_supreme_soviet_coalition_1 = {
	# Creation of temp arrays.
	# The arrays are "copied" from Soviet_Faction_ID_Sorted_1 and Soviet_Faction_ID_Sorted_TOTAL_1 for sorting
	resize_temp_array = {
		array = Soviet_Faction_ID_Sorted_TOTAL_1_temp
		size = Soviet_Faction_ID_Sorted_TOTAL_1^num
	}
	resize_temp_array = {
		array = Soviet_Faction_ID_Sorted_1_temp
		size = Soviet_Faction_ID_Sorted_TOTAL_1^num
	}
	# Sort the values by largest influencer
	for_loop_effect = {
		end = Soviet_Faction_ID_Sorted_TOTAL_1^num
		value = v
		find_highest_in_array = {
			array = Soviet_Faction_ID_Sorted_TOTAL_1
			value = max
			index = max_index
		}
		set_temp_variable = { Soviet_Faction_ID_Sorted_TOTAL_1_temp^v = max } #sets biggest at the earliest available position
		set_temp_variable = { Soviet_Faction_ID_Sorted_1_temp^v = Soviet_Faction_ID_Sorted_1^max_index } #sets biggest TAG at the earliest available position
		set_variable = { Soviet_Faction_ID_Sorted_TOTAL_1^max_index = -1 } #removes it from selection
	}

	# Clears the Values
	clear_array = Soviet_Faction_ID_Sorted_TOTAL_1
	clear_array = Soviet_Faction_ID_Sorted_1

	set_temp_variable = { influence_total = 0 }
	# Restores destroyed arrays in the above process - i.e. if they were deleted due to being less then 1%
	for_each_loop = {
		array = Soviet_Faction_ID_Sorted_TOTAL_1_temp
		add_to_array = { Soviet_Faction_ID_Sorted_TOTAL_1 = v }
		add_to_temp_variable = { influence_total = v }
	}
	add_to_temp_variable = { influence_total = domestic_influence_amount }
	for_each_loop = {
		array = Soviet_Faction_ID_Sorted_1_temp
		add_to_array = { Soviet_Faction_ID_Sorted_1 = v }
	}
	clear_temp_array = Soviet_Faction_ID_Sorted_TOTAL_1_temp
	clear_temp_array = Soviet_Faction_ID_Sorted_1_temp
}
sort_supreme_soviet_coalition_2 = {
	# Creation of temp arrays.
	resize_temp_array = {
		array = Soviet_Faction_ID_Sorted_TOTAL_2_temp
		size = Soviet_Faction_ID_Sorted_TOTAL_2^num
	}
	resize_temp_array = {
		array = Soviet_Faction_ID_Sorted_2_temp
		size = Soviet_Faction_ID_Sorted_TOTAL_2^num
	}
	# Sort the values by largest party
	for_loop_effect = {
		end = Soviet_Faction_ID_Sorted_TOTAL_2^num
		value = v
		find_highest_in_array = {
			array = Soviet_Faction_ID_Sorted_TOTAL_2
			value = max
			index = max_index
		}
		set_temp_variable = { Soviet_Faction_ID_Sorted_TOTAL_2_temp^v = max } #sets biggest at the earliest available position
		set_temp_variable = { Soviet_Faction_ID_Sorted_2_temp^v = Soviet_Faction_ID_Sorted_2^max_index } #sets biggest TAG at the earliest available position
		set_variable = { Soviet_Faction_ID_Sorted_TOTAL_2^max_index = -1 } #removes it from selection
	}

	# Clears the Values
	clear_array = Soviet_Faction_ID_Sorted_TOTAL_2
	clear_array = Soviet_Faction_ID_Sorted_2

	set_temp_variable = { influence_total = 0 }
	# Restores destroyed arrays in the above process - i.e. if they were deleted due to being less then 1%
	for_each_loop = {
		array = Soviet_Faction_ID_Sorted_TOTAL_2_temp
		add_to_array = { Soviet_Faction_ID_Sorted_TOTAL_2 = v }
	}
	for_each_loop = {
		array = Soviet_Faction_ID_Sorted_2_temp
		add_to_array = { Soviet_Faction_ID_Sorted_2 = v }
	}
	clear_temp_array = Soviet_Faction_ID_Sorted_TOTAL_2_temp
	clear_temp_array = Soviet_Faction_ID_Sorted_2_temp
}
sort_supreme_soviet_coalition_3 = {
	# Creation of temp arrays.
	# The arrays are "copied" from Soviet_Faction_ID_Sorted_3 and Soviet_Faction_ID_Sorted_TOTAL_3 for sorting
	resize_temp_array = {
		array = Soviet_Faction_ID_Sorted_TOTAL_3_temp
		size = Soviet_Faction_ID_Sorted_TOTAL_3^num
	}
	resize_temp_array = {
		array = Soviet_Faction_ID_Sorted_3_temp
		size = Soviet_Faction_ID_Sorted_TOTAL_3^num
	}
	# Sort the values by largest influencer
	for_loop_effect = {
		end = Soviet_Faction_ID_Sorted_TOTAL_3^num
		value = v
		find_highest_in_array = {
			array = Soviet_Faction_ID_Sorted_TOTAL_3
			value = max
			index = max_index
		}
		set_temp_variable = { Soviet_Faction_ID_Sorted_TOTAL_3_temp^v = max } #sets biggest at the earliest available position
		set_temp_variable = { Soviet_Faction_ID_Sorted_3_temp^v = Soviet_Faction_ID_Sorted_3^max_index } #sets biggest TAG at the earliest available position
		set_variable = { Soviet_Faction_ID_Sorted_TOTAL_3^max_index = -1 } #removes it from selection
	}

	# Clears the Values
	clear_array = Soviet_Faction_ID_Sorted_TOTAL_3
	clear_array = Soviet_Faction_ID_Sorted_3

	set_temp_variable = { influence_total = 0 }
	# Restores destroyed arrays in the above process - i.e. if they were deleted due to being less then 1%
	for_each_loop = {
		array = Soviet_Faction_ID_Sorted_TOTAL_3_temp
		add_to_array = { Soviet_Faction_ID_Sorted_TOTAL_3 = v }
		add_to_temp_variable = { influence_total = v }
	}
	add_to_temp_variable = { influence_total = domestic_influence_amount }
	for_each_loop = {
		array = Soviet_Faction_ID_Sorted_3_temp
		add_to_array = { Soviet_Faction_ID_Sorted_3 = v }
	}
	clear_temp_array = Soviet_Faction_ID_Sorted_TOTAL_3_temp
	clear_temp_array = Soviet_Faction_ID_Sorted_3_temp
}
sort_supreme_soviet_coalition_4 = {
	# Creation of temp arrays.
	# The arrays are "copied" from Soviet_Faction_ID_Sorted_4 and Soviet_Faction_ID_Sorted_TOTAL_4 for sorting
	resize_temp_array = {
		array = Soviet_Faction_ID_Sorted_TOTAL_4_temp
		size = Soviet_Faction_ID_Sorted_TOTAL_4^num
	}
	resize_temp_array = {
		array = Soviet_Faction_ID_Sorted_4_temp
		size = Soviet_Faction_ID_Sorted_TOTAL_4^num
	}
	# Sort the values by largest influencer
	for_loop_effect = {
		end = Soviet_Faction_ID_Sorted_TOTAL_4^num
		value = v
		find_highest_in_array = {
			array = Soviet_Faction_ID_Sorted_TOTAL_4
			value = max
			index = max_index
		}
		set_temp_variable = { Soviet_Faction_ID_Sorted_TOTAL_4_temp^v = max } #sets biggest at the earliest available position
		set_temp_variable = { Soviet_Faction_ID_Sorted_4_temp^v = Soviet_Faction_ID_Sorted_4^max_index } #sets biggest TAG at the earliest available position
		set_variable = { Soviet_Faction_ID_Sorted_TOTAL_4^max_index = -1 } #removes it from selection
	}

	# Clears the Values
	clear_array = Soviet_Faction_ID_Sorted_TOTAL_4
	clear_array = Soviet_Faction_ID_Sorted_4

	set_temp_variable = { influence_total = 0 }
	# Restores destroyed arrays in the above process - i.e. if they were deleted due to being less then 1%
	for_each_loop = {
		array = Soviet_Faction_ID_Sorted_TOTAL_4_temp
		add_to_array = { Soviet_Faction_ID_Sorted_TOTAL_4 = v }
		add_to_temp_variable = { influence_total = v }
	}
	add_to_temp_variable = { influence_total = domestic_influence_amount }
	for_each_loop = {
		array = Soviet_Faction_ID_Sorted_4_temp
		add_to_array = { Soviet_Faction_ID_Sorted_4 = v }
	}
	clear_temp_array = Soviet_Faction_ID_Sorted_TOTAL_4_temp
	clear_temp_array = Soviet_Faction_ID_Sorted_4_temp
}
sort_supreme_soviet_coalition_5 = {
	# Creation of temp arrays.
	# The arrays are "copied" from Soviet_Faction_ID_Sorted_5 and Soviet_Faction_ID_Sorted_TOTAL_5 for sorting
	resize_temp_array = {
		array = Soviet_Faction_ID_Sorted_TOTAL_5_temp
		size = Soviet_Faction_ID_Sorted_TOTAL_5^num
	}
	resize_temp_array = {
		array = Soviet_Faction_ID_Sorted_5_temp
		size = Soviet_Faction_ID_Sorted_TOTAL_5^num
	}
	# Sort the values by largest influencer
	for_loop_effect = {
		end = Soviet_Faction_ID_Sorted_TOTAL_5^num
		value = v
		find_highest_in_array = {
			array = Soviet_Faction_ID_Sorted_TOTAL_5
			value = max
			index = max_index
		}
		set_temp_variable = { Soviet_Faction_ID_Sorted_TOTAL_5_temp^v = max } #sets biggest at the earliest available position
		set_temp_variable = { Soviet_Faction_ID_Sorted_5_temp^v = Soviet_Faction_ID_Sorted_5^max_index } #sets biggest TAG at the earliest available position
		set_variable = { Soviet_Faction_ID_Sorted_TOTAL_5^max_index = -1 } #removes it from selection
	}

	# Clears the Values
	clear_array = Soviet_Faction_ID_Sorted_TOTAL_5
	clear_array = Soviet_Faction_ID_Sorted_5

	set_temp_variable = { influence_total = 0 }
	# Restores destroyed arrays in the above process - i.e. if they were deleted due to being less then 1%
	for_each_loop = {
		array = Soviet_Faction_ID_Sorted_TOTAL_5_temp
		add_to_array = { Soviet_Faction_ID_Sorted_TOTAL_5 = v }
		add_to_temp_variable = { influence_total = v }
	}
	add_to_temp_variable = { influence_total = domestic_influence_amount }
	for_each_loop = {
		array = Soviet_Faction_ID_Sorted_5_temp
		add_to_array = { Soviet_Faction_ID_Sorted_5 = v }
	}
	clear_temp_array = Soviet_Faction_ID_Sorted_TOTAL_5_temp
	clear_temp_array = Soviet_Faction_ID_Sorted_5_temp
}
sort_supreme_soviet_coalition_6 = {
	# Creation of temp arrays.
	# The arrays are "copied" from Soviet_Faction_ID_Sorted_6 and Soviet_Faction_ID_Sorted_TOTAL_6 for sorting
	resize_temp_array = {
		array = Soviet_Faction_ID_Sorted_TOTAL_6_temp
		size = Soviet_Faction_ID_Sorted_TOTAL_6^num
	}
	resize_temp_array = {
		array = Soviet_Faction_ID_Sorted_6_temp
		size = Soviet_Faction_ID_Sorted_TOTAL_6^num
	}
	# Sort the values by largest influencer
	for_loop_effect = {
		end = Soviet_Faction_ID_Sorted_TOTAL_6^num
		value = v
		find_highest_in_array = {
			array = Soviet_Faction_ID_Sorted_TOTAL_6
			value = max
			index = max_index
		}
		set_temp_variable = { Soviet_Faction_ID_Sorted_TOTAL_6_temp^v = max } #sets biggest at the earliest available position
		set_temp_variable = { Soviet_Faction_ID_Sorted_6_temp^v = Soviet_Faction_ID_Sorted_6^max_index } #sets biggest TAG at the earliest available position
		set_variable = { Soviet_Faction_ID_Sorted_TOTAL_6^max_index = -1 } #removes it from selection
	}

	# Clears the Values
	clear_array = Soviet_Faction_ID_Sorted_TOTAL_6
	clear_array = Soviet_Faction_ID_Sorted_6

	set_temp_variable = { influence_total = 0 }
	# Restores destroyed arrays in the above process - i.e. if they were deleted due to being less then 1%
	for_each_loop = {
		array = Soviet_Faction_ID_Sorted_TOTAL_6_temp
		add_to_array = { Soviet_Faction_ID_Sorted_TOTAL_6 = v }
		add_to_temp_variable = { influence_total = v }
	}
	add_to_temp_variable = { influence_total = domestic_influence_amount }
	for_each_loop = {
		array = Soviet_Faction_ID_Sorted_6_temp
		add_to_array = { Soviet_Faction_ID_Sorted_6 = v }
	}
	clear_temp_array = Soviet_Faction_ID_Sorted_TOTAL_6_temp
	clear_temp_array = Soviet_Faction_ID_Sorted_6_temp
}

sort_supreme_soviet_coalition_7 = {
	# Creation of temp arrays.
	# The arrays are "copied" from Soviet_Faction_ID_Sorted_7 and Soviet_Faction_ID_Sorted_TOTAL_7 for sorting
	resize_temp_array = {
		array = Soviet_Faction_ID_Sorted_TOTAL_7_temp
		size = Soviet_Faction_ID_Sorted_TOTAL_7^num
	}
	resize_temp_array = {
		array = Soviet_Faction_ID_Sorted_7_temp
		size = Soviet_Faction_ID_Sorted_TOTAL_7^num
	}
	# Sort the values by largest influencer
	for_loop_effect = {
		end = Soviet_Faction_ID_Sorted_TOTAL_7^num
		value = v
		find_highest_in_array = {
			array = Soviet_Faction_ID_Sorted_TOTAL_7
			value = max
			index = max_index
		}
		set_temp_variable = { Soviet_Faction_ID_Sorted_TOTAL_7_temp^v = max } #sets biggest at the earliest available position
		set_temp_variable = { Soviet_Faction_ID_Sorted_7_temp^v = Soviet_Faction_ID_Sorted_7^max_index } #sets biggest TAG at the earliest available position
		set_variable = { Soviet_Faction_ID_Sorted_TOTAL_7^max_index = -1 } #removes it from selection
	}

	# Clears the Values
	clear_array = Soviet_Faction_ID_Sorted_TOTAL_7
	clear_array = Soviet_Faction_ID_Sorted_7

	set_temp_variable = { influence_total = 0 }
	# Restores destroyed arrays in the above process - i.e. if they were deleted due to being less then 1%
	for_each_loop = {
		array = Soviet_Faction_ID_Sorted_TOTAL_7_temp
		add_to_array = { Soviet_Faction_ID_Sorted_TOTAL_7 = v }
		add_to_temp_variable = { influence_total = v }
	}
	add_to_temp_variable = { influence_total = domestic_influence_amount }
	for_each_loop = {
		array = Soviet_Faction_ID_Sorted_7_temp
		add_to_array = { Soviet_Faction_ID_Sorted_7 = v }
	}
	clear_temp_array = Soviet_Faction_ID_Sorted_TOTAL_7_temp
	clear_temp_array = Soviet_Faction_ID_Sorted_7_temp
}

sort_supreme_soviet_coalition_8 = {
	# Creation of temp arrays.
	# The arrays are "copied" from Soviet_Faction_ID_Sorted_8 and Soviet_Faction_ID_Sorted_TOTAL_8 for sorting
	resize_temp_array = {
		array = Soviet_Faction_ID_Sorted_TOTAL_8_temp
		size = Soviet_Faction_ID_Sorted_TOTAL_8^num
	}
	resize_temp_array = {
		array = Soviet_Faction_ID_Sorted_8_temp
		size = Soviet_Faction_ID_Sorted_TOTAL_8^num
	}
	# Sort the values by largest influencer
	for_loop_effect = {
		end = Soviet_Faction_ID_Sorted_TOTAL_8^num
		value = v
		find_highest_in_array = {
			array = Soviet_Faction_ID_Sorted_TOTAL_8
			value = max
			index = max_index
		}
		set_temp_variable = { Soviet_Faction_ID_Sorted_TOTAL_8_temp^v = max } #sets biggest at the earliest available position
		set_temp_variable = { Soviet_Faction_ID_Sorted_8_temp^v = Soviet_Faction_ID_Sorted_8^max_index } #sets biggest TAG at the earliest available position
		set_variable = { Soviet_Faction_ID_Sorted_TOTAL_8^max_index = -1 } #removes it from selection
	}

	# Clears the Values
	clear_array = Soviet_Faction_ID_Sorted_TOTAL_8
	clear_array = Soviet_Faction_ID_Sorted_8

	set_temp_variable = { influence_total = 0 }
	# Restores destroyed arrays in the above process - i.e. if they were deleted due to being less then 1%
	for_each_loop = {
		array = Soviet_Faction_ID_Sorted_TOTAL_8_temp
		add_to_array = { Soviet_Faction_ID_Sorted_TOTAL_8 = v }
		add_to_temp_variable = { influence_total = v }
	}
	add_to_temp_variable = { influence_total = domestic_influence_amount }
	for_each_loop = {
		array = Soviet_Faction_ID_Sorted_8_temp
		add_to_array = { Soviet_Faction_ID_Sorted_8 = v }
	}
	clear_temp_array = Soviet_Faction_ID_Sorted_TOTAL_8_temp
	clear_temp_array = Soviet_Faction_ID_Sorted_8_temp
}

sort_supreme_soviet_coalition_9 = {
	# Creation of temp arrays.
	# The arrays are "copied" from Soviet_Faction_ID_Sorted_9 and Soviet_Faction_ID_Sorted_TOTAL_9 for sorting
	resize_temp_array = {
		array = Soviet_Faction_ID_Sorted_TOTAL_9_temp
		size = Soviet_Faction_ID_Sorted_TOTAL_9^num
	}
	resize_temp_array = {
		array = Soviet_Faction_ID_Sorted_9_temp
		size = Soviet_Faction_ID_Sorted_TOTAL_9^num
	}
	# Sort the values by largest influencer
	for_loop_effect = {
		end = Soviet_Faction_ID_Sorted_TOTAL_9^num
		value = v
		find_highest_in_array = {
			array = Soviet_Faction_ID_Sorted_TOTAL_9
			value = max
			index = max_index
		}
		set_temp_variable = { Soviet_Faction_ID_Sorted_TOTAL_9_temp^v = max } #sets biggest at the earliest available position
		set_temp_variable = { Soviet_Faction_ID_Sorted_9_temp^v = Soviet_Faction_ID_Sorted_9^max_index } #sets biggest TAG at the earliest available position
		set_variable = { Soviet_Faction_ID_Sorted_TOTAL_9^max_index = -1 } #removes it from selection
	}

	# Clears the Values
	clear_array = Soviet_Faction_ID_Sorted_TOTAL_9
	clear_array = Soviet_Faction_ID_Sorted_9

	set_temp_variable = { influence_total = 0 }
	# Restores destroyed arrays in the above process - i.e. if they were deleted due to being less then 1%
	for_each_loop = {
		array = Soviet_Faction_ID_Sorted_TOTAL_9_temp
		add_to_array = { Soviet_Faction_ID_Sorted_TOTAL_9 = v }
		add_to_temp_variable = { influence_total = v }
	}
	add_to_temp_variable = { influence_total = domestic_influence_amount }
	for_each_loop = {
		array = Soviet_Faction_ID_Sorted_9_temp
		add_to_array = { Soviet_Faction_ID_Sorted_9 = v }
	}
	clear_temp_array = Soviet_Faction_ID_Sorted_TOTAL_9_temp
	clear_temp_array = Soviet_Faction_ID_Sorted_9_temp
}

Supreme_Soviet_Pre_Sort = {
    clear_array = Soviet_Faction_TOTAL_COALITION

	clear_array = Soviet_Faction_ID_Sorted_TOTAL_1
	clear_array = Soviet_Faction_ID_Sorted_1

	clear_array = Soviet_Faction_ID_Sorted_TOTAL_2
	clear_array = Soviet_Faction_ID_Sorted_2

	clear_array = Soviet_Faction_ID_Sorted_TOTAL_3
	clear_array = Soviet_Faction_ID_Sorted_3

	clear_array = Soviet_Faction_ID_Sorted_TOTAL_4
	clear_array = Soviet_Faction_ID_Sorted_4

	clear_array = Soviet_Faction_ID_Sorted_TOTAL_5
	clear_array = Soviet_Faction_ID_Sorted_5

	clear_array = Soviet_Faction_ID_Sorted_TOTAL_6
	clear_array = Soviet_Faction_ID_Sorted_6

	clear_array = Soviet_Faction_ID_Sorted_TOTAL_7
	clear_array = Soviet_Faction_ID_Sorted_TOTAL_7

	clear_array = Soviet_Faction_ID_Sorted_TOTAL_8
	clear_array = Soviet_Faction_ID_Sorted_8

	clear_array = Soviet_Faction_ID_Sorted_TOTAL_9
	clear_array = Soviet_Faction_ID_Sorted_9

    set_variable = {
        Soviet_Faction_Coalition_Total_Stored = 0
    }

    for_each_loop = {
		array = Soviet_Faction_ID
        end = Soviet_Faction_ID^num
        value = v
        if = {
            limit = {
				check_variable = {
					Soviet_Faction_ID_COALITION^i = 1
				}
            }
			add_to_array = {
				Soviet_Faction_ID_Sorted_1 = v
			}
			add_to_array = {
				Soviet_Faction_ID_Sorted_TOTAL_1 = Soviet_Faction_TOTAL^i
			}
			add_to_variable = {
				Soviet_Faction_Coalition_Total_Stored = Soviet_Faction_TOTAL^i
			}
        }
    }
    if = {
        limit = {
            check_variable = {
                Soviet_Faction_Coalition_Total_Stored > 0
            }
        }
        add_to_array = {
            Soviet_Faction_TOTAL_COALITION = Soviet_Faction_Coalition_Total_Stored
        }
        add_to_array = {
            Soviet_Faction_TOTAL_COALITION_ID = 1
        }
        set_variable = {
            Soviet_Faction_Coalition_Total_Stored = 0
        }
    }
    for_each_loop = {
		array = Soviet_Faction_ID
        end = Soviet_Faction_ID^num
        value = v
        if = {
            limit = {
				check_variable = {
					Soviet_Faction_ID_COALITION^i = 2
				}
            }
			add_to_array = {
				Soviet_Faction_ID_Sorted_2 = v
			}
			add_to_array = {
				Soviet_Faction_ID_Sorted_TOTAL_2 = Soviet_Faction_TOTAL^i
			}
			add_to_variable = {
				Soviet_Faction_Coalition_Total_Stored = Soviet_Faction_TOTAL^i
			}
        }
    }
    if = {
        limit = {
            check_variable = {
                Soviet_Faction_Coalition_Total_Stored > 0
            }
        }
        add_to_array = {
            Soviet_Faction_TOTAL_COALITION = Soviet_Faction_Coalition_Total_Stored
        }
        add_to_array = {
            Soviet_Faction_TOTAL_COALITION_ID = 2
        }
        set_variable = {
            Soviet_Faction_Coalition_Total_Stored = 0
        }
    }
    for_each_loop = {
		array = Soviet_Faction_ID
        end = Soviet_Faction_ID^num
        value = v
        if = {
            limit = {
				check_variable = {
					Soviet_Faction_ID_COALITION^i = 3
				}
            }
			add_to_array = {
				Soviet_Faction_ID_Sorted_3 = v
			}
			add_to_array = {
				Soviet_Faction_ID_Sorted_TOTAL_3 = Soviet_Faction_TOTAL^i
			}
			add_to_variable = {
				Soviet_Faction_Coalition_Total_Stored = Soviet_Faction_TOTAL^i
			}
        }
    }
    if = {
        limit = {
            check_variable = {
                Soviet_Faction_Coalition_Total_Stored > 0
            }
        }
        add_to_array = {
            Soviet_Faction_TOTAL_COALITION = Soviet_Faction_Coalition_Total_Stored
        }
        add_to_array = {
            Soviet_Faction_TOTAL_COALITION_ID = 3
        }
        set_variable = {
            Soviet_Faction_Coalition_Total_Stored = 0
        }
    }
    for_each_loop = {
		array = Soviet_Faction_ID
        end = Soviet_Faction_ID^num
        value = v
        if = {
            limit = {
				check_variable = {
					Soviet_Faction_ID_COALITION^i = 4
				}
            }
			add_to_array = {
				Soviet_Faction_ID_Sorted_4 = v
			}
			add_to_array = {
				Soviet_Faction_ID_Sorted_TOTAL_4 = Soviet_Faction_TOTAL^i
			}
			add_to_variable = {
				Soviet_Faction_Coalition_Total_Stored = Soviet_Faction_TOTAL^i
			}
        }
    }
    if = {
        limit = {
            check_variable = {
                Soviet_Faction_Coalition_Total_Stored > 0
            }
        }
        add_to_array = {
            Soviet_Faction_TOTAL_COALITION = Soviet_Faction_Coalition_Total_Stored
        }
        add_to_array = {
            Soviet_Faction_TOTAL_COALITION_ID = 4
        }
        set_variable = {
            Soviet_Faction_Coalition_Total_Stored = 0
        }
    }
    for_each_loop = {
		array = Soviet_Faction_ID
        end = Soviet_Faction_ID^num
        value = v
        if = {
            limit = {
				check_variable = {
					Soviet_Faction_ID_COALITION^i = 5
				}
            }
			add_to_array = {
				Soviet_Faction_ID_Sorted_5 = v
			}
			add_to_array = {
				Soviet_Faction_ID_Sorted_TOTAL_5 = Soviet_Faction_TOTAL^i
			}
			add_to_variable = {
				Soviet_Faction_Coalition_Total_Stored = Soviet_Faction_TOTAL^i
			}
        }
    }
    if = {
        limit = {
            check_variable = {
                Soviet_Faction_Coalition_Total_Stored > 0
            }
        }
        add_to_array = {
            Soviet_Faction_TOTAL_COALITION = Soviet_Faction_Coalition_Total_Stored
        }
        add_to_array = {
            Soviet_Faction_TOTAL_COALITION_ID = 5
        }
        set_variable = {
            Soviet_Faction_Coalition_Total_Stored = 0
        }
    }
    for_each_loop = {
		array = Soviet_Faction_ID
        end = Soviet_Faction_ID^num
        value = v
        if = {
            limit = {
				check_variable = {
					Soviet_Faction_ID_COALITION^i = 6
				}
            }
			add_to_array = {
				Soviet_Faction_ID_Sorted_6 = v
			}
			add_to_array = {
				Soviet_Faction_ID_Sorted_TOTAL_6 = Soviet_Faction_TOTAL^i
			}
			add_to_variable = {
				Soviet_Faction_Coalition_Total_Stored = Soviet_Faction_TOTAL^i
			}
        }
    }
    if = {
        limit = {
            check_variable = {
                Soviet_Faction_Coalition_Total_Stored > 0
            }
        }
        add_to_array = {
            Soviet_Faction_TOTAL_COALITION = Soviet_Faction_Coalition_Total_Stored
        }
        add_to_array = {
            Soviet_Faction_TOTAL_COALITION_ID = 6
        }
        set_variable = {
            Soviet_Faction_Coalition_Total_Stored = 0
        }
    }
    for_each_loop = {
		array = Soviet_Faction_ID
        end = Soviet_Faction_ID^num
        value = v
        if = {
            limit = {
				check_variable = {
					Soviet_Faction_ID_COALITION^i = 7
				}
            }
			add_to_array = {
				Soviet_Faction_ID_Sorted_7 = v
			}
			add_to_array = {
				Soviet_Faction_ID_Sorted_TOTAL_7 = Soviet_Faction_TOTAL^i
			}
			add_to_variable = {
				Soviet_Faction_Coalition_Total_Stored = Soviet_Faction_TOTAL^i
			}
        }
    }
    if = {
        limit = {
            check_variable = {
                Soviet_Faction_Coalition_Total_Stored > 0
            }
        }
        add_to_array = {
            Soviet_Faction_TOTAL_COALITION = Soviet_Faction_Coalition_Total_Stored
        }
        add_to_array = {
            Soviet_Faction_TOTAL_COALITION_ID = 7
        }
        set_variable = {
            Soviet_Faction_Coalition_Total_Stored = 0
        }
    }
    for_each_loop = {
		array = Soviet_Faction_ID
        end = Soviet_Faction_ID^num
        value = v
        if = {
            limit = {
				check_variable = {
					Soviet_Faction_ID_COALITION^i = 8
				}
            }
			add_to_array = {
				Soviet_Faction_ID_Sorted_8 = v
			}
			add_to_array = {
				Soviet_Faction_ID_Sorted_TOTAL_8 = Soviet_Faction_TOTAL^i
			}
			add_to_variable = {
				Soviet_Faction_Coalition_Total_Stored = Soviet_Faction_TOTAL^i
			}
        }
    }
    if = {
        limit = {
            check_variable = {
                Soviet_Faction_Coalition_Total_Stored > 0
            }
        }
        add_to_array = {
            Soviet_Faction_TOTAL_COALITION = Soviet_Faction_Coalition_Total_Stored
        }
        add_to_array = {
            Soviet_Faction_TOTAL_COALITION_ID = 8
        }
        set_variable = {
            Soviet_Faction_Coalition_Total_Stored = 0
        }
    }
    for_each_loop = {
		array = Soviet_Faction_ID
        end = Soviet_Faction_ID^num
        value = v
        if = {
            limit = {
				check_variable = {
					Soviet_Faction_ID_COALITION^i = 9
				}
            }
			add_to_array = {
				Soviet_Faction_ID_Sorted_9 = v
			}
			add_to_array = {
				Soviet_Faction_ID_Sorted_TOTAL_9 = Soviet_Faction_TOTAL^i
			}
			add_to_variable = {
				Soviet_Faction_Coalition_Total_Stored = Soviet_Faction_TOTAL^i
			}
        }
    }
    if = {
        limit = {
            check_variable = {
                Soviet_Faction_Coalition_Total_Stored > 0
            }
        }
        add_to_array = {
            Soviet_Faction_TOTAL_COALITION = Soviet_Faction_Coalition_Total_Stored
        }
        add_to_array = {
            Soviet_Faction_TOTAL_COALITION_ID = 9
        }
        set_variable = {
            Soviet_Faction_Coalition_Total_Stored = 0
        }
    }
}

# Allocate a random number of seats to Parties 1, 2, 3 and 4
SAMPLE_generate_random_party_seats = {
	set_variable = { SAMPLE_party1_seats = random }
	set_variable = { SAMPLE_party2_seats = random }
	set_variable = { SAMPLE_party3_seats = random }
	set_variable = { SAMPLE_party4_seats = random }

	set_temp_variable = { total = SAMPLE_party1_seats }
	add_to_temp_variable = { total = SAMPLE_party2_seats }
	add_to_temp_variable = { total = SAMPLE_party3_seats }
	add_to_temp_variable = { total = SAMPLE_party4_seats }
	divide_variable = { SAMPLE_party1_seats = total }
	divide_variable = { SAMPLE_party2_seats = total }
	divide_variable = { SAMPLE_party3_seats = total }

	multiply_variable = { SAMPLE_party1_seats = 300 }
	multiply_variable = { SAMPLE_party2_seats = 300 }
	multiply_variable = { SAMPLE_party3_seats = 300 }
	round_variable = SAMPLE_party1_seats
	round_variable = SAMPLE_party2_seats
	round_variable = SAMPLE_party3_seats

	set_variable = { SAMPLE_party4_seats = 300 }
	subtract_from_variable = { SAMPLE_party4_seats = SAMPLE_party1_seats }
	subtract_from_variable = { SAMPLE_party4_seats = SAMPLE_party2_seats }
	subtract_from_variable = { SAMPLE_party4_seats = SAMPLE_party3_seats }
}

SAMPLE_init_parliament = {
	SAMPLE_generate_random_party_seats = yes
	
	# Generate partial sums t1 = (P1), t2 = (P1 + P2), t3 = (P1 + P2 + P3)
	# so that we can use resize_array to fill our array with the right number of seats for each party
	set_temp_variable = { t1 = SAMPLE_party1_seats }
	set_temp_variable = { t2 = SAMPLE_party1_seats }
	set_temp_variable = { t3 = SAMPLE_party3_seats }
	set_temp_variable = { t4 = 300 }

	add_to_temp_variable = { t2 = t1 }
	add_to_temp_variable = { t3 = t2 }


	clear_array = SAMPLE_seat_frame

	# Resize array to t1 seats, setting P1 frame numbers to 1 (Party 1 color)
	resize_array = {
		array = SAMPLE_seat_frame
		value = 1
		size = t1
	}
	# Resize array to t2 seats, setting P2 frame numbers to 2 (Party 2 color)
	resize_array = {
		array = SAMPLE_seat_frame
		value = 2
		size = t2
	}
	# Resize array to t3 seats, setting P3 frame numbers to 3 (Party 3 color)
	resize_array = {
		array = SAMPLE_seat_frame
		value = 3
		size = t3
	}
	# Resize array to all 300 seats, setting remaining frame numbers to 4 (Party 4 color)
	resize_array = {
		array = SAMPLE_seat_frame
		value = 4
		size = t4
	}

}
starting_1991_soviet_congress = {
	set_variable = {
		russia_duma_view = 1
	}
	add_to_array = { russia_duma_deicisions_list = 100 }
	add_to_array = { russia_duma_deicisions_list = 101 }
	add_to_array = { russia_duma_deicisions_list = 102 }
	add_to_array = { russia_duma_deicisions_list = 103 }
	add_to_array = { russia_duma_deicisions_list = 104 }

	clear_array = supreme_soviet_frame

	clear_array = Soviet_Faction_ID
	clear_array = Soviet_Faction_ID_COALITION
	clear_array = Soviet_Faction_TOTAL
	clear_array = Soviet_Faction_TOTAL_COALITION
	
	add_to_array = { Soviet_Faction_ID = 1 }
	add_to_array = { Soviet_Faction_ID = 2 }
	add_to_array = { Soviet_Faction_ID = 3 }
	add_to_array = { Soviet_Faction_ID = 4 }
	add_to_array = { Soviet_Faction_ID = 5 }
	add_to_array = { Soviet_Faction_ID = 6 }
	add_to_array = { Soviet_Faction_ID = 7 }
	add_to_array = { Soviet_Faction_ID = 8 }
	add_to_array = { Soviet_Faction_ID = 9 }
	add_to_array = { Soviet_Faction_ID = 10 }
	add_to_array = { Soviet_Faction_ID = 11 }
	add_to_array = { Soviet_Faction_ID = 12 }
	add_to_array = { Soviet_Faction_ID = 13 }
	add_to_array = { Soviet_Faction_ID = 14 }
	add_to_array = { Soviet_Faction_ID = 15 }
	add_to_array = { Soviet_Faction_ID = 16 }
	add_to_array = { Soviet_Faction_ID = 17 }
	add_to_array = { Soviet_Faction_ID = 18 }
	add_to_array = { Soviet_Faction_ID = 19 }
	add_to_array = { Soviet_Faction_ID = 20 }
	add_to_array = { Soviet_Faction_ID = 21 }

	add_to_array = { Soviet_Faction_ID_COALITION = 2 }
	add_to_array = { Soviet_Faction_ID_COALITION = 2 }
	add_to_array = { Soviet_Faction_ID_COALITION = 3 }
	add_to_array = { Soviet_Faction_ID_COALITION = 3 }
	add_to_array = { Soviet_Faction_ID_COALITION = 3 }
	add_to_array = { Soviet_Faction_ID_COALITION = 1 }
	add_to_array = { Soviet_Faction_ID_COALITION = 4 }
	add_to_array = { Soviet_Faction_ID_COALITION = 4 }
	add_to_array = { Soviet_Faction_ID_COALITION = 4 }
	add_to_array = { Soviet_Faction_ID_COALITION = 4 }
	add_to_array = { Soviet_Faction_ID_COALITION = 1 }
	add_to_array = { Soviet_Faction_ID_COALITION = 1 }
	add_to_array = { Soviet_Faction_ID_COALITION = 1 }
	add_to_array = { Soviet_Faction_ID_COALITION = 1 }
	add_to_array = { Soviet_Faction_ID_COALITION = 5 }
	add_to_array = { Soviet_Faction_ID_COALITION = 5 }
	add_to_array = { Soviet_Faction_ID_COALITION = 5 }
	add_to_array = { Soviet_Faction_ID_COALITION = 1 }
	add_to_array = { Soviet_Faction_ID_COALITION = 5 }
	add_to_array = { Soviet_Faction_ID_COALITION = 5 }
	add_to_array = { Soviet_Faction_ID_COALITION = 5 }

	add_to_array = { Soviet_Faction_TOTAL = 33 }
	add_to_array = { Soviet_Faction_TOTAL = 33 }
	add_to_array = { Soviet_Faction_TOTAL = 16 }
	add_to_array = { Soviet_Faction_TOTAL = 22 }
	add_to_array = { Soviet_Faction_TOTAL = 8 }
	add_to_array = { Soviet_Faction_TOTAL = 0 }
	add_to_array = { Soviet_Faction_TOTAL = 24 }
	add_to_array = { Soviet_Faction_TOTAL = 10 }
	add_to_array = { Soviet_Faction_TOTAL = 13 }
	add_to_array = { Soviet_Faction_TOTAL = 8 }
	add_to_array = { Soviet_Faction_TOTAL = 0 }
	add_to_array = { Soviet_Faction_TOTAL = 0 }
	add_to_array = { Soviet_Faction_TOTAL = 0 }
	add_to_array = { Soviet_Faction_TOTAL = 0 }
	add_to_array = { Soviet_Faction_TOTAL = 16 }
	add_to_array = { Soviet_Faction_TOTAL = 12 }
	add_to_array = { Soviet_Faction_TOTAL = 9 }
	add_to_array = { Soviet_Faction_TOTAL = 0 }
	add_to_array = { Soviet_Faction_TOTAL = 32 }
	add_to_array = { Soviet_Faction_TOTAL = 8 }
	add_to_array = { Soviet_Faction_TOTAL = 8 }

	#252 so 251 Index is Max 
	set_variable = { Soviet_Faction_1 = 33 }
	set_variable = { Soviet_Faction_2 = 33 }
	set_variable = { Soviet_Faction_3 = 16 }
	set_variable = { Soviet_Faction_4 = 22 }
	set_variable = { Soviet_Faction_5 = 8 }
	set_variable = { Soviet_Faction_6 = 0 }
	set_variable = { Soviet_Faction_7 = 24 }
	set_variable = { Soviet_Faction_8 = 10 }
	set_variable = { Soviet_Faction_9 = 13 }
	set_variable = { Soviet_Faction_10 = 8 }
	set_variable = { Soviet_Faction_11 = 0 }
	set_variable = { Soviet_Faction_12 = 0 }
	set_variable = { Soviet_Faction_13 = 0 }
	set_variable = { Soviet_Faction_14 = 0 }
	set_variable = { Soviet_Faction_15 = 16 }
	set_variable = { Soviet_Faction_16 = 12 }
	set_variable = { Soviet_Faction_17 = 9 }
	set_variable = { Soviet_Faction_18 = 0 }
	set_variable = { Soviet_Faction_19 = 32 }
	set_variable = { Soviet_Faction_20 = 8 }
	set_variable = { Soviet_Faction_21 = 8 }
	while_loop_effect = { 
		limit = {
			check_variable = { Soviet_Faction_1 > 0 }
		}
		add_to_array = { supreme_soviet_frame = 1 }
		add_to_variable = { Soviet_Faction_1 = -1 }
	}
	while_loop_effect = { 
		limit = {
			check_variable = { Soviet_Faction_2 > 0 }
		}
		add_to_array = { supreme_soviet_frame = 2 }
		add_to_variable = { Soviet_Faction_2 = -1 }
	}
	while_loop_effect = { 
		limit = {
			check_variable = { Soviet_Faction_3 > 0 }
		}
		add_to_array = { supreme_soviet_frame = 3 }
		add_to_variable = { Soviet_Faction_3 = -1 }
	}
	while_loop_effect = { 
		limit = {
			check_variable = { Soviet_Faction_4 > 0 }
		}
		add_to_array = { supreme_soviet_frame = 4 }
		add_to_variable = { Soviet_Faction_4 = -1 }
	}
	while_loop_effect = { 
		limit = {
			check_variable = { Soviet_Faction_5 > 0 }
		}
		add_to_array = { supreme_soviet_frame = 5 }
		add_to_variable = { Soviet_Faction_5 = -1 }
	}
	while_loop_effect = { 
		limit = {
			check_variable = { Soviet_Faction_6 > 0 }
		}
		add_to_array = { supreme_soviet_frame = 6 }
		add_to_variable = { Soviet_Faction_6 = -1 }
	}
	while_loop_effect = { 
		limit = {
			check_variable = { Soviet_Faction_7 > 0 }
		}
		add_to_array = { supreme_soviet_frame = 7 }
		add_to_variable = { Soviet_Faction_7 = -1 }
	}
	while_loop_effect = { 
		limit = {
			check_variable = { Soviet_Faction_8 > 0 }
		}
		add_to_array = { supreme_soviet_frame = 8 }
		add_to_variable = { Soviet_Faction_8 = -1 }
	}
	while_loop_effect = { 
		limit = {
			check_variable = { Soviet_Faction_9 > 0 }
		}
		add_to_array = { supreme_soviet_frame = 9 }
		add_to_variable = { Soviet_Faction_9 = -1 }
	}
	while_loop_effect = { 
		limit = {
			check_variable = { Soviet_Faction_10 > 0 }
		}
		add_to_array = { supreme_soviet_frame = 10 }
		add_to_variable = { Soviet_Faction_10 = -1 }
	}
	while_loop_effect = { 
		limit = {
			check_variable = { Soviet_Faction_11 > 0 }
		}
		add_to_array = { supreme_soviet_frame = 11 }
		add_to_variable = { Soviet_Faction_11 = -1 }
	}
	while_loop_effect = { 
		limit = {
			check_variable = { Soviet_Faction_12 > 0 }
		}
		add_to_array = { supreme_soviet_frame = 12 }
		add_to_variable = { Soviet_Faction_12 = -1 }
	}
	while_loop_effect = { 
		limit = {
			check_variable = { Soviet_Faction_13 > 0 }
		}
		add_to_array = { supreme_soviet_frame = 13 }
		add_to_variable = { Soviet_Faction_13 = -1 }
	}
	while_loop_effect = { 
		limit = {
			check_variable = { Soviet_Faction_14 > 0 }
		}
		add_to_array = { supreme_soviet_frame = 14 }
		add_to_variable = { Soviet_Faction_14 = -1 }
	}
	while_loop_effect = { 
		limit = {
			check_variable = { Soviet_Faction_15 > 0 }
		}
		add_to_array = { supreme_soviet_frame = 15 }
		add_to_variable = { Soviet_Faction_15 = -1 }
	}
	while_loop_effect = { 
		limit = {
			check_variable = { Soviet_Faction_16 > 0 }
		}
		add_to_array = { supreme_soviet_frame = 16 }
		add_to_variable = { Soviet_Faction_16 = -1 }
	}
	while_loop_effect = { 
		limit = {
			check_variable = { Soviet_Faction_17 > 0 }
		}
		add_to_array = { supreme_soviet_frame = 17 }
		add_to_variable = { Soviet_Faction_17 = -1 }
	}
	while_loop_effect = { 
		limit = {
			check_variable = { Soviet_Faction_18 > 0 }
		}
		add_to_array = { supreme_soviet_frame = 18 }
		add_to_variable = { Soviet_Faction_18 = -1 }
	}
	while_loop_effect = { 
		limit = {
			check_variable = { Soviet_Faction_19 > 0 }
		}
		add_to_array = { supreme_soviet_frame = 19 }
		add_to_variable = { Soviet_Faction_19 = -1 }
	}
	while_loop_effect = { 
		limit = {
			check_variable = { Soviet_Faction_20 > 0 }
		}
		add_to_array = { supreme_soviet_frame = 20 }
		add_to_variable = { Soviet_Faction_20 = -1 }
	}
	while_loop_effect = { 
		limit = {
			check_variable = { Soviet_Faction_21 > 0 }
		}
		add_to_array = { supreme_soviet_frame = 21 }
		add_to_variable = { Soviet_Faction_21 = -1 }
	}
	Supreme_Soviet_Pre_Sort = yes
}
