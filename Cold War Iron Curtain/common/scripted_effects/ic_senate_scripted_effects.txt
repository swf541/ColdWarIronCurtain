break_coalition = {
	clr_country_flag = has_coalition
	
	clr_country_flag = coalition_islamism					#islamist
	clr_country_flag = coalition_fascism					#fascist
	clr_country_flag = coalition_nationalism				#nationalist
	clr_country_flag = coalition_monarchism					#monarchist
	clr_country_flag = coalition_neutrality					#reactionary
	clr_country_flag = coalition_conservative				#conservative
	clr_country_flag = coalition_Liberal_Conservatism		#market_liberal
	clr_country_flag = coalition_Social_Liberalism			#social_liberal
	clr_country_flag = coalition_Social_Democratic			#social_democrat
	clr_country_flag = coalition_democratic					#progressive
	clr_country_flag = coalition_socialist					#socialist
	clr_country_flag = coalition_communism					#communist
	
	clr_country_flag = coalition_Christian_Democratic
	clr_country_flag = coalition_centrist
	clr_country_flag = coalition_liberal
	clr_country_flag = coalition_trotskyism
	clr_country_flag = coalition_maoism
	clr_country_flag = coalition_radical_shiaism
	clr_country_flag = coalition_Salafism
	
	clear_variable = ROOT.Coalition
}

update_coalition = {
	set_variable = {
		var = ROOT.Coalition
		value = 0
	}
	if = {
		limit = {
			has_country_flag = coalition_islamism
		}
		add_to_variable = { ROOT.Coalition = islamism_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_fascism
		}
		add_to_variable = { ROOT.Coalition = fascism_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_nationalism
		}
		add_to_variable = { ROOT.Coalition = nationalism_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_monarchism
		}
		add_to_variable = { ROOT.Coalition = monarchism_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_neutrality
		}
		add_to_variable = { ROOT.Coalition = neutrality_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_conservative
		}
		add_to_variable = { ROOT.Coalition = conservative_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_Liberal_Conservatism
		}
		add_to_variable = { ROOT.Coalition = Liberal_Conservatism_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_Social_Liberalism
		}
		add_to_variable = { ROOT.Coalition = Social_Liberalism_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_Social_Democratic
		}
		add_to_variable = { ROOT.Coalition = Social_Democratic_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_democratic
		}
		add_to_variable = { ROOT.Coalition = democratic_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_socialist
		}
		add_to_variable = { ROOT.Coalition = socialist_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_communism
		}
		add_to_variable = { ROOT.Coalition = communism_seats }
	}
	multiply_variable = { ROOT.Coalition = 100 }

	if = {
		limit = {
			has_country_flag = coalition_Christian_Democratic
		}
		add_to_variable = { ROOT.Coalition = Christian_Democratic_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_centrist
		}
		add_to_variable = { ROOT.Coalition = centrist_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_liberal
		}
		add_to_variable = { ROOT.Coalition = liberal_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_trotskyism
		}
		add_to_variable = { ROOT.Coalition = trotskyism_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_maoism
		}
		add_to_variable = { ROOT.Coalition = maoism_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_radical_shiaism
		}
		add_to_variable = { ROOT.Coalition = radical_shiaism_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_Salafism
		}
		add_to_variable = { ROOT.Coalition = Salafism_seats }
	}	
	if = {
		limit = {
			NOT = { has_country_flag = has_coalition }
		}
		break_coalition = yes
	}
}

cleanup_coalition = {
	clr_country_flag = government_chosen
	
	clr_country_flag = government_islamism
	clr_country_flag = government_fascism
	clr_country_flag = government_nationalism
	clr_country_flag = government_monarchism
	clr_country_flag = government_neutrality
	clr_country_flag = government_conservative
	clr_country_flag = government_Liberal_Conservatism
	clr_country_flag = government_Social_Liberalism
	clr_country_flag = government_Social_Democratic
	clr_country_flag = government_democratic
	clr_country_flag = government_socialist
	clr_country_flag = government_communism
	
	clr_country_flag = government_Christian_Democratic
	clr_country_flag = government_centrist
	clr_country_flag = government_liberal
	clr_country_flag = government_trotskyism
	clr_country_flag = government_maoism
	clr_country_flag = government_radical_shiaism
	clr_country_flag = government_Salafism
	
	clr_country_flag = coalition_chosen
	clear_variable = ROOT.NewCoalition
}
quickset_parliament = {
	set_variable = { communism_seats = party_popularity@communism }
	multiply_variable = { communism_seats = 100 }
	set_variable = { socialist_seats = party_popularity@socialist }
	multiply_variable = { socialist_seats = 100 }
	set_variable = { democratic_seats = party_popularity@democratic }
	multiply_variable = { democratic_seats = 100 }
	set_variable = { Social_Democratic_seats = party_popularity@Social_Democratic }
	multiply_variable = { Social_Democratic_seats = 100 }
	set_variable = { Social_Liberalism_seats = party_popularity@Social_Liberalism }
	multiply_variable = { Social_Liberalism_seats = 100 }
	set_variable = { Liberal_Conservatism_seats = party_popularity@Liberal_Conservatism }
	multiply_variable = { Liberal_Conservatism_seats = 100 }
	set_variable = { conservative_seats = party_popularity@conservative }
	multiply_variable = { conservative_seats = 100 }
	set_variable = { neutrality_seats = party_popularity@neutrality }
	multiply_variable = { neutrality_seats = 100 }
	set_variable = { monarchism_seats = party_popularity@monarchism }
	multiply_variable = { monarchism_seats = 100 }
	set_variable = { nationalism_seats = party_popularity@nationalist }
	multiply_variable = { nationalism_seats = 100 }
	set_variable = { fascism_seats = party_popularity@fascism }
	multiply_variable = { fascism_seats = 100 }
	set_variable = { islamism_seats = party_popularity@islamism }
	multiply_variable = { islamism_seats = 100 }
	
	set_variable = { Christian_Democratic_seats = party_popularity@Christian_Democratic }
	multiply_variable = { Christian_Democratic_seats = 100 }
	set_variable = { centrist_seats = party_popularity@centrist }
	multiply_variable = { centrist_seats = 100 }
	set_variable = { liberal_seats = party_popularity@liberal }
	multiply_variable = { liberal_seats = 100 }
	set_variable = { trotskyism_seats = party_popularity@trotskyism }
	multiply_variable = { trotskyism_seats = 100 }
	set_variable = { maoism_seats = party_popularity@maoism }
	multiply_variable = { maoism_seats = 100 }
	set_variable = { radical_shiaism_seats = party_popularity@radical_shiaism }
	multiply_variable = { radical_shiaism_seats = 100 }
	set_variable = { Salafism_seats = party_popularity@Salafism }
	multiply_variable = { Salafism_seats = 100 }
	set_parliament_graphics = yes
}


quickset_coalition = {
	set_country_flag = has_coalition
	if = {
		limit = {
			has_government = communism
		}
		set_country_flag = coalition_communism
		add_to_variable = { ROOT.Coalition = communism_seats }
	}
	if = {
		limit = {
			has_government = socialist
		}
		set_country_flag = coalition_socialist
		add_to_variable = { ROOT.Coalition = socialist_seats }
	}
	if = {
		limit = {
			has_government = democratic
		}
		set_country_flag = coalition_democratic
		add_to_variable = { ROOT.Coalition = democratic_seats }
	}
	if = {
		limit = {
			has_government = Social_Democratic
		}
		set_country_flag = coalition_Social_Democratic
		add_to_variable = { ROOT.Coalition = Social_Democratic_seats }
	}
	if = {
		limit = {
			has_government = Social_Liberalism
		}
		set_country_flag = coalition_Social_Liberalism
		add_to_variable = { ROOT.Coalition = Social_Liberalism_seats }
	}
	if = {
		limit = {
			has_government = Liberal_Conservatism
		}
		set_country_flag = coalition_Liberal_Conservatism
		add_to_variable = { ROOT.Coalition = Liberal_Conservatism_seats }
	}
	if = {
		limit = {
			has_government = conservative
		}
		set_country_flag = coalition_conservative
		add_to_variable = { ROOT.Coalition = conservative_seats }
	}
	if = {
		limit = {
			has_government = neutrality
		}
		set_country_flag = coalition_neutrality
		add_to_variable = { ROOT.Coalition = neutrality_seats }
	}
	if = {
		limit = {
			has_government = monarchism
		}
		set_country_flag = coalition_monarchism
		add_to_variable = { ROOT.Coalition = monarchism_seats }
	}
	if = {
		limit = {
			has_government = nationalist
		}
		set_country_flag = coalition_nationalism
		add_to_variable = { ROOT.Coalition = nationalism_seats }
	}
	if = {
		limit = {
			has_government = fascism
		}
		set_country_flag = coalition_fascism
		add_to_variable = { ROOT.Coalition = fascism_seats }
	}
	if = {
		limit = {
			has_government = islamism
		}
		set_country_flag = coalition_islamism
		add_to_variable = { ROOT.Coalition = islamism_seats }
	}
	
	if = {
		limit = {
			has_government = Christian_Democratic
		}
		set_country_flag = coalition_Christian_Democratic
		add_to_variable = { ROOT.Coalition = Christian_Democratic_seats }
	}
	if = {
		limit = {
			has_government = centrist
		}
		set_country_flag = coalition_centrist
		add_to_variable = { ROOT.Coalition = centrist_seats }
	}
	if = {
		limit = {
			has_government = liberal
		}
		set_country_flag = coalition_liberal
		add_to_variable = { ROOT.Coalition = liberal_seats }
	}
	if = {
		limit = {
			has_government = trotskyism
		}
		set_country_flag = coalition_trotskyism
		add_to_variable = { ROOT.Coalition = trotskyism_seats }
	}
	if = {
		limit = {
			has_government = maoism
		}
		set_country_flag = coalition_maoism
		add_to_variable = { ROOT.Coalition = maoism_seats }
	}
	if = {
		limit = {
			has_government = radical_shiaism
		}
		set_country_flag = coalition_radical_shiaism
		add_to_variable = { ROOT.Coalition = radical_shiaism_seats }
	}
	if = {
		limit = {
			has_government = Salafism
		}
		set_country_flag = coalition_radical_Salafism
		add_to_variable = { ROOT.Coalition = Salafism_seats }
	}
}
parliament_setup_one = {
	set_variable = { total_seats = 100 }
	set_variable = { communism_pop = party_popularity@communism }
	multiply_variable = { communism_pop = 100 }
	
	set_variable = { socialist_pop = party_popularity@socialist }
	multiply_variable = { socialist_pop = 100 }
	
	set_variable = { democratic_pop = party_popularity@democratic }
	multiply_variable = { democratic_pop = 100 }
	
	set_variable = { Social_Democratic_pop = party_popularity@Social_Democratic }
	multiply_variable = { Social_Democratic_pop = 100 }
	
	set_variable = { Social_Liberalism_pop = party_popularity@Social_Liberalism }
	multiply_variable = { Social_Liberalism_pop = 100 }
	
	set_variable = { Liberal_Conservatism_pop = party_popularity@Liberal_Conservatism }
	multiply_variable = { Liberal_Conservatism_pop = 100 }
	
	set_variable = { conservative_pop = party_popularity@conservative }
	multiply_variable = { conservative_pop = 100 }
	
	set_variable = { neutrality_pop = party_popularity@neutrality }
	multiply_variable = { neutrality_pop = 100 }
	
	set_variable = { monarchism_pop = party_popularity@monarchism }
	multiply_variable = { monarchism_pop = 100 }
	
	set_variable = { nationalism_pop = party_popularity@nationalist }
	multiply_variable = { nationalism_pop = 100 }
	
	set_variable = { fascism_pop = party_popularity@fascism }
	multiply_variable = { fascism_pop = 100 }
	
	set_variable = { islamism_pop = party_popularity@islamism }
	multiply_variable = { islamism_pop = 100 }
	
	set_variable = { Christian_Democratic_pop = party_popularity@Christian_Democratic }
	multiply_variable = { Christian_Democratic_pop = 100 }
	
	set_variable = { centrist_pop = party_popularity@centrist }
	multiply_variable = { centrist_pop = 100 }
	
	set_variable = { liberal_pop = party_popularity@liberal }
	multiply_variable = { liberal_pop = 100 }
	
	set_variable = { trotskyism_pop = party_popularity@trotskyism }
	multiply_variable = { trotskyism_pop = 100 }
	
	set_variable = { maoism_pop = party_popularity@maoism }
	multiply_variable = { maoism_pop = 100 }
	
	set_variable = { radical_shiaism_pop = party_popularity@radical_shiaism }
	multiply_variable = { radical_shiaism_pop = 100 }
	
	set_variable = { Salafism_pop = party_popularity@Salafism }
	multiply_variable = { Salafism_pop = 100 }

	set_variable = { votingThreshold = 0 }
	
	set_variable = { communism_seats = 0 }
	set_variable = { socialist_seats = 0 }
	set_variable = { Social_Democratic_seats = 0 }
	set_variable = { democratic_seats = 0 }
	set_variable = { Social_Liberalism_seats = 0 }
	set_variable = { Liberal_Conservatism_seats = 0 }
	set_variable = { conservative_seats = 0 }
	set_variable = { islamism_seats = 0 }
	set_variable = { monarchism_seats = 0 }
	set_variable = { neutrality_seats = 0 }
	set_variable = { nationalism_seats = 0 }
	set_variable = { fascism_seats = 0 }
	
	set_variable = { Christian_Democratic_seats = 0 }
	set_variable = { centrist_seats = 0 }
	set_variable = { liberal_seats = 0 }
	set_variable = { trotskyism_seats = 0 }
	set_variable = { maoism_seats = 0 }
	set_variable = { radical_shiaism_seats = 0 }
	set_variable = { Salafism_seats = 0 }
}

parliament_election_fptp = {
	meta_effect = {
		text = {
			random_list = {
				[ADD_SEAT_1] = {
					if = {
						limit = {
							check_variable = { communism_pop > votingThreshold }
						}
						add_to_variable = { communism_seats = 1 }
						add_to_variable = { total_seats = -1 }
					}
				}
				[ADD_SEAT_2] = {
					if = {
						limit = {
							check_variable = { socialist_pop > votingThreshold }
						}
						add_to_variable = { socialist_seats = 1 }
						add_to_variable = { total_seats = -1 }			
					}
				}
				[ADD_SEAT_3] = {
					if = {
						limit = {
							check_variable = { Social_Democratic_pop > votingThreshold }
						}
						add_to_variable = { Social_Democratic_seats = 1 }
						add_to_variable = { total_seats = -1 }		
					}
				}
				[ADD_SEAT_4] = {
					if = {
						limit = {
							check_variable = { democratic_pop > votingThreshold }
						}
						add_to_variable = { democratic_seats = 1 }
						add_to_variable = { total_seats = -1 }	
					}
				}
				[ADD_SEAT_5] = {
					if = {
						limit = {
							check_variable = { Social_Liberalism_pop > votingThreshold }
						}
						add_to_variable = { Social_Liberalism_seats = 1 }
						add_to_variable = { total_seats = -1 }	
					}
				}
				[ADD_SEAT_6] = {
					if = {
						limit = {
							check_variable = { Liberal_Conservatism_pop > votingThreshold }
						}
						add_to_variable = { Liberal_Conservatism_seats = 1 }
						add_to_variable = { total_seats = -1 }					
					}
				}
				[ADD_SEAT_7] = {
					if = {
						limit = {
							check_variable = { conservative_pop > votingThreshold }
						}
						add_to_variable = { conservative_seats = 1 }
						add_to_variable = { total_seats = -1 }					
					}				
				}
				[ADD_SEAT_8] = {
					if = {
						limit = {
							check_variable = { islamism_pop > votingThreshold }
						}
						add_to_variable = { islamism_seats = 1 }
						add_to_variable = { total_seats = -1 }					
					}
				}
				[ADD_SEAT_9] = {
					if = {
						limit = {
							check_variable = { monarchism_pop > votingThreshold }
						}
						add_to_variable = { monarchism_seats = 1 }
						add_to_variable = { total_seats = -1 }					
					}				
				}
				[ADD_SEAT_10] = {
					if = {
						limit = {
							check_variable = { neutrality_pop > votingThreshold }
						}
						add_to_variable = { neutrality_seats = 1 }
						add_to_variable = { total_seats = -1 }					
					}				
				}
				[ADD_SEAT_11] = {
					if = {
						limit = {
							check_variable = { nationalism_pop > votingThreshold }
						}
						add_to_variable = { nationalism_seats = 1 }
						add_to_variable = { total_seats = -1 }					
					}				
				}
				[ADD_SEAT_12] = {
					if = {
						limit = {
							check_variable = { fascism_pop > votingThreshold }
						}
						add_to_variable = { fascism_seats = 1 }
						add_to_variable = { total_seats = -1 }					
					}				
				}
				[ADD_SEAT_13] = {
					if = {
						limit = {
							check_variable = { Christian_Democratic_pop > votingThreshold }
						}
						add_to_variable = { Christian_Democratic_seats = 1 }
						add_to_variable = { total_seats = -1 }					
					}				
				}
				[ADD_SEAT_14] = {
					if = {
						limit = {
							check_variable = { centrist_pop > votingThreshold }
						}
						add_to_variable = { centrist_seats = 1 }
						add_to_variable = { total_seats = -1 }					
					}				
				}
				[ADD_SEAT_15] = {
					if = {
						limit = {
							check_variable = { liberal_pop > votingThreshold }
						}
						add_to_variable = { liberal_seats = 1 }
						add_to_variable = { total_seats = -1 }					
					}			
				}
				[ADD_SEAT_16] = {
					if = {
						limit = {
							check_variable = { trotskyism_pop > votingThreshold }
						}
						add_to_variable = { trotskyism_seats = 1 }
						add_to_variable = { total_seats = -1 }					
					}					
				}
				[ADD_SEAT_17] = {
					if = {
						limit = {
							check_variable = { maoism_pop > votingThreshold }
						}
						add_to_variable = { maoism_seats = 1 }
						add_to_variable = { total_seats = -1 }					
					}				
				}
				[ADD_SEAT_18] = {
					if = {
						limit = {
							check_variable = { radical_shiaism_pop > votingThreshold }
						}
						add_to_variable = { radical_shiaism_seats = 1 }
						add_to_variable = { total_seats = -1 }					
					}			
				}
				[ADD_SEAT_19] = {
					if = {
						limit = {
							check_variable = { Salafism_pop > votingThreshold }
						}
						add_to_variable = { Salafism_seats = 1 }
						add_to_variable = { total_seats = -1 }					
					}
				}
			}
		}
		ADD_SEAT_1 = communism_pop
		ADD_SEAT_2 = socialist_pop
		ADD_SEAT_3 = democratic_pop
		ADD_SEAT_4 = Social_Democratic_pop
		ADD_SEAT_5 = Social_Liberalism_pop
		ADD_SEAT_6 = Liberal_Conservatism_pop
		ADD_SEAT_7 = conservative_pop 
		ADD_SEAT_8 = neutrality_pop 
		ADD_SEAT_9 = monarchism_pop 
		ADD_SEAT_10 = nationalism_pop 
		ADD_SEAT_11 = fascism_pop 
		ADD_SEAT_12 = islamism_pop 
		ADD_SEAT_13 = Christian_Democratic_pop 
		ADD_SEAT_14 = centrist_pop 
		ADD_SEAT_15 = liberal_pop 
		ADD_SEAT_16 = trotskyism_pop 
		ADD_SEAT_17 = maoism_pop 
		ADD_SEAT_18 = radical_shiaism_pop 
		ADD_SEAT_19 = Salafism_pop 

	}
	if = {
		limit = {
			check_variable = { total_seats > 0 }
		}		
		parliament_election_fptp = yes
	}
}

parliament_election_fptp_calc = {
	set_variable = { communism_seats_parliament = communism_seats }
	set_variable = { socialist_seats_parliament = socialist_seats }
	set_variable = { Social_Democratic_seats_parliament = Social_Democratic_seats }
	set_variable = { democratic_seats_parliament = democratic_seats }
	set_variable = { Social_Liberalism_seats_parliament = Social_Liberalism_seats }
	set_variable = { Liberal_Conservatism_seats_parliament = Liberal_Conservatism_seats }
	set_variable = { conservative_seats_parliament = conservative_seats }
	set_variable = { islamism_seats_parliament = islamism_seats }
	set_variable = { monarchism_seats_parliament = monarchism_seats }
	set_variable = { neutrality_seats_parliament = neutrality_seats }
	set_variable = { nationalism_seats_parliament = nationalism_seats }
	set_variable = { fascism_seats_parliament = fascism_seats }
	
	set_variable = { Christian_Democratic_seats_parliament = Christian_Democratic_seats }
	set_variable = { centrist_seats_parliament = centrist_seats }
	set_variable = { liberal_seats_parliament = liberal_seats }
	set_variable = { trotskyism_seats_parliament = trotskyism_seats }
	set_variable = { maoism_seats_parliament = maoism_seats }
	set_variable = { radical_shiaism_seats_parliament = radical_shiaism_seats }
	set_variable = { Salafism_seats_parliament = Salafism_seats }

}
generic_parliament_election = {
	parliament_setup_one = yes
	parliament_election_fptp = yes
	parliament_election_fptp_calc = yes	
	
	set_parliament_graphics = yes
}

set_parliament_graphics = {


	divide_variable = { communism_seats_parliament = 2 }
	divide_variable = { socialist_seats_parliament = 2 }
	divide_variable = { Social_Democratic_seats_parliament = 2 }
	divide_variable = { democratic_seats_parliament = 2 }
	divide_variable = { Social_Liberalism_seats_parliament = 2 }
	divide_variable = { Liberal_Conservatism_seats_parliament = 2 }
	divide_variable = { conservative_seats_parliament = 2 }
	divide_variable = { islamism_seats_parliament = 2 }
	divide_variable = { monarchism_seats_parliament = 2 }
	divide_variable = { neutrality_seats_parliament = 2 }
	divide_variable = { nationalism_seats_parliament = 2 }
	divide_variable = { fascism_seats_parliament = 2 }
	
	divide_variable = { Christian_Democratic_seats_parliament = 2 }
	divide_variable = { centrist_seats_parliament = 2 }
	divide_variable = { liberal_seats_parliament = 2 }
	divide_variable = { trotskyism_seats_parliament = 2 }
	divide_variable = { maoism_seats_parliament = 2 }
	divide_variable = { radical_shiaism_seats_parliament = 2 }
	divide_variable = { Salafism_seats_parliament = 2 }
	
	clear_array = ideology_seats_array
	
## Step 5: Assign seats

	add_to_array = { ideology_seats_array = 0 } # Placeholder, I need the frames to be 1-12 and not 0-11
	
	add_to_array = { ideology_seats_array = maoism_seats_parliament }
	add_to_array = { ideology_seats_array = communism_seats_parliament }
	add_to_array = { ideology_seats_array = trotskyism_seats_parliament }
	add_to_array = { ideology_seats_array = socialist_seats_parliament }
	add_to_array = { ideology_seats_array = Social_Democratic_seats_parliament }
	add_to_array = { ideology_seats_array = democratic_seats_parliament }
	add_to_array = { ideology_seats_array = Social_Liberalism_seats_parliament }
	add_to_array = { ideology_seats_array = centrist_seats_parliament }
	add_to_array = { ideology_seats_array = liberal_seats_parliament }
	add_to_array = { ideology_seats_array = Christian_Democratic_seats_parliament }
	add_to_array = { ideology_seats_array = Liberal_Conservatism_seats_parliament }
	add_to_array = { ideology_seats_array = conservative_seats_parliament }
	add_to_array = { ideology_seats_array = nationalism_seats_parliament }
	add_to_array = { ideology_seats_array = islamism_seats_parliament }
	add_to_array = { ideology_seats_array = neutrality_seats_parliament }
	add_to_array = { ideology_seats_array = monarchism_seats_parliament }
	add_to_array = { ideology_seats_array = fascism_seats_parliament }
	add_to_array = { ideology_seats_array = radical_shiaism_seats_parliament }
	add_to_array = { ideology_seats_array = Salafism_seats_parliament }
	
	clear_array = ideology_seats_naming_array
	clear_array = ideology_id_array
		
	add_to_array = { ideology_seats_naming_array = maoism_seats_parliament }
	add_to_array = { ideology_seats_naming_array = communism_seats_parliament }
	add_to_array = { ideology_seats_naming_array = trotskyism_seats_parliament }
	add_to_array = { ideology_seats_naming_array = socialist_seats_parliament }
	add_to_array = { ideology_seats_naming_array = Social_Democratic_seats_parliament }
	add_to_array = { ideology_seats_naming_array = democratic_seats_parliament }
	add_to_array = { ideology_seats_naming_array = Social_Liberalism_seats_parliament }
	add_to_array = { ideology_seats_naming_array = centrist_seats_parliament }
	add_to_array = { ideology_seats_naming_array = liberal_seats_parliament }
	
	add_to_array = { ideology_seats_naming_array = Christian_Democratic_seats_parliament }
	add_to_array = { ideology_seats_naming_array = Liberal_Conservatism_seats_parliament }
	add_to_array = { ideology_seats_naming_array = conservative_seats_parliament }
	add_to_array = { ideology_seats_naming_array = nationalism_seats_parliament }
	add_to_array = { ideology_seats_naming_array = islamism_seats_parliament }
	add_to_array = { ideology_seats_naming_array = neutrality_seats_parliament }
	add_to_array = { ideology_seats_naming_array = monarchism_seats_parliament }
	add_to_array = { ideology_seats_naming_array = fascism_seats_parliament }
	add_to_array = { ideology_seats_naming_array = radical_shiaism_seats_parliament }
	add_to_array = { ideology_seats_naming_array = Salafism_seats_parliament }
	


	
	set_variable = { maoism_id = 1 }
	set_variable = { communism_id = 2 }
	set_variable = { trotskyism_id = 3 }
	set_variable = { socialist_id = 4 }
	set_variable = { Social_Democratic_id = 5 }
	set_variable = { democratic_id = 6 }
	set_variable = { Social_Liberalism_id = 7 }
	set_variable = { centrist_id = 8 }
	set_variable = { liberal_id = 9 }
	set_variable = { Christian_Democratic_id = 10 }
	set_variable = { Liberal_Conservatism_id = 11 }
	set_variable = { conservative_id = 12 }
	set_variable = { nationalism_id = 13 }
	set_variable = { islamism_id = 14 }
	set_variable = { neutrality_id = 15}
	set_variable = { monarchism_id = 16 }
	set_variable = { fascism_id = 17 }
	set_variable = { radical_shiaism_id = 18 }
	set_variable = { Salafism_id = 19 }
	
	add_to_array = { ideology_id_array = maoism_id }
	add_to_array = { ideology_id_array = communism_id }
	add_to_array = { ideology_id_array = trotskyism_id }
	add_to_array = { ideology_id_array = socialist_id }
	add_to_array = { ideology_id_array = Social_Democratic_id }
	add_to_array = { ideology_id_array = democratic_id }
	add_to_array = { ideology_id_array = Social_Liberalism_id }
	add_to_array = { ideology_id_array = centrist_id }
	add_to_array = { ideology_id_array = liberal_id }
	add_to_array = { ideology_id_array = Christian_Democratic_id }
	add_to_array = { ideology_id_array = Liberal_Conservatism_id }
	add_to_array = { ideology_id_array = conservative_id }
	add_to_array = { ideology_id_array = nationalism_id }
	add_to_array = { ideology_id_array = islamism_id }
	add_to_array = { ideology_id_array = neutrality_id }
	add_to_array = { ideology_id_array = monarchism_id }
	add_to_array = { ideology_id_array = fascism_id }
	add_to_array = { ideology_id_array = radical_shiaism_id }
	add_to_array = { ideology_id_array = Salafism_id }
		
	sort_party_sizes = yes

	for_each_loop = {
		array = ideology_seats_array
		if = {
			limit = {
				check_variable = { v > 49 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 48 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 47 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 46 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 45 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 44 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 43 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 42 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 41 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 40 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 39 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 38 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 37 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 36 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 35 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 34 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 33 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 32 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 31 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 30 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 29 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 28 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 27 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 26 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 25 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 24 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 23 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 22 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 21 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 20 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 19 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 18 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 17 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 16 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 15 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 14 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 13 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 12 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 11 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 10 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 9 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 8 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 7 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 6 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 5 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 4 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 3 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 2 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 1 }
			}
			add_to_array = { parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 0 }
			}
			add_to_array = { parliament_array = i }
		}
	}
	#set_parliament_graphics_2 = yes
}
sort_party_sizes = {
	set_temp_variable = { length_temp = ideology_seats_naming_array^num }
	   for_loop_effect = {
		start = 0
		end = length_temp
		add = 1
		value = v
		break = b
		
		
		find_highest_in_array = {
			array = ideology_seats_naming_array
			value = v
			index = ii
		}
		remove_from_array = {
			array = ideology_seats_naming_array
			index = ii
		}
		add_to_temp_array = { 
			array = ideology_seats_naming_array_temp
			value = v
		}
		set_temp_variable = { ideology_id_array_temp_var = ideology_id_array^ii }
		remove_from_array = {
			array = ideology_id_array
			index = ii
		}
		add_to_temp_array = { 
			array = ideology_id_array_temp
			value = ideology_id_array_temp_var  
		}
	}
	for_loop_effect = {
		start = 0
		end = length_temp
		add = 1
		value = v
		break = b
		
		add_to_array = { 
			array = ideology_seats_naming_array
			value = ideology_seats_naming_array_temp^v
		}
		add_to_array = { 
			array = ideology_id_array
			value = ideology_id_array_temp^v 
		}
	}
}
set_parliament_graphics_2 = {
	set_variable = {
		ROOT.GroupGFX = ROOT.Coalition
	}
	divide_variable = { ROOT.GroupGFX = 100 }
	multiply_variable = { ROOT.GroupGFX = 230 }

	set_variable = {
		ROOT.Opposition = 100
	}
	subtract_from_variable = {
		ROOT.Opposition = ROOT.Coalition
	}
}
class_1_senate_calc = {
	set_variable = { class_i_size = 32 }
	set_variable = { total_seats = class_i_size }
	set_variable = { cons_seats_class_i = 0 }
	set_variable = { neocon_seats_class_i = 0 }
	set_variable = { christian_dem_seats_class_i = 0 }
	set_variable = { centre_seats_class_i = 0 }
	set_variable = { libertarian_seats_class_i = 0 }
	
	set_variable = { demsoc_seats_class_i = 0 }
	set_variable = { socdem_seats_class_i = 0 }
	set_variable = { soclib_seats_class_i = 0 }
	set_variable = { marlib_seats_class_i = 0 }
	set_variable = { aut_seats_class_i = 0 }

	subtract_from_variable = { total_sen_dem = class_i_dem }
	subtract_from_variable = { total_sen_gop = class_i_gop }
	
	set_variable = { class_i_dem = 0 }
	set_variable = { class_i_gop = 0 }
	
	if = {
		limit = {
			has_country_flag = ak_hi_state
		}
		add_to_variable = { class_i_size = 1 }
	}

	
	#Liberal GOP Safe
	set_variable = { centre_seats_class_i = 7 }
	subtract_from_variable = { total_seats = 7 }

	#Dixiecrat Safe
	set_variable = { aut_seats_class_i = 7 }
	subtract_from_variable = { total_seats = 7 }

	#New Deal Dem
	add_to_variable = { socdem_seats_class_i = 2 }
	subtract_from_variable = { total_seats = 2 }

	#Tossup
	#Set GOP Nationwide Pop
	set_variable = { gop_pop = 0 } 
	
	set_variable = { cons_pop = party_popularity@conservative } 
	set_variable = { neocon_pop = party_popularity@Liberal_Conservatism } 
	set_variable = { christian_dem_pop = party_popularity@Christian_Democratic } 
	set_variable = { libertarian_pop = party_popularity@liberal } 
	
	add_to_variable = { gop_pop = cons_pop }
	add_to_variable = { gop_pop = neocon_pop }
	add_to_variable = { gop_pop = christian_dem_pop }
	add_to_variable = { gop_pop = libertarian_pop }
	
	#Set DEM Nationwide Pop
	set_variable = { dem_pop = 0 } 
	
	set_variable = { demsoc_pop = party_popularity@socialist } 
	set_variable = { socdem_pop = party_popularity@Social_Democratic } 
	set_variable = { soclib_pop = party_popularity@Social_Liberalism } 
	set_variable = { marlib_pop = party_popularity@democratic } 
	
	add_to_variable = { dem_pop = demsoc_pop }
	add_to_variable = { dem_pop = socdem_pop }
	add_to_variable = { dem_pop = soclib_pop }
	add_to_variable = { dem_pop = marlib_pop }	
	
	#Nationwide Total Ammount
	set_variable = { national_pop = 0 } 
	add_to_variable = { national_pop = dem_pop }
	add_to_variable = { national_pop = gop_pop }
	
	divide_variable = { dem_pop = national_pop }
	divide_variable = { gop_pop = national_pop }

	if = {
		limit = {
			check_variable = { total_seats > 0 }
		}		
		class_i_random = yes
	}	
	add_to_variable = { class_i_gop = cons_seats_class_i }
	add_to_variable = { class_i_gop = neocon_seats_class_i }
	add_to_variable = { class_i_gop = christian_dem_seats_class_i } 
	add_to_variable = { class_i_gop = centre_seats_class_i }
	add_to_variable = { class_i_gop = libertarian_seats_class_i }
	
	add_to_variable = { class_i_dem = demsoc_seats_class_i }
	add_to_variable = { class_i_dem = socdem_seats_class_i }
	add_to_variable = { class_i_dem = soclib_seats_class_i }
	add_to_variable = { class_i_dem = marlib_seats_class_i }
	add_to_variable = { class_i_dem = aut_seats_class_i }	

	add_to_variable = { total_sen_dem = class_i_dem }
	add_to_variable = { total_sen_gop = class_i_gop }
	Congress_GUI_Update = yes
}	

class_2_senate_calc = {
	set_variable = { class_ii_size = 32 }
	set_variable = { total_seats = class_ii_size }
	set_variable = { cons_seats_class_ii = 0 }
	set_variable = { neocon_seats_class_ii = 0 }
	set_variable = { christian_dem_seats_class_ii = 0 }
	set_variable = { centre_seats_class_ii = 0 }
	set_variable = { libertarian_seats_class_ii = 0 }
	set_variable = { demsoc_seats_class_ii = 0 }
	set_variable = { socdem_seats_class_ii = 0 }
	set_variable = { soclib_seats_class_ii = 0 }
	set_variable = { marlib_seats_class_ii = 0 }
	set_variable = { aut_seats_class_ii = 0 }
	if = {
		limit = {
			has_country_flag = ak_hi_state
		}
		add_to_variable = { class_ii_size = 1 }
	}
	
	subtract_from_variable = { total_sen_dem = class_ii_dem }
	subtract_from_variable = { total_sen_gop = class_ii_gop }
	
	set_variable = { class_ii_dem = 0 }
	set_variable = { class_ii_gop = 0 }
	
	#Liberal GOP Safe
	set_variable = { centre_seats_class_ii = 5 }
	subtract_from_variable = { total_seats = 5 }

	#Dixiecrat Safe
	set_variable = { aut_seats_class_ii = 9 }
	subtract_from_variable = { total_seats = 9 }

	#New Deal Dem
	add_to_variable = { socdem_seats_class_ii = 4 }
	subtract_from_variable = { total_seats = 4 }

	#New Deal Dem
	add_to_variable = { cons_seats_class_ii = 1 }
	subtract_from_variable = { total_seats = 1 }	
	
	#Tossups
	#Tossup
	#Set GOP Nationwide Pop
	set_variable = { gop_pop = 0 } 
	
	set_variable = { cons_pop = party_popularity@conservative } 
	set_variable = { neocon_pop = party_popularity@Liberal_Conservatism } 
	set_variable = { christian_dem_pop = party_popularity@Christian_Democratic } 
	set_variable = { libertarian_pop = party_popularity@liberal } 
	
	add_to_variable = { gop_pop = cons_pop }
	add_to_variable = { gop_pop = neocon_pop }
	add_to_variable = { gop_pop = christian_dem_pop }
	add_to_variable = { gop_pop = libertarian_pop }
	
	#Set DEM Nationwide Pop
	set_variable = { dem_pop = 0 } 
	
	set_variable = { demsoc_pop = party_popularity@socialist } 
	set_variable = { socdem_pop = party_popularity@Social_Democratic } 
	set_variable = { soclib_pop = party_popularity@Social_Liberalism } 
	set_variable = { marlib_pop = party_popularity@democratic } 
	
	add_to_variable = { dem_pop = demsoc_pop }
	add_to_variable = { dem_pop = socdem_pop }
	add_to_variable = { dem_pop = soclib_pop }
	add_to_variable = { dem_pop = marlib_pop }	
	
	#Nationwide Total Ammount
	set_variable = { national_pop = 0 } 
	add_to_variable = { national_pop = dem_pop }
	add_to_variable = { national_pop = gop_pop }
	
	divide_variable = { dem_pop = national_pop }
	divide_variable = { gop_pop = national_pop }
	
	if = {
		limit = {
			check_variable = { total_seats > 0 }
		}		
		class_ii_random = yes
	}	
	
	add_to_variable = { class_ii_gop = cons_seats_class_ii }
	add_to_variable = { class_ii_gop = neocon_seats_class_ii }
	add_to_variable = { class_ii_gop = christian_dem_seats_class_ii } 
	add_to_variable = { class_ii_gop = centre_seats_class_ii }
	add_to_variable = { class_ii_gop = libertarian_seats_class_ii }
	
	add_to_variable = { class_ii_dem = demsoc_seats_class_ii }
	add_to_variable = { class_ii_dem = socdem_seats_class_ii }
	add_to_variable = { class_ii_dem = soclib_seats_class_ii }
	add_to_variable = { class_ii_dem = marlib_seats_class_ii }
	add_to_variable = { class_ii_dem = aut_seats_class_ii }		

	add_to_variable = { total_sen_dem = class_ii_dem }
	add_to_variable = { total_sen_gop = class_ii_gop }
	Congress_GUI_Update = yes
}	
class_3_senate_calc = {

	set_variable = { class_iii_size = 32 }
	set_variable = { total_seats = class_iii_size }
	set_variable = { cons_seats_class_iii = 0 }
	set_variable = { neocon_seats_class_iii = 0 }
	set_variable = { christian_dem_seats_class_iii = 0 }
	set_variable = { centre_seats_class_iii = 0 }
	set_variable = { libertarian_seats_class_iii = 0 }
	set_variable = { demsoc_seats_class_iii = 0 }
	set_variable = { socdem_seats_class_iii = 0 }
	set_variable = { soclib_seats_class_iii = 0 }
	set_variable = { marlib_seats_class_iii = 0 }
	set_variable = { aut_seats_class_iii = 0 }
	if = {
		limit = {
			has_country_flag = ak_hi_state
		}
		add_to_variable = { class_iii_size = 2 }
	}
	
	subtract_from_variable = { total_sen_dem = class_iii_dem }
	subtract_from_variable = { total_sen_gop = class_iii_gop }
	
	set_variable = { class_iii_dem = 0 }
	set_variable = { class_iii_gop = 0 }
	
	#Liberal GOP Safe
	set_variable = { centre_seats_class_iii = 4 }
	subtract_from_variable = { total_seats = 4 }
	
	#Dixiecrat Safe
	set_variable = { aut_seats_class_iii = 6 }
	subtract_from_variable = { total_seats = 6 }
	
	#Neocon
	add_to_variable = { neocon_seats_class_iii = 4 }
	subtract_from_variable = { total_seats = 4 }

	#Set GOP Nationwide Pop
	set_variable = { gop_pop = 0 } 
	
	set_variable = { cons_pop = party_popularity@conservative } 
	multiply_variable = { cons_pop = 100 }
	set_variable = { neocon_pop = party_popularity@Liberal_Conservatism } 
	multiply_variable = { neocon_pop = 100 }
	set_variable = { christian_dem_pop = party_popularity@Christian_Democratic } 
	multiply_variable = { christian_dem_pop = 100 }
	set_variable = { libertarian_pop = party_popularity@liberal } 
	multiply_variable = { libertarian_pop = 100 }
	
	add_to_variable = { gop_pop = cons_pop }
	add_to_variable = { gop_pop = neocon_pop }
	add_to_variable = { gop_pop = christian_dem_pop }
	add_to_variable = { gop_pop = libertarian_pop }
	
	#Set DEM Nationwide Pop
	set_variable = { dem_pop = 0 } 
	
	set_variable = { demsoc_pop = party_popularity@socialist } 
	multiply_variable = { demsoc_pop = 100 }
	set_variable = { socdem_pop = party_popularity@Social_Democratic } 
	multiply_variable = { socdem_pop = 100 }
	set_variable = { soclib_pop = party_popularity@Social_Liberalism } 
	multiply_variable = { soclib_pop = 100 }
	set_variable = { marlib_pop = party_popularity@democratic } 
	multiply_variable = { marlib_pop = 100 }
	
	add_to_variable = { dem_pop = demsoc_pop }
	add_to_variable = { dem_pop = socdem_pop }
	add_to_variable = { dem_pop = soclib_pop }
	add_to_variable = { dem_pop = marlib_pop }	
	
	#Nationwide Total Ammount
	set_variable = { national_pop = 0 } 
	add_to_variable = { national_pop = dem_pop }
	add_to_variable = { national_pop = gop_pop }
	
	divide_variable = { dem_pop = national_pop }
	divide_variable = { gop_pop = national_pop }
	if = {
		limit = {
			check_variable = { total_seats > 0 }
		}		
		class_iii_random = yes
	}	
	
	add_to_variable = { class_iii_gop = cons_seats_class_iii }
	add_to_variable = { class_iii_gop = neocon_seats_class_iii }
	add_to_variable = { class_iii_gop = christian_dem_seats_class_iii } 
	add_to_variable = { class_iii_gop = centre_seats_class_iii }
	add_to_variable = { class_iii_gop = libertarian_seats_class_iii }
	
	add_to_variable = { class_iii_dem = demsoc_seats_class_iii }
	add_to_variable = { class_iii_dem = socdem_seats_class_iii }
	add_to_variable = { class_iii_dem = soclib_seats_class_iii }
	add_to_variable = { class_iii_dem = marlib_seats_class_iii }
	add_to_variable = { class_iii_dem = aut_seats_class_iii }		

	add_to_variable = { total_sen_dem = class_iii_dem }
	add_to_variable = { total_sen_gop = class_iii_gop }	
	Congress_GUI_Update = yes
}


#Upper House
set_parliament_upper_graphics = {


	divide_variable = { communism_seats_parliament_upper = 2 }
	divide_variable = { socialist_seats_parliament_upper = 2 }
	divide_variable = { Social_Democratic_seats_parliament_upper = 2 }
	divide_variable = { democratic_seats_parliament_upper = 2 }
	divide_variable = { Social_Liberalism_seats_parliament_upper = 2 }
	divide_variable = { Liberal_Conservatism_seats_parliament_upper = 2 }
	divide_variable = { conservative_seats_parliament_upper = 2 }
	divide_variable = { islamism_seats_parliament_upper = 2 }
	divide_variable = { monarchism_seats_parliament_upper = 2 }
	divide_variable = { neutrality_seats_parliament_upper = 2 }
	divide_variable = { nationalism_seats_parliament_upper = 2 }
	divide_variable = { fascism_seats_parliament_upper = 2 }
	
	divide_variable = { Christian_Democratic_seats_parliament_upper = 2 }
	divide_variable = { centrist_seats_parliament_upper = 2 }
	divide_variable = { liberal_seats_parliament_upper = 2 }
	divide_variable = { trotskyism_seats_parliament_upper = 2 }
	divide_variable = { maoism_seats_parliament_upper = 2 }
	divide_variable = { radical_shiaism_seats_parliament_upper = 2 }
	divide_variable = { Salafism_seats_parliament_upper = 2 }
	
	clear_array = ideology_seats_array2
	
## Step 5: Assign seats

	add_to_array = { ideology_seats_array2 = 0 } # Placeholder, I need the frames to be 1-12 and not 0-11
	
	add_to_array = { ideology_seats_array2 = maoism_seats_parliament_upper }
	add_to_array = { ideology_seats_array2 = communism_seats_parliament_upper }
	add_to_array = { ideology_seats_array2 = trotskyism_seats_parliament_upper }
	add_to_array = { ideology_seats_array2 = socialist_seats_parliament_upper }
	add_to_array = { ideology_seats_array2 = Social_Democratic_seats_parliament_upper }
	add_to_array = { ideology_seats_array2 = democratic_seats_parliament_upper }
	add_to_array = { ideology_seats_array2 = Social_Liberalism_seats_parliament_upper }
	add_to_array = { ideology_seats_array2 = centrist_seats_parliament_upper }
	add_to_array = { ideology_seats_array2 = liberal_seats_parliament_upper }
	add_to_array = { ideology_seats_array2 = Christian_Democratic_seats_parliament_upper }
	add_to_array = { ideology_seats_array2 = Liberal_Conservatism_seats_parliament_upper }
	add_to_array = { ideology_seats_array2 = conservative_seats_parliament_upper }
	add_to_array = { ideology_seats_array2 = nationalism_seats_parliament_upper }
	add_to_array = { ideology_seats_array2 = islamism_seats_parliament_upper }
	add_to_array = { ideology_seats_array2 = neutrality_seats_parliament_upper }
	add_to_array = { ideology_seats_array2 = monarchism_seats_parliament_upper }
	add_to_array = { ideology_seats_array2 = fascism_seats_parliament_upper }
	add_to_array = { ideology_seats_array2 = radical_shiaism_seats_parliament_upper }
	add_to_array = { ideology_seats_array2 = Salafism_seats_parliament_upper }
	
	clear_array = ideology_seats_naming_array2
	clear_array = ideology_id_array2
	clear_array = upper_parliament_array
		
	add_to_array = { ideology_seats_naming_array2 = maoism_seats_parliament_upper }
	add_to_array = { ideology_seats_naming_array2 = communism_seats_parliament_upper }
	add_to_array = { ideology_seats_naming_array2 = trotskyism_seats_parliament_upper }
	add_to_array = { ideology_seats_naming_array2 = socialist_seats_parliament_upper }
	add_to_array = { ideology_seats_naming_array2 = Social_Democratic_seats_parliament_upper }
	add_to_array = { ideology_seats_naming_array2 = democratic_seats_parliament_upper }
	add_to_array = { ideology_seats_naming_array2 = Social_Liberalism_seats_parliament_upper }
	add_to_array = { ideology_seats_naming_array2 = centrist_seats_parliament_upper }
	add_to_array = { ideology_seats_naming_array2 = liberal_seats_parliament_upper }
	
	add_to_array = { ideology_seats_naming_array2 = Christian_Democratic_seats_parliament_upper }
	add_to_array = { ideology_seats_naming_array2 = Liberal_Conservatism_seats_parliament_upper }
	add_to_array = { ideology_seats_naming_array2 = conservative_seats_parliament_upper }
	add_to_array = { ideology_seats_naming_array2 = nationalism_seats_parliament_upper }
	add_to_array = { ideology_seats_naming_array2 = islamism_seats_parliament_upper }
	add_to_array = { ideology_seats_naming_array2 = neutrality_seats_parliament_upper }
	add_to_array = { ideology_seats_naming_array2 = monarchism_seats_parliament_upper }
	add_to_array = { ideology_seats_naming_array2 = fascism_seats_parliament_upper }
	add_to_array = { ideology_seats_naming_array2 = radical_shiaism_seats_parliament_upper }
	add_to_array = { ideology_seats_naming_array2 = Salafism_seats_parliament_upper }

	
	set_variable = { maoism_id = 1 }
	set_variable = { communism_id = 2 }
	set_variable = { trotskyism_id = 3 }
	set_variable = { socialist_id = 4 }
	set_variable = { Social_Democratic_id = 5 }
	set_variable = { democratic_id = 6 }
	set_variable = { Social_Liberalism_id = 7 }
	set_variable = { centrist_id = 8 }
	set_variable = { liberal_id = 9 }
	set_variable = { Christian_Democratic_id = 10 }
	set_variable = { Liberal_Conservatism_id = 11 }
	set_variable = { conservative_id = 12 }
	set_variable = { nationalism_id = 13 }
	set_variable = { islamism_id = 14 }
	set_variable = { neutrality_id = 15}
	set_variable = { monarchism_id = 16 }
	set_variable = { fascism_id = 17 }
	set_variable = { radical_shiaism_id = 18 }
	set_variable = { Salafism_id = 19 }
	
	add_to_array = { ideology_id_array2 = maoism_id }
	add_to_array = { ideology_id_array2 = communism_id }
	add_to_array = { ideology_id_array2 = trotskyism_id }
	add_to_array = { ideology_id_array2 = socialist_id }
	add_to_array = { ideology_id_array2 = Social_Democratic_id }
	add_to_array = { ideology_id_array2 = democratic_id }
	add_to_array = { ideology_id_array2 = Social_Liberalism_id }
	add_to_array = { ideology_id_array2 = centrist_id }
	add_to_array = { ideology_id_array2 = liberal_id }
	add_to_array = { ideology_id_array2 = Christian_Democratic_id }
	add_to_array = { ideology_id_array2 = Liberal_Conservatism_id }
	add_to_array = { ideology_id_array2 = conservative_id }
	add_to_array = { ideology_id_array2 = nationalism_id }
	add_to_array = { ideology_id_array2 = islamism_id }
	add_to_array = { ideology_id_array2 = neutrality_id }
	add_to_array = { ideology_id_array2 = monarchism_id }
	add_to_array = { ideology_id_array2 = fascism_id }
	add_to_array = { ideology_id_array2 = radical_shiaism_id }
	add_to_array = { ideology_id_array2 = Salafism_id }
		
	sort_party_sizes2 = yes

	for_each_loop = {
		array = ideology_seats_array2
		if = {
			limit = {
				check_variable = { v > 49 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 48 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 47 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 46 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 45 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 44 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 43 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 42 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 41 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 40 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 39 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 38 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 37 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 36 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 35 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 34 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 33 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 32 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 31 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 30 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 29 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 28 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 27 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 26 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 25 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 24 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 23 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 22 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 21 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 20 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 19 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 18 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 17 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 16 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 15 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 14 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 13 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 12 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 11 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 10 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 9 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 8 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 7 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 6 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 5 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 4 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 3 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 2 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 1 }
			}
			add_to_array = { upper_parliament_array = i }
		}
		if = {
			limit = {
				check_variable = { v > 0 }
			}
			add_to_array = { upper_parliament_array = i }
		}
	}
}
sort_party_sizes2 = {
	set_temp_variable = { length_temp = ideology_seats_naming_array2^num }
	   for_loop_effect = {
		start = 0
		end = length_temp
		add = 1
		value = v
		break = b
		
		
		find_highest_in_array = {
			array = ideology_seats_naming_array2
			value = v
			index = ii
		}
		remove_from_array = {
			array = ideology_seats_naming_array2
			index = ii
		}
		add_to_temp_array = { 
			array = ideology_seats_naming_array_temp2
			value = v
		}
		set_temp_variable = { ideology_id_array_temp_var2 = ideology_id_array2^ii }
		remove_from_array = {
			array = ideology_id_array2
			index = ii
		}
		add_to_temp_array = { 
			array = ideology_id_array_temp2
			value = ideology_id_array_temp_var2  
		}
	}
	for_loop_effect = {
		start = 0
		end = length_temp
		add = 1
		value = v
		break = b
		
		add_to_array = { 
			array = ideology_seats_naming_array2
			value = ideology_seats_naming_array_temp2^v
		}
		add_to_array = { 
			array = ideology_id_array2
			value = ideology_id_array_temp2^v 
		}
	}
}
upper_house_election = {
	set_variable = { total_seats = 100 }
	set_variable = { communism_seats_parliament_upper = 0 }
	set_variable = { socialist_seats_parliament_upper = 0 }
	set_variable = { Social_Democratic_seats_parliament_upper = 0 }
	set_variable = { democratic_seats_parliament_upper = 0 }
	set_variable = { Social_Liberalism_seats_parliament_upper = 0 }
	set_variable = { Liberal_Conservatism_seats_parliament_upper = 0 }
	set_variable = { conservative_seats_parliament_upper = 0 }
	set_variable = { islamism_seats_parliament_upper = 0 }
	set_variable = { monarchism_seats_parliament_upper = 0 }
	set_variable = { neutrality_seats_parliament_upper = 0 }
	set_variable = { nationalism_seats_parliament_upper = 0 }
	set_variable = { fascism_seats_parliament_upper = 0 }
	set_variable = { Christian_Democratic_seats_parliament_upper = 0 }
	set_variable = { centrist_seats_parliament_upper = 0 }
	set_variable = { liberal_seats_parliament_upper = 0 }
	set_variable = { trotskyism_seats_parliament_upper = 0 }
	set_variable = { maoism_seats_parliament_upper = 0 }
	set_variable = { radical_shiaism_seats_parliament_upper = 0 }
	set_variable = { Salafism_seats_parliament_upper = 0 }		
	
	parliament_rng = yes

	set_variable = { communism_seats_parliament3 = communism_seats_parliament_upper }
	set_variable = { socialist_seats_parliament3 = socialist_seats_parliament_upper }
	set_variable = { Social_Democratic_seats_parliament3 = Social_Democratic_seats_parliament_upper }
	set_variable = { democratic_seats_parliament3 = democratic_seats_parliament_upper }
	set_variable = { Social_Liberalism_seats_parliament3 = Social_Liberalism_seats_parliament_upper }
	set_variable = { Liberal_Conservatism_seats_parliament3 = Liberal_Conservatism_seats_parliament_upper }
	set_variable = { conservative_seats_parliament3 = conservative_seats_parliament_upper }
	set_variable = { islamism_seats_parliament3 = islamism_seats_parliament_upper }
	set_variable = { monarchism_seats_parliament3 = monarchism_seats_parliament_upper }
	set_variable = { neutrality_seats_parliament3 = neutrality_seats_parliament_upper }
	set_variable = { nationalism_seats_parliament3 = nationalism_seats_parliament_upper }
	set_variable = { fascism_seats_parliament3 = fascism_seats_parliament_upper }
	set_variable = { Christian_Democratic_seats_parliament3 = Christian_Democratic_seats_parliament_upper }
	set_variable = { centrist_seats_parliament3 = centrist_seats_parliament_upper }
	set_variable = { liberal_seats_parliament3 = liberal_seats_parliament_upper }
	set_variable = { trotskyism_seats_parliament3 = trotskyism_seats_parliament_upper }
	set_variable = { maoism_seats_parliament3 = maoism_seats_parliament_upper }
	set_variable = { radical_shiaism_seats_parliament3 = radical_shiaism_seats_parliament_upper }
	set_variable = { Salafism_seats_parliament3 = Salafism_seats_parliament_upper }	
	
	set_parliament_upper_graphics = yes
}


parliament_rng = {
	
	if = { 
		limit = {
			check_variable = { total_seats > 0 }
		}
		if = { 
			limit = {
				check_variable = { total_seats > 0 }
				 conservative > 0.005
			}
			set_temp_variable = { conservative_support = party_popularity@conservative }
			set_variable = { senate_random = random }
			if = { 
				limit = { 
					check_variable = { senate_random < conservative_support }
				}
				add_to_variable = { conservative_seats_parliament_upper = 1 }
				subtract_from_variable = { total_seats = 1 }
			}
		}
	}
	
	if = { 
		limit = {
			check_variable = { total_seats > 0 }
			Liberal_Conservatism > 0.005
		}
		if = { 
			limit = {
				check_variable = { total_seats > 0 }
			}
			set_temp_variable = { Liberal_Conservatism_support = party_popularity@Liberal_Conservatism }
			set_variable = { senate_random = random }
			if = { 
				limit = { 
					check_variable = { senate_random < Liberal_Conservatism_support }
				}
				add_to_variable = { Liberal_Conservatism_seats_parliament_upper = 1 }
				subtract_from_variable = { total_seats = 1 }
			}
		}
	}
	
	if = { 
		limit = {
			check_variable = { total_seats > 0 }
			Christian_Democratic > 0.005
		}
		if = { 
			limit = {
				check_variable = { total_seats > 0 }
			}
			set_temp_variable = { Christian_Democratic_support = party_popularity@Christian_Democratic }
			set_variable = { senate_random = random }
			if = { 
				limit = { 
					check_variable = { senate_random < Christian_Democratic_support }
				}
				add_to_variable = { Christian_Democratic_seats_parliament_upper = 1 }
				subtract_from_variable = { total_seats = 1 }
			}
		}
	}
	
	if = { 
		limit = {
			check_variable = { total_seats > 0 }
			socialist > 0.005
		}
		if = { 
			limit = {
				check_variable = { total_seats > 0 }
			}
			set_temp_variable = { socialist_support = party_popularity@socialist }
			set_variable = { senate_random = random }
			if = { 
				limit = { 
					check_variable = { senate_random < socialist_support }
				}
				add_to_variable = { socialist_seats_parliament_upper = 1 }
				subtract_from_variable = { total_seats = 1 }
			}
		}
	}
	
	if = { 
		limit = {
			check_variable = { total_seats > 0 }
			Social_Democratic > 0.005
		}
		if = { 
			limit = {
				check_variable = { total_seats > 0 }
			}
			set_temp_variable = { Social_Democratic_support = party_popularity@Social_Democratic }
			set_variable = { senate_random = random }
			if = { 
				limit = { 
					check_variable = { senate_random < Social_Democratic_support }
				}
				add_to_variable = { Social_Democratic_seats_parliament_upper = 1 }
				subtract_from_variable = { total_seats = 1 }
			}
		}
	}
	
	if = { 
		limit = {
			check_variable = { total_seats > 0 }
			Social_Liberalism > 0.005
		}
		if = { 
			limit = {
				check_variable = { total_seats > 0 }
			}
			set_temp_variable = { Social_Liberalism_support = party_popularity@Social_Liberalism }
			set_variable = { senate_random = random }
			if = { 
				limit = { 
					check_variable = { senate_random < Social_Liberalism_support }
				}
				add_to_variable = { Social_Liberalism_seats_parliament_upper = 1 }
				subtract_from_variable = { total_seats = 1 }
			}
		}
	}
	
	if = { 
		limit = {
			check_variable = { total_seats > 0 }
			democratic > 0.005
		}
		if = { 
			limit = {
				check_variable = { total_seats > 0 }
			}
			set_temp_variable = { democratic_support = party_popularity@democratic }
			set_variable = { senate_random = random }
			if = { 
				limit = { 
					check_variable = { senate_random < democratic_support }
				}
				add_to_variable = { democratic_seats_parliament_upper = 1 }
				subtract_from_variable = { total_seats = 1 }
			}
		}
	}
	
	if = { 
		limit = {
			check_variable = { total_seats > 0 }
			centrist > 0.005
		}
		if = { 
			limit = {
				check_variable = { total_seats > 0 }
			}
			set_temp_variable = { centrist_support = party_popularity@centrist }
			set_variable = { senate_random = random }
			if = { 
				limit = { 
					check_variable = { senate_random < centrist_support }
				}
				add_to_variable = { centrist_seats_parliament_upper = 1 }
				subtract_from_variable = { total_seats = 1 }
			}
		}
	}
	
	if = { 
		limit = {
			check_variable = { total_seats > 0 }
			liberal > 0.005
		}
		if = { 
			limit = {
				check_variable = { total_seats > 0 }
			}
			set_temp_variable = { liberal_support = party_popularity@liberal }
			set_variable = { senate_random = random }
			if = { 
				limit = { 
					check_variable = { senate_random < liberal_support }
				}
				add_to_variable = { liberal_seats_parliament_upper = 1 }
				subtract_from_variable = { total_seats = 1 }
			}
		}
	}
	
	if = { 
		limit = {
			check_variable = { total_seats > 0 }
			 trotskyism > 0.005
		}
		if = { 
			limit = {
				check_variable = { total_seats > 0 }
			}
			set_temp_variable = { trotskyism_support = party_popularity@trotskyism }
			set_variable = { senate_random = random }
			if = { 
				limit = { 
					check_variable = { senate_random < trotskyism_support }
				}
				add_to_variable = { trotskyism_seats_parliament_upper = 1 }
				subtract_from_variable = { total_seats = 1 }
			}
		}
	}
	
	if = { 
		limit = {
			check_variable = { total_seats > 0 }
			maoism > 0.005
		}
		if = { 
			limit = {
				check_variable = { total_seats > 0 }
			}
			set_temp_variable = { maoism_support = party_popularity@maoism }
			set_variable = { senate_random = random }
			if = { 
				limit = { 
					check_variable = { senate_random < maoism_support }
				}
				add_to_variable = { maoism_seats_parliament_upper = 1 }
				subtract_from_variable = { total_seats = 1 }
			}
		}
	}
	
	if = { 
		limit = {
			check_variable = { total_seats > 0 }
			fascism > 0.005
		}
		if = { 
			limit = {
				check_variable = { total_seats > 0 }
			}
			set_temp_variable = { fascism_support = party_popularity@fascism }
			set_variable = { senate_random = random }
			if = { 
				limit = { 
					check_variable = { senate_random < fascism_support }
				}
				add_to_variable = { fascism_seats_parliament_upper = 1 }
				subtract_from_variable = { total_seats = 1 }
			}
		}
	}
	
	if = { 
		limit = {
			check_variable = { total_seats > 0 }
			nationalist > 0.005
		}
		if = { 
			limit = {
				check_variable = { total_seats > 0 }
			}
			set_temp_variable = { nationalism_support = party_popularity@nationalist }
			set_variable = { senate_random = random }
			if = { 
				limit = { 
					check_variable = { senate_random < nationalism_support }
				}
				add_to_variable = { nationalism_seats_parliament_upper = 1 }
				subtract_from_variable = { total_seats = 1 }
			}
		}
	}
	
	if = { 
		limit = {
			check_variable = { total_seats > 0 }
			monarchism > 0.005
		}
		if = { 
			limit = {
				check_variable = { total_seats > 0 }
			}
			set_temp_variable = { monarchism_support = party_popularity@monarchism }
			set_variable = { senate_random = random }
			if = { 
				limit = { 
					check_variable = { senate_random < monarchism_support }
				}
				add_to_variable = { monarchism_seats_parliament_upper = 1 }
				subtract_from_variable = { total_seats = 1 }
			}
		}
	}
	
	if = { 
		limit = {
			check_variable = { total_seats > 0 }
			neutrality > 0.005
		}
		if = { 
			limit = {
				check_variable = { total_seats > 0 }
			}
			set_temp_variable = { neutrality_support = party_popularity@neutrality }
			set_variable = { senate_random = random }
			if = { 
				limit = { 
					check_variable = { senate_random < neutrality_support }
				}
				add_to_variable = { neutrality_seats_parliament_upper = 1 }
				subtract_from_variable = { total_seats = 1 }
			}
		}
	}
	
	if = { 
		limit = {
			check_variable = { total_seats > 0 }
			islamism > 0.005
		}
		if = { 
			limit = {
				check_variable = { total_seats > 0 }
			}
			set_temp_variable = { islamism_support = party_popularity@islamism }
			set_variable = { senate_random = random }
			if = { 
				limit = { 
					check_variable = { senate_random < islamism_support }
				}
				add_to_variable = { islamism_seats_parliament_upper = 1 }
				subtract_from_variable = { total_seats = 1 }
			}
		}
	}
	
	if = { 
		limit = {
			check_variable = { total_seats > 0 }
			radical_shiaism > 0.005
		}
		if = { 
			limit = {
				check_variable = { total_seats > 0 }
			}
			set_temp_variable = { radical_shiaism_support = party_popularity@radical_shiaism }
			set_variable = { senate_random = random }
			if = { 
				limit = { 
					check_variable = { senate_random < radical_shiaism_support }
				}
				add_to_variable = { radical_shiaism_seats_parliament_upper = 1 }
				subtract_from_variable = { total_seats = 1 }
			}
		}
	}
	
	if = { 
		limit = {
			check_variable = { total_seats > 0 }
			Salafism > 0.005
		}
		if = { 
			limit = {
				check_variable = { total_seats > 0 }
			}
			set_temp_variable = { Salafism_support = party_popularity@Salafism }
			set_variable = { senate_random = random }
			if = { 
				limit = { 
					check_variable = { senate_random < Salafism_support }
				}
				add_to_variable = { Salafism_seats_parliament_upper = 1 }
				subtract_from_variable = { total_seats = 1 }
			}
		}
	}
	
	if = { 
		limit = {
			check_variable = { total_seats > 0 }
			communism > 0.005
		}
		if = { 
			limit = {
				check_variable = { total_seats > 0 }
			}
			set_temp_variable = { communism_support = party_popularity@communism }
			set_variable = { senate_random = random }
			if = { 
				limit = { 
					check_variable = { senate_random < communism_support }
				}
				add_to_variable = { communism_seats_parliament_upper = 1 }
				subtract_from_variable = { total_seats = 1 }
			}
		}
	}
	if = {
		limit = {
			check_variable = { total_seats > 0 }
		}		
		parliament_rng = yes
	}
}
basic_parliament_setup = {
	set_country_flag = parliament_enabled
	set_variable = { communism_seats_parliament = party_popularity@communism }
	set_variable = { socialist_seats_parliament = party_popularity@socialist }
	set_variable = { Social_Democratic_seats_parliament = party_popularity@Social_Democratic }
	set_variable = { democratic_seats_parliament = party_popularity@democratic }
	set_variable = { Social_Liberalism_seats_parliament = party_popularity@Social_Liberalism }
	set_variable = { Liberal_Conservatism_seats_parliament = party_popularity@Liberal_Conservatism }
	set_variable = { conservative_seats_parliament = party_popularity@conservative }
	set_variable = { islamism_seats_parliament = party_popularity@islamism }
	set_variable = { monarchism_seats_parliament = party_popularity@monarchism }
	set_variable = { neutrality_seats_parliament = party_popularity@neutrality }
	set_variable = { nationalism_seats_parliament = party_popularity@nationalist }
	set_variable = { fascism_seats_parliament = party_popularity@fascism }
	set_variable = { Christian_Democratic_seats_parliament = party_popularity@Christian_Democratic }
	set_variable = { centrist_seats_parliament = party_popularity@centrist }
	set_variable = { liberal_seats_parliament = party_popularity@liberal }
	set_variable = { trotskyism_seats_parliament = party_popularity@trotskyism }
	set_variable = { maoism_seats_parliament = party_popularity@maoism }
	set_variable = { radical_shiaism_seats_parliament = party_popularity@radical_shiaism }
	set_variable = { Salafism_seats_parliament = party_popularity@Salafism }	
	
	multiply_variable = { communism_seats_parliament = 100 }
	multiply_variable = { socialist_seats_parliament = 100 }
	multiply_variable = { Social_Democratic_seats_parliament = 100 }
	multiply_variable = { democratic_seats_parliament = 100 }
	multiply_variable = { Social_Liberalism_seats_parliament = 100 }
	multiply_variable = { Liberal_Conservatism_seats_parliament = 100 }
	multiply_variable = { conservative_seats_parliament = 100 }
	multiply_variable = { islamism_seats_parliament = 100 }
	multiply_variable = { monarchism_seats_parliament = 100 }
	multiply_variable = { neutrality_seats_parliament = 100 }
	multiply_variable = { nationalism_seats_parliament = 100 }
	multiply_variable = { fascism_seats_parliament = 100 }
	multiply_variable = { Christian_Democratic_seats_parliament = 100 }
	multiply_variable = { centrist_seats_parliament = 100 }
	multiply_variable = { liberal_seats_parliament = 100 }
	multiply_variable = { trotskyism_seats_parliament = 100 }
	multiply_variable = { maoism_seats_parliament = 100 }
	multiply_variable = { radical_shiaism_seats_parliament = 100 }
	multiply_variable = { Salafism_seats_parliament = 100 }	
	
	
	set_variable = { communism_seats_parliament2 = communism_seats_parliament }
	set_variable = { socialist_seats_parliament2 = socialist_seats_parliament }
	set_variable = { Social_Democratic_seats_parliament2 = Social_Democratic_seats_parliament }
	set_variable = { democratic_seats_parliament2 = democratic_seats_parliament }
	set_variable = { Social_Liberalism_seats_parliament2 = Social_Liberalism_seats_parliament }
	set_variable = { Liberal_Conservatism_seats_parliament2 = Liberal_Conservatism_seats_parliament }
	set_variable = { conservative_seats_parliament2 = conservative_seats_parliament }
	set_variable = { islamism_seats_parliament2 = islamism_seats_parliament }
	set_variable = { monarchism_seats_parliament2 = monarchism_seats_parliament }
	set_variable = { neutrality_seats_parliament2 = neutrality_seats_parliament }
	set_variable = { nationalism_seats_parliament2 = nationalism_seats_parliament }
	set_variable = { fascism_seats_parliament2 = fascism_seats_parliament }
	set_variable = { Christian_Democratic_seats_parliament2 = Christian_Democratic_seats_parliament }
	set_variable = { centrist_seats_parliament2 = centrist_seats_parliament }
	set_variable = { liberal_seats_parliament2 = liberal_seats_parliament }
	set_variable = { trotskyism_seats_parliament2 = trotskyism_seats_parliament }
	set_variable = { maoism_seats_parliament2 = maoism_seats_parliament }
	set_variable = { radical_shiaism_seats_parliament2 = radical_shiaism_seats_parliament }
	set_variable = { Salafism_seats_parliament2 = Salafism_seats_parliament }	
	
	set_parliament_graphics = yes		

	set_variable = {
		ROOT.GroupGFX = party_popularity@ruling_party
	}
	multiply_variable = { ROOT.GroupGFX = 100 }
	
	divide_variable = { ROOT.GroupGFX = 100 }
	multiply_variable = { ROOT.GroupGFX = 230 }
	set_variable = {
		ROOT.Coalition = party_popularity@ruling_party
	}
	multiply_variable = { ROOT.Coalition = 100 }
	set_variable = {
		ROOT.Opposition = 100
	}
	subtract_from_variable = {
		ROOT.Opposition = ROOT.Coalition
	}

	#Upper House
	set_variable = { communism_seats_parliament_upper = party_popularity@communism }
	set_variable = { socialist_seats_parliament_upper = party_popularity@socialist }
	set_variable = { Social_Democratic_seats_parliament_upper = party_popularity@Social_Democratic }
	set_variable = { democratic_seats_parliament_upper = party_popularity@democratic }
	set_variable = { Social_Liberalism_seats_parliament_upper = party_popularity@Social_Liberalism }
	set_variable = { Liberal_Conservatism_seats_parliament_upper = party_popularity@Liberal_Conservatism }
	set_variable = { conservative_seats_parliament_upper = party_popularity@conservative }
	set_variable = { islamism_seats_parliament_upper = party_popularity@islamism }
	set_variable = { monarchism_seats_parliament_upper = party_popularity@monarchism }
	set_variable = { neutrality_seats_parliament_upper = party_popularity@neutrality }
	set_variable = { nationalism_seats_parliament_upper = party_popularity@nationalist }
	set_variable = { fascism_seats_parliament_upper = party_popularity@fascism }
	set_variable = { Christian_Democratic_seats_parliament_upper = party_popularity@Christian_Democratic }
	set_variable = { centrist_seats_parliament_upper = party_popularity@centrist }
	set_variable = { liberal_seats_parliament_upper = party_popularity@liberal }
	set_variable = { trotskyism_seats_parliament_upper = party_popularity@trotskyism }
	set_variable = { maoism_seats_parliament_upper = party_popularity@maoism }
	set_variable = { radical_shiaism_seats_parliament_upper = party_popularity@radical_shiaism }
	set_variable = { Salafism_seats_parliament_upper = party_popularity@Salafism }	
	
	multiply_variable = { communism_seats_parliament_upper = 100 }
	multiply_variable = { socialist_seats_parliament_upper = 100 }
	multiply_variable = { Social_Democratic_seats_parliament_upper = 100 }
	multiply_variable = { democratic_seats_parliament_upper = 100 }
	multiply_variable = { Social_Liberalism_seats_parliament_upper = 100 }
	multiply_variable = { Liberal_Conservatism_seats_parliament_upper = 100 }
	multiply_variable = { conservative_seats_parliament_upper = 100 }
	multiply_variable = { islamism_seats_parliament_upper = 100 }
	multiply_variable = { monarchism_seats_parliament_upper = 100 }
	multiply_variable = { neutrality_seats_parliament_upper = 100 }
	multiply_variable = { nationalism_seats_parliament_upper = 100 }
	multiply_variable = { fascism_seats_parliament_upper = 100 }
	multiply_variable = { Christian_Democratic_seats_parliament_upper = 100 }
	multiply_variable = { centrist_seats_parliament_upper = 100 }
	multiply_variable = { liberal_seats_parliament_upper = 100 }
	multiply_variable = { trotskyism_seats_parliament_upper = 100 }
	multiply_variable = { maoism_seats_parliament_upper = 100 }
	multiply_variable = { radical_shiaism_seats_parliament_upper = 100 }
	multiply_variable = { Salafism_seats_parliament_upper = 100 }	

	
	set_variable = { communism_seats_parliament3 = communism_seats_parliament_upper }
	set_variable = { socialist_seats_parliament3 = socialist_seats_parliament_upper }
	set_variable = { Social_Democratic_seats_parliament3 = Social_Democratic_seats_parliament_upper }
	set_variable = { democratic_seats_parliament3 = democratic_seats_parliament_upper }
	set_variable = { Social_Liberalism_seats_parliament3 = Social_Liberalism_seats_parliament_upper }
	set_variable = { Liberal_Conservatism_seats_parliament3 = Liberal_Conservatism_seats_parliament_upper }
	set_variable = { conservative_seats_parliament3 = conservative_seats_parliament_upper }
	set_variable = { islamism_seats_parliament3 = islamism_seats_parliament_upper }
	set_variable = { monarchism_seats_parliament3 = monarchism_seats_parliament_upper }
	set_variable = { neutrality_seats_parliament3 = neutrality_seats_parliament_upper }
	set_variable = { nationalism_seats_parliament3 = nationalism_seats_parliament_upper }
	set_variable = { fascism_seats_parliament3 = fascism_seats_parliament_upper }
	set_variable = { Christian_Democratic_seats_parliament3 = Christian_Democratic_seats_parliament_upper }
	set_variable = { centrist_seats_parliament3 = centrist_seats_parliament_upper }
	set_variable = { liberal_seats_parliament3 = liberal_seats_parliament_upper }
	set_variable = { trotskyism_seats_parliament3 = trotskyism_seats_parliament_upper }
	set_variable = { maoism_seats_parliament3 = maoism_seats_parliament_upper }
	set_variable = { radical_shiaism_seats_parliament3 = radical_shiaism_seats_parliament_upper }
	set_variable = { Salafism_seats_parliament3 = Salafism_seats_parliament_upper }	
	
	set_parliament_upper_graphics = yes
}
