
PRC_50s_spend_money_tt = {
    subtract_from_variable = {
        currentMoney = temp_x
    }
    custom_effect_tooltip = PRC_50s_spend_money_tt
}

PRC_50s_gain_money_tt = {
    add_to_variable = {
        currentMoney = temp_x
    }
    custom_effect_tooltip = PRC_50s_gain_money_tt
}

#######################
#                     #
#     ideas swap      #
#                     #
#######################

PRC_50s_Economic_ruin_caused_by_war_ideas_swap = {
    else_if = {
        limit = { has_idea = PRC_50s_Economic_ruin_caused_by_war_1 }
        swap_ideas = { remove_idea = PRC_50s_Economic_ruin_caused_by_war_1 add_idea = PRC_50s_Economic_ruin_caused_by_war_2 }
    }
    else_if = {
        limit = { has_idea = PRC_50s_Economic_ruin_caused_by_war_2 }
        swap_ideas = { remove_idea = PRC_50s_Economic_ruin_caused_by_war_2 add_idea = PRC_50s_Economic_ruin_caused_by_war_3 }
    }
    else_if = {
        limit = { has_idea = PRC_50s_Economic_ruin_caused_by_war_3 }
        swap_ideas = { remove_idea = PRC_50s_Economic_ruin_caused_by_war_3 add_idea = PRC_50s_Economic_ruin_caused_by_war_4 }
    }
    else_if = {
        limit = { has_idea = PRC_50s_Economic_ruin_caused_by_war_4 }
        swap_ideas = { remove_idea = PRC_50s_Economic_ruin_caused_by_war_4 add_idea = PRC_50s_Economic_ruin_caused_by_war_5 }
    }
    else_if = {
        limit = { has_idea = PRC_50s_Economic_ruin_caused_by_war_5 }
        swap_ideas = { remove_idea = PRC_50s_Economic_ruin_caused_by_war_5 add_idea = PRC_50s_Economic_ruin_caused_by_war_6 }
    }
    else_if = {
        limit = { has_idea = PRC_50s_Economic_ruin_caused_by_war_6 }
        swap_ideas = { remove_idea = PRC_50s_Economic_ruin_caused_by_war_6 add_idea = PRC_50s_Economic_ruin_caused_by_war_7 }
    }
    else_if = {
        limit = { has_idea = PRC_50s_Economic_ruin_caused_by_war_7 }
        remove_ideas = PRC_50s_Economic_ruin_caused_by_war_7
        add_timed_idea = {
            idea = PRC_50s_Economic_ruin_caused_by_war_7
            days = 165
        }
    } 
}
PRC_50s_Land_Reform_ideas_swap = {
    if = {
        limit = { has_idea = agrarian_bourgeoisie_1 }
        swap_ideas = { remove_idea = agrarian_bourgeoisie_1 add_idea = agrarian_bourgeoisie_2 }
    }
    else_if = {
        limit = { has_idea = agrarian_bourgeoisie_2 }
        swap_ideas = { remove_idea = agrarian_bourgeoisie_2 add_idea = agrarian_bourgeoisie_3 }
    }
    else_if = {
        limit = { has_idea = agrarian_bourgeoisie_3 }
        swap_ideas = { remove_idea = agrarian_bourgeoisie_3 add_idea = agrarian_bourgeoisie_4 }
    }
    else_if = {
        limit = { has_idea = agrarian_bourgeoisie_4 }
        swap_ideas = { remove_idea = agrarian_bourgeoisie_4 add_idea = agrarian_bourgeoisie_5 }
    }
}
PRC_50s_Imperialist_forces_swap = {
    if = {
        limit = { has_idea = PRC_50s_Imperialist_forces }
        swap_ideas = { remove_idea = PRC_50s_Imperialist_forces add_idea = PRC_50s_Imperialist_forces_2 }
    }
    else_if = {
        limit = { has_idea = PRC_50s_Imperialist_forces_2 }
        swap_ideas = { remove_idea = PRC_50s_Imperialist_forces_2 add_idea = PRC_50s_Imperialist_forces_3 }
    }
    else_if = {
        limit = { has_idea = PRC_50s_Imperialist_forces_3 }
        swap_ideas = { remove_idea = PRC_50s_Imperialist_forces_3 add_idea = PRC_50s_Imperialist_forces_4 }
    }
    else_if = {
        limit = { has_idea = PRC_50s_Imperialist_forces_4 }
        swap_ideas = { remove_idea = PRC_50s_Imperialist_forces_4 add_idea = PRC_50s_Imperialist_forces_5 }
    }
    else_if = {
        limit = { has_idea = PRC_50s_Imperialist_forces_5 }
        swap_ideas = { remove_idea = PRC_50s_Imperialist_forces_5 add_idea = PRC_50s_Imperialist_forces_6 }
    }
    else_if = {
        limit = { has_idea = PRC_50s_Imperialist_forces_6 }
        remove_ideas = PRC_50s_Imperialist_forces_6
    } 
}

PRC_50s_administration_integration_in = {
    if = {
        limit = { has_idea = PRC_50s_Administration_Integration_5 }
        swap_ideas = { remove_idea = PRC_50s_Administration_Integration_5 add_idea = PRC_50s_Administration_Integration_4 }
    }
    else_if = {
        limit = { has_idea = PRC_50s_Administration_Integration_4 }
        swap_ideas = { remove_idea = PRC_50s_Administration_Integration_4 add_idea = PRC_50s_Administration_Integration_3 }
    }
    else_if = {
        limit = { has_idea = PRC_50s_Administration_Integration_3 }
        swap_ideas = { remove_idea = PRC_50s_Administration_Integration_3 add_idea = PRC_50s_Administration_Integration_2 }
    }
    else_if = {
        limit = { has_idea = PRC_50s_Administration_Integration_2 }
        swap_ideas = { remove_idea = PRC_50s_Administration_Integration_2 add_idea = PRC_50s_Administration_Integration_1 }
    }
    else_if = {
        limit = { has_idea = PRC_50s_Administration_Integration_1 }
        remove_ideas = PRC_50s_Administration_Integration_1
    }
    else = {
        add_stability = 0.025
    }
}

PRC_50s_administration_integration_de = {
    if = {
        limit = { has_idea = PRC_50s_Administration_Integration_1 }
        swap_ideas = { remove_idea = PRC_50s_Administration_Integration_1 add_idea = PRC_50s_Administration_Integration_2 }
    }
    else_if = {
        limit = { has_idea = PRC_50s_Administration_Integration_2 }
        swap_ideas = { remove_idea = PRC_50s_Administration_Integration_2 add_idea = PRC_50s_Administration_Integration_3 }
    }
    else_if = {
        limit = { has_idea = PRC_50s_Administration_Integration_3 }
        swap_ideas = { remove_idea = PRC_50s_Administration_Integration_3 add_idea = PRC_50s_Administration_Integration_4 }
    }
    else_if = {
        limit = { has_idea = PRC_50s_Administration_Integration_4 }
        swap_ideas = { remove_idea = PRC_50s_Administration_Integration_4 add_idea = PRC_50s_Administration_Integration_5 }
    }
    else_if = {
        limit = { 
            NOT = {
                has_idea = PRC_50s_Administration_Integration_1 
                has_idea = PRC_50s_Administration_Integration_2
                has_idea = PRC_50s_Administration_Integration_3
                has_idea = PRC_50s_Administration_Integration_4
                has_idea = PRC_50s_Administration_Integration_5
            }
        }
        add_ideas = PRC_50s_Administration_Integration_1
    }
}


#######################
#                     #
#  faction struggle   #
#                     #
#######################

PRC_faction_struggle_system_startup = {
    clear_array = PRC_faction_struggle_system_faction_influence

    add_to_array = { PRC_faction_struggle_system_faction_influence = 29 }
    add_to_array = { PRC_faction_struggle_system_faction_influence = 14 }
    add_to_array = { PRC_faction_struggle_system_faction_influence = 49 }
    add_to_array = { PRC_faction_struggle_system_faction_influence = 4 }
    add_to_array = { PRC_faction_struggle_system_faction_influence = 4 }

    clear_array = PRC_faction_struggle_system_faction_party_support
    clear_array = PRC_faction_struggle_system_faction_gov_support
    clear_array = PRC_faction_struggle_system_faction_army_support

    add_to_array = { PRC_faction_struggle_system_faction_party_support = 29 }
    add_to_array = { PRC_faction_struggle_system_faction_party_support = 14 }
    add_to_array = { PRC_faction_struggle_system_faction_party_support = 49 }
    add_to_array = { PRC_faction_struggle_system_faction_party_support = 4 }
    add_to_array = { PRC_faction_struggle_system_faction_party_support = 4 }

    add_to_array = { PRC_faction_struggle_system_faction_gov_support = 39 }
    add_to_array = { PRC_faction_struggle_system_faction_gov_support = 4 }
    add_to_array = { PRC_faction_struggle_system_faction_gov_support = 49 }
    add_to_array = { PRC_faction_struggle_system_faction_gov_support = 4 }
    add_to_array = { PRC_faction_struggle_system_faction_gov_support = 4 }

    add_to_array = { PRC_faction_struggle_system_faction_army_support = 0 }
    add_to_array = { PRC_faction_struggle_system_faction_army_support = 40 }
    add_to_array = { PRC_faction_struggle_system_faction_army_support = 50 }
    add_to_array = { PRC_faction_struggle_system_faction_army_support = 10 }
    add_to_array = { PRC_faction_struggle_system_faction_army_support = 0 }

    set_variable = { PRC_faction_struggle_system_party_united = 85 }
    set_variable = { PRC_faction_struggle_system_party_discipline = 90 }

    PRC_faction_struggle_system_gui_reflesh = yes

    clear_array = PRC_faction_struggle_system_faction_supporter_0
    clear_array = PRC_faction_struggle_system_faction_supporter_1
    clear_array = PRC_faction_struggle_system_faction_supporter_2
    clear_array = PRC_faction_struggle_system_faction_supporter_3
    clear_array = PRC_faction_struggle_system_faction_supporter_4

    add_to_array = { PRC_faction_struggle_system_faction_supporter_1 = 0 }
    add_to_array = { PRC_faction_struggle_system_faction_supporter_1 = 1 }
    add_to_array = { PRC_faction_struggle_system_faction_supporter_1 = 2 }

    add_to_array = { PRC_faction_struggle_system_faction_supporter_2 = 3 }

    add_to_array = { PRC_faction_struggle_system_faction_supporter_4 = 5 }
    add_to_array = { PRC_faction_struggle_system_faction_supporter_4 = 6 }
    add_to_array = { PRC_faction_struggle_system_faction_supporter_4 = 7 }

    clear_array = PRC_faction_struggle_system_faction_supporter_effect

    resize_array = {
		array = PRC_faction_struggle_system_faction_supporter_effect
		value = 0.1
		size = 9
	}

    PRC_faction_struggle_system_faction_supporter_effect_reflesh = yes
}

PRC_faction_struggle_system_gui_reflesh = {
    clear_array = PRC_faction_struggle_system_faction_party_support_frame
    clear_array = PRC_faction_struggle_system_faction_gov_support_frame
    clear_array = PRC_faction_struggle_system_faction_army_support_frame

    resize_array = {
		array = PRC_faction_struggle_system_faction_party_support_frame
		value = 0
		size = 5
	}
    resize_array = {
		array = PRC_faction_struggle_system_faction_gov_support_frame
		value = 0
		size = 5
	}
    resize_array = {
		array = PRC_faction_struggle_system_faction_army_support_frame
		value = 0
		size = 5
	}

    for_each_loop = {
        array = PRC_faction_struggle_system_faction_party_support
        index = index_y

        set_temp_variable = { index_x = index_y }
        add_to_temp_variable = { index_x = 1 }

        for_loop_effect = {
            start = 0
            end = index_x
            value = i

            add_to_variable = { PRC_faction_struggle_system_faction_party_support_frame^i = PRC_faction_struggle_system_faction_party_support^index_y }
        }
    }

    for_each_loop = {
        array = PRC_faction_struggle_system_faction_gov_support
        index = index_y

        set_temp_variable = { index_x = index_y }
        add_to_temp_variable = { index_x = 1 }

        for_loop_effect = {
            start = 0
            end = index_x
            value = i

            add_to_variable = { PRC_faction_struggle_system_faction_gov_support_frame^i = PRC_faction_struggle_system_faction_gov_support^index_y }
        }
    }

    for_each_loop = {
        array = PRC_faction_struggle_system_faction_army_support
        index = index_y

        set_temp_variable = { index_x = index_y }
        add_to_temp_variable = { index_x = 1 }

        for_loop_effect = {
            start = 0
            end = index_x
            value = i

            add_to_variable = { PRC_faction_struggle_system_faction_army_support_frame^i = PRC_faction_struggle_system_faction_army_support^index_y }
        }
    }
}

PRC_faction_struggle_system_faction_influence_change = {

    custom_effect_tooltip = PRC_faction_struggle_system_faction_influence_change

    if = {
        limit = {
            set_temp_variable = { check = temp_y }
            add_to_temp_variable = { check = PRC_faction_struggle_system_faction_influence^temp_x }
            check_variable = { check < 100 }
            check_variable = { check > 0 }
        }

        set_temp_variable = { temp_t = 100 }
        subtract_from_temp_variable = { temp_t = temp_y }
        subtract_from_temp_variable = { temp_t = PRC_faction_struggle_system_faction_influence^temp_x }
    
        multiply_temp_variable = { temp_y = 100 }
        divide_temp_variable = { temp_y = temp_t }
    
        add_to_variable = { PRC_faction_struggle_system_faction_influence^temp_x = temp_y }
    
        set_temp_variable = { temp_t = 0 }
        for_each_loop = {
            array = PRC_faction_struggle_system_faction_influence
            value = v
    
            add_to_temp_variable = { temp_t = v }
        }
        for_each_loop = {
            array = PRC_faction_struggle_system_faction_influence
            index = i
    
            divide_variable = { PRC_faction_struggle_system_faction_influence^i = temp_t }
            multiply_variable = { PRC_faction_struggle_system_faction_influence^i = 100 }
        }
    }
    else_if = {
        limit = {
            set_temp_variable = { check = temp_y }
            add_to_temp_variable = { check = PRC_faction_struggle_system_faction_influence^temp_x }
            NOT = { check_variable = { check < 100 } }
        }
        for_each_loop = {
            array = PRC_faction_struggle_system_faction_influence
            index = i
    
            set_variable = { PRC_faction_struggle_system_faction_influence^i = 0 }
        }
        set_variable = { PRC_faction_struggle_system_faction_influence^temp_x = 100 }
    }
    else_if = {
        limit = {
            set_temp_variable = { check = temp_y }
            add_to_temp_variable = { check = PRC_faction_struggle_system_faction_influence^temp_x }
            NOT = { check_variable = { check > 0 } }
        }
        set_variable = { PRC_faction_struggle_system_faction_influence^temp_x = 0 }
        set_temp_variable = { temp_t = 0 }
        for_each_loop = {
            array = PRC_faction_struggle_system_faction_influence
            value = v
    
            add_to_temp_variable = { temp_t = v }
        }
        for_each_loop = {
            array = PRC_faction_struggle_system_faction_influence
            index = i
    
            divide_variable = { PRC_faction_struggle_system_faction_influence^i = temp_t }
            multiply_variable = { PRC_faction_struggle_system_faction_influence^i = 100 }
        }
    }

    

    PRC_faction_struggle_system_gui_reflesh = yes
}

PRC_faction_struggle_system_faction_support_change = {

    custom_effect_tooltip = PRC_faction_struggle_system_faction_support_change

    if = {
        limit = {
            check_variable = { temp_z = 0 }
        }
        set_temp_variable = { check = PRC_faction_struggle_system_faction_party_support^temp_x }
        add_to_temp_variable = { check = temp_y }
    }
    else_if = {
        limit = {
            check_variable = { temp_z = 1 }
        }
        set_temp_variable = { check = PRC_faction_struggle_system_faction_gov_support^temp_x }
        add_to_temp_variable = { check = temp_y }
    }
    else_if = {
        limit = {
            check_variable = { temp_z = 2 }
        }
        set_temp_variable = { check = PRC_faction_struggle_system_faction_army_support^temp_x }
        add_to_temp_variable = { check = temp_y }
    }

    if = {
        limit = {
            check_variable = { check < 100 }
            check_variable = { check > 0 }
        }

        set_temp_variable = { temp_t = 100 }
        subtract_from_temp_variable = { temp_t = temp_y }
        if = {
            limit = {
                check_variable = { temp_z = 0 }
            }
            subtract_from_temp_variable = { temp_t = PRC_faction_struggle_system_faction_party_support^temp_x }
        }
        else_if = {
            limit = {
                check_variable = { temp_z = 1 }
            }
            subtract_from_temp_variable = { temp_t = PRC_faction_struggle_system_faction_gov_support^temp_x }
        }
        else_if = {
            limit = {
                check_variable = { temp_z = 2 }
            }
            subtract_from_temp_variable = { temp_t = PRC_faction_struggle_system_faction_army_support^temp_x }
        }
    
        multiply_temp_variable = { temp_y = 100 }
        divide_temp_variable = { temp_y = temp_t }
    
        if = {
            limit = {
                check_variable = { temp_z = 0 }
            }
            add_to_variable = { PRC_faction_struggle_system_faction_party_support^temp_x = temp_y }
        }
        else_if = {
            limit = {
                check_variable = { temp_z = 1 }
            }
            add_to_variable = { PRC_faction_struggle_system_faction_gov_support^temp_x = temp_y }
        }
        else_if = {
            limit = {
                check_variable = { temp_z = 2 }
            }
            add_to_variable = { PRC_faction_struggle_system_faction_army_support^temp_x = temp_y }
        }
    
        set_temp_variable = { temp_t = 0 }
    
        if = {
            limit = {
                check_variable = { temp_z = 0 }
            }
            for_each_loop = {
                array = PRC_faction_struggle_system_faction_party_support
                value = v
        
                add_to_temp_variable = { temp_t = v }
            }
            for_each_loop = {
                array = PRC_faction_struggle_system_faction_party_support
                index = i
        
                divide_variable = { PRC_faction_struggle_system_faction_party_support^i = temp_t }
                multiply_variable = { PRC_faction_struggle_system_faction_party_support^i = 100 }
            }
        }
        else_if = {
            limit = {
                check_variable = { temp_z = 1 }
            }
            for_each_loop = {
                array = PRC_faction_struggle_system_faction_gov_support
                value = v
        
                add_to_temp_variable = { temp_t = v }
            }
            for_each_loop = {
                array = PRC_faction_struggle_system_faction_gov_support
                index = i
        
                divide_variable = { PRC_faction_struggle_system_faction_gov_support^i = temp_t }
                multiply_variable = { PRC_faction_struggle_system_faction_gov_support^i = 100 }
            }
        }
        else_if = {
            limit = {
                check_variable = { temp_z = 2 }
            }
            for_each_loop = {
                array = PRC_faction_struggle_system_faction_army_support
                value = v
        
                add_to_temp_variable = { temp_t = v }
            }
            for_each_loop = {
                array = PRC_faction_struggle_system_faction_army_support
                index = i
        
                divide_variable = { PRC_faction_struggle_system_faction_army_support^i = temp_t }
                multiply_variable = { PRC_faction_struggle_system_faction_army_support^i = 100 }
            }
        }
    }
    else_if = {
        limit = {
            NOT = { check_variable = { check < 100 } }
        }

        if = {
            limit = {
                check_variable = { temp_z = 0 }
            }
            for_each_loop = {
                array = PRC_faction_struggle_system_faction_party_support
                index = i
        
                set_variable = { PRC_faction_struggle_system_faction_party_support^i = 0 }
            }
        }
        else_if = {
            limit = {
                check_variable = { temp_z = 1 }
            }
            for_each_loop = {
                array = PRC_faction_struggle_system_faction_gov_support
                index = i
        
                set_variable = { PRC_faction_struggle_system_faction_gov_support^i = 0 }
            }
        }
        else_if = {
            limit = {
                check_variable = { temp_z = 2 }
            }
            for_each_loop = {
                array = PRC_faction_struggle_system_faction_army_support
                index = i
        
                set_variable = { PRC_faction_struggle_system_faction_army_support^i = 0 }
            }
        }

        if = {
            limit = {
                check_variable = { temp_z = 0 }
            }
            set_variable = { PRC_faction_struggle_system_faction_party_support^temp_x = 100 }
        }
        else_if = {
            limit = {
                check_variable = { temp_z = 1 }
            }
            set_variable = { PRC_faction_struggle_system_faction_gov_support^temp_x = 100 }
        }
        else_if = {
            limit = {
                check_variable = { temp_z = 2 }
            }
            set_variable = { PRC_faction_struggle_system_faction_army_support^temp_x = 100 }
        }
    }
    else_if = {
        limit = {
            NOT = { check_variable = { check > 0 } }
        }

        if = {
            limit = {
                check_variable = { temp_z = 0 }
            }
            set_variable = { PRC_faction_struggle_system_faction_party_support^temp_x = 0 }
        }
        else_if = {
            limit = {
                check_variable = { temp_z = 1 }
            }
            set_variable = { PRC_faction_struggle_system_faction_gov_support^temp_x = 0 }
        }
        else_if = {
            limit = {
                check_variable = { temp_z = 2 }
            }
            set_variable = { PRC_faction_struggle_system_faction_army_support^temp_x = 0 }
        }
    
        set_temp_variable = { temp_t = 0 }
    
        if = {
            limit = {
                check_variable = { temp_z = 0 }
            }
            for_each_loop = {
                array = PRC_faction_struggle_system_faction_party_support
                value = v
        
                add_to_temp_variable = { temp_t = v }
            }
            for_each_loop = {
                array = PRC_faction_struggle_system_faction_party_support
                index = i
        
                divide_variable = { PRC_faction_struggle_system_faction_party_support^i = temp_t }
                multiply_variable = { PRC_faction_struggle_system_faction_party_support^i = 100 }
            }
        }
        else_if = {
            limit = {
                check_variable = { temp_z = 1 }
            }
            for_each_loop = {
                array = PRC_faction_struggle_system_faction_gov_support
                value = v
        
                add_to_temp_variable = { temp_t = v }
            }
            for_each_loop = {
                array = PRC_faction_struggle_system_faction_gov_support
                index = i
        
                divide_variable = { PRC_faction_struggle_system_faction_gov_support^i = temp_t }
                multiply_variable = { PRC_faction_struggle_system_faction_gov_support^i = 100 }
            }
        }
        else_if = {
            limit = {
                check_variable = { temp_z = 2 }
            }
            for_each_loop = {
                array = PRC_faction_struggle_system_faction_army_support
                value = v
        
                add_to_temp_variable = { temp_t = v }
            }
            for_each_loop = {
                array = PRC_faction_struggle_system_faction_army_support
                index = i
        
                divide_variable = { PRC_faction_struggle_system_faction_army_support^i = temp_t }
                multiply_variable = { PRC_faction_struggle_system_faction_army_support^i = 100 }
            }
        }
    }

    PRC_faction_struggle_system_gui_reflesh = yes
}

PRC_faction_struggle_system_faction_var_change = {
    if = {
        limit = {
            check_variable = { temp_x = 0 }
        }
        add_to_variable = { PRC_faction_struggle_system_party_united = temp_y }
    }
    else_if = {
        limit = {
            check_variable = { temp_x = 1 }
        }
        add_to_variable = { PRC_faction_struggle_system_party_discipline = temp_y }
    }

    clamp_variable = {
		var = PRC_faction_struggle_system_party_united
		min = 0
		max = 100
	}
    clamp_variable = {
		var = PRC_faction_struggle_system_party_discipline
		min = 0
		max = 100
	}
    
    custom_effect_tooltip = PRC_faction_struggle_system_faction_var_change
}

PRC_faction_struggle_system_faction_supporter_change = {
    if = {
        limit = {
            check_variable = { temp_y = 0 }
        }
        if = {
            limit = {
                meta_trigger = {
                    text = {
                        is_in_array = {
                            PRC_faction_struggle_system_faction_supporter_[x] = temp_i
                        }
                    }
                    x = "[?temp_x]"
                }
            }
            meta_effect = {
                text = {
                    remove_from_array = {
                        array = PRC_faction_struggle_system_faction_supporter_[x]
	                    value = temp_i
                    }
                }
                x = "[?temp_x]"
            }
        }
        custom_effect_tooltip = PRC_faction_struggle_system_faction_supporter_remove
    }
    else_if = {
        limit = {
            check_variable = { temp_y = 1 }
        }
        if = {
            limit = {
                NOT = {
                    meta_trigger = {
                        text = {
                            is_in_array = {
                                PRC_faction_struggle_system_faction_supporter_[x] = temp_i
                            }
                        }
                        x = "[?temp_x]"
                    }
                }
            }
            meta_effect = {
                text = {
                    add_to_array = {
                        array = PRC_faction_struggle_system_faction_supporter_[x]
	                    value = temp_i
                    }
                }
                x = "[?temp_x]"
            }
            custom_effect_tooltip = PRC_faction_struggle_system_faction_supporter_add
        }
    }

    PRC_faction_struggle_system_faction_supporter_effect_reflesh = yes
}

PRC_faction_struggle_system_faction_supporter_effect_reflesh = {
    clear_array = PRC_faction_struggle_system_faction_supporter_feffect

    for_loop_effect = {
        start = 0 
        end = 5
        value = v

        add_to_array = { PRC_faction_struggle_system_faction_supporter_feffect = 0 }

        meta_effect = {
            text = {
                for_each_loop = {
                    array = PRC_faction_struggle_system_faction_supporter_[x]
                    value = index

                    add_to_variable = { PRC_faction_struggle_system_faction_supporter_feffect^v = PRC_faction_struggle_system_faction_supporter_effect^index }
                }
            }
            x = "[?v]"
        }
    }
}

PRC_faction_struggle_system_faction_supporter_effect_change = {
    add_to_variable = { PRC_faction_struggle_system_faction_supporter_effect^temp_i = temp_y }

    custom_effect_tooltip = PRC_faction_struggle_system_faction_supporter_effect_change
    PRC_faction_struggle_system_faction_supporter_effect_reflesh = yes
}


###############################################################
##                                                           ##
##   Consolidation of the Regime and Social Transformation   ##
##                                                           ##
###############################################################

#Suppress Counterrevolutionaries
PRC_Suppress_Counterrevolutionaries_startup = {
    set_country_flag = PRC_Suppress_Counterrevolutionaries_flag
    set_variable = { PRC_Consolidation_of_the_Regime_and_Social_Transformation_gui_var = 1 }
    set_variable = { Suppress_Counterrevolutionaries_target = 1569 }
    716 = {
        set_variable = { Suppress_Counterrevolutionaries_Bandit = 8 }
        set_variable = { Suppress_Counterrevolutionaries_Huidaomen = 23 }
        set_variable = { Suppress_Counterrevolutionaries_Kuomintang = 10 }
    }
    609 = {
        set_variable = { Suppress_Counterrevolutionaries_Bandit = 25 }
        set_variable = { Suppress_Counterrevolutionaries_Huidaomen = 90 }
        set_variable = { Suppress_Counterrevolutionaries_Kuomintang = 40 }
    }
    283 = {
        set_variable = { Suppress_Counterrevolutionaries_Bandit = 33 }
        set_variable = { Suppress_Counterrevolutionaries_Huidaomen = 72 }
        set_variable = { Suppress_Counterrevolutionaries_Kuomintang = 90 }
    }
    605 = {
        set_variable = { Suppress_Counterrevolutionaries_Bandit = 55 }
        set_variable = { Suppress_Counterrevolutionaries_Huidaomen = 80 }
        set_variable = { Suppress_Counterrevolutionaries_Kuomintang = 84 }
    }
    1569 = {
        set_variable = { Suppress_Counterrevolutionaries_Bandit = 86 }
        set_variable = { Suppress_Counterrevolutionaries_Huidaomen = 80 }
        set_variable = { Suppress_Counterrevolutionaries_Kuomintang = 75 }
    }
    598 = {
        set_variable = { Suppress_Counterrevolutionaries_Bandit = 57 }
        set_variable = { Suppress_Counterrevolutionaries_Huidaomen = 70 }
        set_variable = { Suppress_Counterrevolutionaries_Kuomintang = 80 }
    }
    PRC_Suppress_Counterrevolutionaries_update = yes
}
PRC_Suppress_Counterrevolutionaries_update = {
    every_state = {
        limit = {
            OR = {
                state = 716
                state = 609
                state = 283
                state = 605
                state = 1569
                state = 598
            }
        }
        clamp_variable = {
            var = Suppress_Counterrevolutionaries_Bandit
            min = 0
            max = 100
        }
        clamp_variable = {
            var = Suppress_Counterrevolutionaries_Huidaomen
            min = 0
            max = 100
        }
        clamp_variable = {
            var = Suppress_Counterrevolutionaries_Kuomintang
            min = 0
            max = 100
        }
        if = {
            limit = {
                check_variable = {
                    var = Suppress_Counterrevolutionaries_Bandit
                    value = 0
                    compare = equals
                }
                check_variable = {
                    var = Suppress_Counterrevolutionaries_Huidaomen
                    value = 0
                    compare = equals
                }
                check_variable = {
                    var = Suppress_Counterrevolutionaries_Kuomintang
                    value = 0
                    compare = equals
                }
            }
            set_variable = { Suppress_Counterrevolutionaries_progress = 2 }
        }
        if = {
            limit = {
                OR = {
                    check_variable = {
                        var = Suppress_Counterrevolutionaries_Bandit
                        value = 0
                        compare = greater_than
                    }
                    check_variable = {
                        var = Suppress_Counterrevolutionaries_Huidaomen
                        value = 0
                        compare = greater_than
                    }
                    check_variable = {
                        var = Suppress_Counterrevolutionaries_Kuomintang
                        value = 0
                        compare = greater_than
                    }
                }
            }
            set_variable = { Suppress_Counterrevolutionaries_progress = 1 }
        }
    }
}

#Land Reform
PRC_Land_Reform_startup = {
    every_state = {
        limit = {
            OR = {
                state = 616
                state = 1787
                state = 1786
                state = 607
                state = 620
                state = 606

                state = 1785
                state = 598
                state = 1557
                state = 605
                state = 325
                state = 603
                state = 602
                state = 600
                state = 596
                state = 595
                state = 1569
                state = 594
                state = 617
                state = 604
            }
        }
        set_variable = { Land_Reform_progrss = 0 }
        set_variable = { Land_Reform_progrss_gain = 1 }
    }
    PRC_Land_Reform_update = yes
}
PRC_Land_Reform_update = {
    every_state = {
        limit = {
            OR = {
                state = 616
                state = 1787
                state = 1786
                state = 607
                state = 620
                state = 606

                state = 1785
                state = 598
                state = 1557
                state = 605
                state = 325
                state = 603
                state = 602
                state = 600
                state = 596
                state = 595
                state = 1569
                state = 594
                state = 617
                state = 604
            }
        }
        clamp_variable = {
            var = Land_Reform_progrss
            min = 0
            max = 200
        }
        clamp_variable = {
            var = Land_Reform_progrss_gain
            min = 0
            max = 8
        }
        if = {
            limit = {
                check_variable = { Land_Reform_progrss > 180 }
            }
            set_variable = { Land_Reform_level = 2 }
        }
        if = {
            limit = {
                check_variable = { 
                    var = Land_Reform_progrss 
                    value = 180
                    compare = less_than_or_equals
                }
                check_variable = { 
                    var = Land_Reform_progrss 
                    value = 0
                    compare = greater_than_or_equals
                }
            }
            set_variable = { Land_Reform_level = 0 }
        }
    }
}

#Socialist Transformation
PRC_Socialist_Transformation_startup = {
    set_variable = { PRC_Socialist_Transformation_agriculture_progress = 14 }
    add_to_variable = { PRC_Socialist_Transformation_agriculture_progress = 7 }
    set_variable = { PRC_Socialist_Transformation_industry_progress = 14 }
    add_to_variable = { PRC_Socialist_Transformation_industry_progress = 23 }
    set_variable = { PRC_Socialist_Transformation_commerce_progress = 14 }
    add_to_variable = { PRC_Socialist_Transformation_commerce_progress = 31 }
    set_variable = { PRC_Socialist_Transformation_agriculture_progress_max = 90 }
    set_variable = { PRC_Socialist_Transformation_industry_progress_max = 120 }
    set_variable = { PRC_Socialist_Transformation_commerce_progress_max = 120 }
    PRC_Socialist_Transformation_update = yes
}
PRC_Socialist_Transformation_update = {
    clamp_variable = {
        var = PRC_Socialist_Transformation_agriculture_progress_max
        min = 0
        max = 143
    }
    clamp_variable = {
        var = PRC_Socialist_Transformation_industry_progress_max
        min = 0
        max = 143
    }
    clamp_variable = {
        var = PRC_Socialist_Transformation_commerce_progress_max
        min = 0
        max = 143
    }
    clamp_variable = {
        var = PRC_Socialist_Transformation_agriculture_progress
        min = 0
        max = PRC_Socialist_Transformation_agriculture_progress_max
    }
    clamp_variable = {
        var = PRC_Socialist_Transformation_industry_progress
        min = 0
        max = PRC_Socialist_Transformation_industry_progress_max
    }
    clamp_variable = {
        var = PRC_Socialist_Transformation_commerce_progress
        min = 0
        max = PRC_Socialist_Transformation_commerce_progress_max
    }
    set_variable = { PRC_Socialist_Transformation_oerall_progress = PRC_Socialist_Transformation_agriculture_progress }
    add_to_variable = { PRC_Socialist_Transformation_oerall_progress = PRC_Socialist_Transformation_industry_progress }
    add_to_variable = { PRC_Socialist_Transformation_oerall_progress = PRC_Socialist_Transformation_commerce_progress }
    subtract_from_variable = { PRC_Socialist_Transformation_oerall_progress = 42 }
    divide_variable = { PRC_Socialist_Transformation_oerall_progress = 387 }
    set_variable = { PRC_Socialist_Transformation_oerall_progress_percent = PRC_Socialist_Transformation_oerall_progress }
    multiply_variable = { PRC_Socialist_Transformation_oerall_progress = 293 }
    add_to_variable = { PRC_Socialist_Transformation_oerall_progress = 4 }
}

PRC_socialist_transformation_startup = {
    set_variable = { PRC_socialist_transformation_status = 14 }

    set_variable = { PRC_50s_socialist_transformation_re_time1 = 210 }
    set_variable = { PRC_50s_socialist_transformation_re_time2 = 365 }

    set_variable = { PRC_socialist_transformation_Progress_of_agricultural_cooperation = 0 }
    set_variable = { PRC_socialist_transformation_status_frame = PRC_socialist_transformation_status }
    round_variable = PRC_socialist_transformation_status_frame
}

PRC_socialist_transformation_status_change = {
    if = {
        limit = {
            check_variable = { temp_x < 0 }
        }
        add_to_variable = { PRC_socialist_transformation_status = temp_x }
        custom_effect_tooltip = PRC_socialist_transformation_status_de
    }
    else_if = {
        limit = {
            check_variable = { temp_x > 0 }
        }
        add_to_variable = { PRC_socialist_transformation_status = temp_x }
        custom_effect_tooltip = PRC_socialist_transformation_status_in
    }

    set_variable = { PRC_socialist_transformation_status_frame = PRC_socialist_transformation_status }
    round_variable = PRC_socialist_transformation_status_frame

    clamp_variable = {
        var = PRC_socialist_transformation_status
		min = 0
		max = 20
    }
}
PRC_socialist_transformation_Progress_of_agricultural_cooperation_change = {
    if = {
        limit = {
            check_variable = { temp_x < 0 }
        }
        add_to_variable = { PRC_socialist_transformation_Progress_of_agricultural_cooperation = temp_x }
        custom_effect_tooltip = PRC_socialist_transformation_Progress_of_agricultural_cooperation_de
    }
    else_if = {
        limit = {
            check_variable = { temp_x > 0 }
        }
        add_to_variable = { PRC_socialist_transformation_Progress_of_agricultural_cooperation = temp_x }
        custom_effect_tooltip = PRC_socialist_transformation_Progress_of_agricultural_cooperation_in
    }

    clamp_variable = {
        var = PRC_socialist_transformation_Progress_of_agricultural_cooperation
		min = 0
		max = 100
    }
}
PRC_socialist_transformation_Progress_of_agricultural_cooperation_lost_trust = {
    if = {
        limit = {
            check_variable = { temp_u = 0 }
            has_completed_focus = PRC_50s_Control_The_Process_of_Co-operation
        }
        custom_effect_tooltip = PRC_socialist_transformation_Progress_of_agricultural_cooperation_lost_trust
        set_temp_variable = { temp_x = 2 }
        set_temp_variable = { temp_y = 0.5 }
        PRC_faction_struggle_system_faction_influence_change = yes
        set_temp_variable = { temp_x = -3 }
		PRC_socialist_transformation_Progress_of_agricultural_cooperation_change = yes
    }
    else_if = {
        limit = {
            check_variable = { temp_u = 1 }
            has_completed_focus = PRC_50s_Accelerate_The_Process_of_Co-operation
        }
        custom_effect_tooltip = PRC_socialist_transformation_Progress_of_agricultural_cooperation_lost_trust
        set_temp_variable = { temp_x = 1 }
        set_temp_variable = { temp_y = 0.5 }
        PRC_faction_struggle_system_faction_influence_change = yes
        set_temp_variable = { temp_x = -5 }
		PRC_socialist_transformation_Progress_of_agricultural_cooperation_change = yes
    }
}

#################
#     2 100     #
#################

PRC_50s_The_Two_Hundred_Policy_open_var_change = {
    add_to_variable = { PRC_50s_The_Two_Hundred_Policy_open_var = temp_x }

    if = {
        limit = {
            check_variable = { temp_x > 0 }
        }
        custom_effect_tooltip = PRC_50s_The_Two_Hundred_Policy_open_var_in
    }
    else = {
        multiply_temp_variable = { temp_x = -1 }
        custom_effect_tooltip = PRC_50s_The_Two_Hundred_Policy_open_var_de
    }

    clamp_variable = {
        var = PRC_50s_The_Two_Hundred_Policy_open_var
        min = 0
    }

    if = {
        limit = {
            check_variable = { PRC_50s_The_Two_Hundred_Policy_open_var > 100 }
        }
        country_event = {
            id = PRC_50s_Rework_event.29
        }
    }
}

#################
#      dip      #
#################

PRC_50s_dip_international_credibility_change = {
    if = {
        limit = {
            has_idea = international_credibility_3
        }
        swap_ideas = {
            remove_idea = international_credibility_3
            add_idea = international_credibility_2
        }
    }
    else_if = {
        limit = {
            has_idea = international_credibility_2
        }
        swap_ideas = {
            remove_idea = international_credibility_2
            add_idea = international_credibility_1
        }
    }
    else_if = {
        limit = {
            has_idea = international_credibility_1
        }
        remove_ideas = international_credibility_1
    }
}

PRC_50s_dip_eastern_bloc_integration_change = {
    if = {
        limit = {
            has_idea = eastern_bloc_integration_1
        }
        swap_ideas = {
            remove_idea = eastern_bloc_integration_1
            add_idea = eastern_bloc_integration_2
        }
    }
    else_if = {
        limit = {
            has_idea = eastern_bloc_integration_2
        }
        swap_ideas = {
            remove_idea = eastern_bloc_integration_2
            add_idea = eastern_bloc_integration_3
        }
    }
    else_if = {
        limit = {
            has_idea = eastern_bloc_integration_3
        }
        swap_ideas = {
            remove_idea = eastern_bloc_integration_3
            add_idea = eastern_bloc_integration_4
        }
    }
    else_if = {
        limit = {
            has_idea = eastern_bloc_integration_4
        }
        swap_ideas = {
            remove_idea = eastern_bloc_integration_4
            add_idea = eastern_bloc_integration_5
        }
    }
    else_if = {
        limit = {
            has_idea = eastern_bloc_integration_5
        }
        swap_ideas = {
            remove_idea = eastern_bloc_integration_5
            add_idea = eastern_bloc_integration_6
        }
    }
    else_if = {
        limit = {
            has_idea = eastern_bloc_integration_6
        }
        swap_ideas = {
            remove_idea = eastern_bloc_integration_6
            add_idea = eastern_bloc_integration_7
        }
    }
    else_if = {
        limit = {
            NOT = {
                has_idea = eastern_bloc_integration_1
                has_idea = eastern_bloc_integration_2
                has_idea = eastern_bloc_integration_3
                has_idea = eastern_bloc_integration_4
                has_idea = eastern_bloc_integration_5
                has_idea = eastern_bloc_integration_6
                has_idea = eastern_bloc_integration_7
            }
        }
        add_ideas = eastern_bloc_integration_1
    }
}

PRC_50s_Economic_cooperation_among_Asian_countries_change = {
    if = {
        limit = {
            has_idea = PRC_50s_Economic_cooperation_among_Asian_countries
        }
        swap_ideas = {
            remove_idea = PRC_50s_Economic_cooperation_among_Asian_countries
            add_idea = PRC_50s_Economic_cooperation_among_Asian_countries_2
        }
    }
    else_if = {
        limit = {
            has_idea = PRC_50s_Economic_cooperation_among_Asian_countries_2
        }
        swap_ideas = {
            remove_idea = PRC_50s_Economic_cooperation_among_Asian_countries_2
            add_idea = PRC_50s_Economic_cooperation_among_Asian_countries_3
        }
    }
    else_if = {
        limit = {
            has_idea = PRC_50s_Economic_cooperation_among_Asian_countries_3
        }
        swap_ideas = {
            remove_idea = PRC_50s_Economic_cooperation_among_Asian_countries_3
            add_idea = PRC_50s_Economic_cooperation_among_Asian_countries_4
        }
    }
    else_if = {
        limit = {
            has_idea = PRC_50s_Economic_cooperation_among_Asian_countries_4
        }
        swap_ideas = {
            remove_idea = PRC_50s_Economic_cooperation_among_Asian_countries_4
            add_idea = PRC_50s_Economic_cooperation_among_Asian_countries_5
        }
    }
    else_if = {
        limit = {
            has_idea = PRC_50s_Economic_cooperation_among_Asian_countries_5
        }
        swap_ideas = {
            remove_idea = PRC_50s_Economic_cooperation_among_Asian_countries_5
            add_idea = PRC_50s_Economic_cooperation_among_Asian_countries_6
        }
    }
    else_if = {
        limit = {
            has_idea = PRC_50s_Economic_cooperation_among_Asian_countries_6
        }
        swap_ideas = {
            remove_idea = PRC_50s_Economic_cooperation_among_Asian_countries_6
            add_idea = PRC_50s_Economic_cooperation_among_Asian_countries_7
        }
    }
    else_if = {
        limit = {
            has_idea = PRC_50s_Economic_cooperation_among_Asian_countries_7
        }
        swap_ideas = {
            remove_idea = PRC_50s_Economic_cooperation_among_Asian_countries_7
            add_idea = PRC_50s_Economic_cooperation_among_Asian_countries_8
        }
    }
    else_if = {
        limit = {
            NOT = {
                has_idea = PRC_50s_Economic_cooperation_among_Asian_countries
                has_idea = PRC_50s_Economic_cooperation_among_Asian_countries_2
                has_idea = PRC_50s_Economic_cooperation_among_Asian_countries_3
                has_idea = PRC_50s_Economic_cooperation_among_Asian_countries_4
                has_idea = PRC_50s_Economic_cooperation_among_Asian_countries_5
                has_idea = PRC_50s_Economic_cooperation_among_Asian_countries_6
                has_idea = PRC_50s_Economic_cooperation_among_Asian_countries_7
                has_idea = PRC_50s_Economic_cooperation_among_Asian_countries_8
            }
        }
        add_ideas = PRC_50s_Economic_cooperation_among_Asian_countries
    }
}

PRC_50s_Economic_cooperation_among_Asian_countries_de = {
    if = {
        limit = {
            has_idea = PRC_50s_Economic_cooperation_among_Asian_countries_2
        }
        swap_ideas = {
            remove_idea = PRC_50s_Economic_cooperation_among_Asian_countries_2
            add_idea = PRC_50s_Economic_cooperation_among_Asian_countries
        }
    }
    else_if = {
        limit = {
            has_idea = PRC_50s_Economic_cooperation_among_Asian_countries_3
        }
        swap_ideas = {
            remove_idea = PRC_50s_Economic_cooperation_among_Asian_countries_3
            add_idea = PRC_50s_Economic_cooperation_among_Asian_countries_2
        }
    }
    else_if = {
        limit = {
            has_idea = PRC_50s_Economic_cooperation_among_Asian_countries_4
        }
        swap_ideas = {
            remove_idea = PRC_50s_Economic_cooperation_among_Asian_countries_4
            add_idea = PRC_50s_Economic_cooperation_among_Asian_countries_3
        }
    }
    else_if = {
        limit = {
            has_idea = PRC_50s_Economic_cooperation_among_Asian_countries_5
        }
        swap_ideas = {
            remove_idea = PRC_50s_Economic_cooperation_among_Asian_countries_5
            add_idea = PRC_50s_Economic_cooperation_among_Asian_countries_4
        }
    }
    else_if = {
        limit = {
            has_idea = PRC_50s_Economic_cooperation_among_Asian_countries_6
        }
        swap_ideas = {
            remove_idea = PRC_50s_Economic_cooperation_among_Asian_countries_6
            add_idea = PRC_50s_Economic_cooperation_among_Asian_countries_5
        }
    }
    else_if = {
        limit = {
            has_idea = PRC_50s_Economic_cooperation_among_Asian_countries_7
        }
        swap_ideas = {
            remove_idea = PRC_50s_Economic_cooperation_among_Asian_countries_7
            add_idea = PRC_50s_Economic_cooperation_among_Asian_countries_6
        }
    }
    else_if = {
        limit = {
            has_idea = PRC_50s_Economic_cooperation_among_Asian_countries_8
        }
        swap_ideas = {
            remove_idea = PRC_50s_Economic_cooperation_among_Asian_countries_8
            add_idea = PRC_50s_Economic_cooperation_among_Asian_countries_7
        }
    }
    else_if = {
        limit = {
            has_idea = PRC_50s_Economic_cooperation_among_Asian_countries
        }
        remove_ideas = PRC_50s_Economic_cooperation_among_Asian_countries
    }
}

PRC_launch_the_GLF = {
    set_country_flag = PRC_GLF_flag
    set_variable = {
        var = PRC_49_60_focus_var  
        value = 3  
    }
    mark_focus_tree_layout_dirty = yes
    set_variable = { PRC_GLF_rash_advance_var = 60 }
    activate_mission = PRC_50s_Empower_Local_Governments_mission
    add_dynamic_modifier = {
        modifier = PRC_Great_Leap_Forward_dynamic_modifier
    }
    hidden_effect = {
        every_owned_state = {
            set_variable = { PRC_state_famine_var = 0 }
        }
    }
}
PRC_glf_exacerbate_famine_effect_1 = {
    hidden_effect = {
        every_owned_state = {
            limit = {
                OR = {
                    state = 605
                    state = 601
                    state = 607
                    state = 606
                    state = 597
                }
            }
            add_to_variable = { PRC_state_famine_var = 8 }
            set_temp_variable = { prc_temp_var = 1 }
        }
        every_owned_state = {
            limit = {
                NOT = {
                    has_variable = prc_temp_var
                }
                OR = {
                    state = 283
                    state = 598
                    state = 603
                    state = 594
                    state = 283
                }
            }
            add_to_variable = { PRC_state_famine_var = 6 }
            set_temp_variable = { prc_temp_var = 1 }
        }
        every_owned_state = {
            limit = {
                NOT = {
                    OR = {
                        state = 608
                        state = 603
                        state = 613
                    }
                    has_variable = prc_temp_var
                }
                state_population_k > 36
            }
            add_to_variable = { PRC_state_famine_var = 3 }
        }
        every_owned_state = {
            limit = {
                OR = {
                    state = 608
                    state = 603
                    state = 613
                }
            }
            add_to_variable = { PRC_state_famine_var = 1 }
        }
    }
}
PRC_glf_exacerbate_famine_effect_2 = {
    hidden_effect = {
        every_owned_state = {
            limit = {
                OR = {
                    state = 605
                    state = 601
                    state = 607
                    state = 606
                    state = 597
                }
            }
            add_to_variable = { PRC_state_famine_var = 6 }
            set_temp_variable = { prc_temp_var = 1 }
        }
        every_owned_state = {
            limit = {
                NOT = {
                    has_variable = prc_temp_var
                }
                OR = {
                    state = 283
                    state = 598
                    state = 603
                    state = 594
                    state = 283
                }
            }
            add_to_variable = { PRC_state_famine_var = 4 }
            set_temp_variable = { prc_temp_var = 1 }
        }
        every_owned_state = {
            limit = {
                NOT = {
                    OR = {
                        state = 608
                        state = 603
                        state = 613
                    }
                    has_variable = prc_temp_var
                }
                state_population_k > 36
            }
            add_to_variable = { PRC_state_famine_var = 2 }
        }
    }
}
PRC_glf_exacerbate_famine_effect_3 = {
    hidden_effect = {
        every_owned_state = {
            limit = {
                OR = {
                    state = 605
                    state = 601
                    state = 607
                    state = 606
                    state = 597
                }
            }
            add_to_variable = { PRC_state_famine_var = 4 }
            set_temp_variable = { prc_temp_var = 1 }
        }
        every_owned_state = {
            limit = {
                NOT = {
                    has_variable = prc_temp_var
                }
                OR = {
                    state = 283
                    state = 598
                    state = 603
                    state = 594
                    state = 283
                }
            }
            add_to_variable = { PRC_state_famine_var = 3 }
            set_temp_variable = { prc_temp_var = 1 }
        }
        every_owned_state = {
            limit = {
                NOT = {
                    OR = {
                        state = 608
                        state = 603
                        state = 613
                    }
                    has_variable = prc_temp_var
                }
                state_population_k > 36
            }
            add_to_variable = { PRC_state_famine_var = 1 }
        }
    }
}
PRC_glf_mitigate_famine_effect = {
    hidden_effect = {
        every_owned_state = {
            limit = {
                OR = {
                    state = 605
                    state = 601
                    state = 607
                    state = 606
                    state = 597
                }
            }
            add_to_variable = { PRC_state_famine_var = -3 }
            set_temp_variable = { prc_temp_var = 1 }
        }
        every_owned_state = {
            limit = {
                NOT = {
                    has_variable = prc_temp_var
                }
                OR = {
                    state = 283
                    state = 598
                    state = 603
                    state = 594
                    state = 283
                }
            }
            add_to_variable = { PRC_state_famine_var = -2 }
            set_temp_variable = { prc_temp_var = 1 }
        }
        every_owned_state = {
            limit = {
                NOT = {
                    OR = {
                        state = 608
                        state = 603
                        state = 613
                    }
                    has_variable = prc_temp_var
                }
                state_population_k > 36
            }
            add_to_variable = { PRC_state_famine_var = -0.8 }
        }
    }
}
PRC_GLF_focus_mission_effect = {
    if = {
        limit = {
            NOT = { has_completed_focus = PRC_50s_Empower_Local_Governments }
        }
        activate_mission = PRC_50s_Empower_Local_Governments_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_Empower_Local_Governments
            NOT = { has_completed_focus = PRC_50s_Promote_The_Pilot_Field_System }
        }
        activate_mission = PRC_50s_Promote_The_Pilot_Field_System_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_Promote_The_Pilot_Field_System
            NOT = { has_completed_focus = PRC_50s_Strengthen_The_Household_System }
        }
        activate_mission = PRC_50s_Strengthen_The_Household_System_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_Strengthen_The_Household_System
            NOT = { has_completed_focus = PRC_50s_Launch_Local_Industry }
        }
        activate_mission = PRC_50s_Launch_Local_Industry_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_Launch_Local_Industry
            NOT = { has_completed_focus = PRC_50s_Anti-waste_And_Anti-conservative_Campaign }
        }
        activate_mission = PRC_50s_Anti-waste_And_Anti-conservative_Campaign_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_Anti-waste_And_Anti-conservative_Campaign
            NOT = { has_completed_focus = PRC_50s_Bust_Technical_Myths }
        }
        activate_mission = PRC_50s_Bust_Technical_Myths_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_Bust_Technical_Myths
            NOT = { has_completed_focus = PRC_50s_Harness_Nature }
        }
        activate_mission = PRC_50s_Harness_Nature_mission
    }
    else_if = {
        limit = {
            OR = {
                has_completed_focus = PRC_50s_Dominate_Nature
                has_completed_focus = PRC_50s_Harness_Nature
            }
            NOT = { has_completed_focus = PRC_50s_Launch_A_Catch-up_Campaign }
        }
        activate_mission = PRC_50s_Launch_A_Catch-up_Campaign_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_Launch_A_Catch-up_Campaign
            NOT = { has_completed_focus = PRC_50s_Emphasis_on_Class_Struggle }
        }
        activate_mission = PRC_50s_Emphasis_on_Class_Struggle_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_Emphasis_on_Class_Struggle
            NOT = { has_completed_focus = PRC_50s_Launch_The_Heart_to_Heart_Campaign }
        }
        activate_mission = PRC_50s_Launch_The_Heart_to_Heart_Campaign_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_Launch_The_Heart_to_Heart_Campaign
            NOT = { has_completed_focus = PRC_50s_Increase_Food_Procurement }
        }
        activate_mission = PRC_50s_Increase_Food_Procurement_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_Increase_Food_Procurement
            NOT = { has_completed_focus = PRC_50s_Set_Targets_for_Hyper-industrialisation }
        }
        activate_mission = PRC_50s_Set_Targets_for_Hyper-industrialisation_mission
    }
    else_if = {
        limit = {
            OR = {
                has_completed_focus = PRC_50s_Agro-industrial_Double_Super_Campaign
                has_completed_focus = PRC_50s_Set_Targets_for_Hyper-industrialisation
            }
            NOT = { has_completed_focus = PRC_50s_National_Electrification_Campaign }
        }
        activate_mission = PRC_50s_National_Electrification_Campaign_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_National_Electrification_Campaign
            NOT = { has_completed_focus = PRC_50s_Sruggle_with_Guanchao_Faction }
        }
        activate_mission = PRC_50s_Sruggle_with_Guanchao_Faction_mission
    }
    else_if = {
        limit = {
            OR = {
                has_completed_focus = PRC_50s_Sruggle_with_Guanchao_Faction
                has_completed_focus = PRC_50s_Temporarily_Compress_Air
            }
            NOT = { has_completed_focus = PRC_50s_Control_Social_Corners }
        }
        activate_mission = PRC_50s_Control_Social_Corners_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_Control_Social_Corners
            NOT = { has_completed_focus = PRC_50s_Debate_with_The_Opposition }
        }
        activate_mission = PRC_50s_Debate_with_The_Opposition_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_Debate_with_The_Opposition
            NOT = { has_completed_focus = PRC_50s_The_Great_Leap_Forward }
        }
        activate_mission = PRC_50s_The_Great_Leap_Forward_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_The_Great_Leap_Forward
            NOT = { has_completed_focus = PRC_50s_Reinforce_Party_Control_over_Government }
        }
        activate_mission = PRC_50s_Reinforce_Party_Control_over_Government_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_Reinforce_Party_Control_over_Government
            NOT = { has_completed_focus = PRC_50s_Streamline_The_Central_Ministries_and_Commissions }
        }
        activate_mission = PRC_50s_Streamline_The_Central_Ministries_And_Commissions_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_Streamline_The_Central_Ministries_and_Commissions
            NOT = { has_completed_focus = PRC_50s_Integrated_Use_of_Food }
        }
        activate_mission = PRC_50s_Integrated_Use_of_Food_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_Integrated_Use_of_Food
            NOT = { has_completed_focus = PRC_50s_Encourage_An_Increase_in_Production }
        }
        activate_mission = PRC_50s_Encourage_An_Increase_in_Production_mission
    }
    else_if = {
        limit = {
            has_completed_focus =PRC_50s_Encourage_An_Increase_in_Production
            NOT = { has_completed_focus = PRC_50s_Great_Steelmaking_Movement }
        }
        activate_mission = PRC_50s_Great_Steelmaking_Movement_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_Great_Steelmaking_Movement
            NOT = { has_completed_focus = PRC_50s_People_s_Commune_Movement }
        }
        activate_mission = PRC_50s_People_s_Commune_Movement_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_People_s_Commune_Movement
            NOT = { has_completed_focus = PRC_50s_Break_Down_Individualism }
        }
        activate_mission = PRC_50s_Break_Down_Individualism_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_Break_Down_Individualism
            NOT = { has_completed_focus = PRC_50s_Free_Supply_System }
        }
        activate_mission = PRC_50s_Free_Supply_System_mission
    }
    else_if = {
        limit = {
            OR = {
                has_completed_focus = PRC_50s_Half_Wage_And_Half_Supply_System
                has_completed_focus = PRC_50s_Free_Supply_System
            }
            NOT = { has_completed_focus = PRC_50s_Raise_Expected_Targets }
        }
        activate_mission = PRC_50s_Raise_Expected_Targets_mission
    }
    else_if = {
        limit = {
            OR = {
                has_completed_focus = PRC_50s_Raise_Expected_Targets
                has_completed_focus = PRC_50s_Maintain_Original_Targets
            }
            NOT = { has_completed_focus = PRC_50s_Indigenous_Steelmaking }
        }
        activate_mission = PRC_50s_Indigenous_Steelmaking_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_Indigenous_Steelmaking
            NOT = { has_completed_focus = PRC_50s_Promote_The_Eight-character_Constitution }
        }
        activate_mission = PRC_50s_Promote_The_Eight-character_Constitution_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_Promote_The_Eight-character_Constitution
            NOT = { has_completed_focus = PRC_50s_Respond_to_Local_Dilemmas }
        }
        activate_mission = PRC_50s_Respond_to_Local_Dilemmas_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_Respond_to_Local_Dilemmas
            NOT = { has_completed_focus = PRC_50s_Protect_The_Spirit_of_Leap_Forward }
        }
        activate_mission = PRC_50s_Protect_The_Spirit_of_Leap_Forward_mission
    }
    else_if = {
        limit = {
            OR = {
                has_completed_focus = PRC_50s_Lower_Targets
                has_completed_focus = PRC_50s_Protect_The_Spirit_of_Leap_Forward
            }
            NOT = { has_completed_focus = PRC_50s_Liberate_The_Rural_Workforce }
        }
        activate_mission = PRC_50s_Liberate_The_Rural_Workforce_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_Liberate_The_Rural_Workforce
            NOT = { has_completed_focus = PRC_50s_Strengthen_The_Unified_Purchasing_And_Marketing }
        }
        activate_mission = PRC_50s_Strengthen_The_Unified_Purchasing_And_Marketing_mission
    }
    else_if = {
        limit = {
            OR = {
                has_completed_focus = PRC_50s_Strengthen_The_Unified_Purchasing_And_Marketing
                has_completed_focus = PRC_50s_Reduce_Agricultural_Scissor_Difference
            }
            NOT = { has_completed_focus = PRC_50s_Ensure_Food_Rations_for_Workers }
        }
        activate_mission = PRC_50s_Ensure_Food_Rations_for_Workers_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_Ensure_Food_Rations_for_Workers
            NOT = { has_completed_focus = PRC_50s_Set_up_Part-time_Schools }
        }
        activate_mission = PRC_50s_Set_up_Part-time_Schools_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_Set_up_Part-time_Schools
            NOT = { has_completed_focus = PRC_50s_Reduce_Production_Waste }
        }
        activate_mission = PRC_50s_Reduce_Production_Waste_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_Reduce_Production_Waste
            NOT = { has_completed_focus = PRC_50s_Prioritise_Urban_Food_Supply }
        }
        activate_mission = PRC_50s_Prioritise_Urban_Food_Supply_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_Protect_The_Spirit_of_Leap_Forward
            has_completed_focus = PRC_50s_Ensure_Food_Rations_for_Workers
            has_completed_focus = PRC_50s_Strengthen_The_Unified_Purchasing_And_Marketing
            OR = {
                has_completed_focus = PRC_50s_Ensure_Rural_Food_Security
                has_completed_focus = PRC_50s_Prioritise_Urban_Food_Supply
            }
            NOT = { has_completed_focus = PRC_50s_Campaign_to_Oppose_Share_out_in_Private_the_Harvests_They_Concealed }
        }
        activate_mission = PRC_50s_Campaign_to_Oppose_Share_out_in_Private_the_Harvests_They_Concealed_mission
    }
    else_if = {
        limit = {
            has_completed_focus = PRC_50s_Prioritise_Urban_Food_Supply
            has_completed_focus = PRC_50s_Campaign_to_Oppose_Share_out_in_Private_the_Harvests_They_Concealed
            NOT = { has_completed_focus = PRC_50s_Sudden_Acquisitions_of_Grain }
        }
        activate_mission = PRC_50s_Sudden_Acquisitions_of_Grain_mission
    }
}