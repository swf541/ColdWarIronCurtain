#Written by Killerrabbit and SWF541
#Optimized and Reworked by Angriest Bird
#for not oversizing the array for having both 2000 and 2017 values

##Mid Investment Boost
short_length_investment_influence_boost = {
	set_variable = {
		industry_total_ind = officeparknumber 
	}
	multiply_variable = {
		industry_total_ind = 2
	}
	add_to_variable = {
		industry_total_ind = num_of_civilian_factories
	}
	add_to_variable = {
		industry_total_ind = num_of_naval_factories
	}
	add_to_variable = {
		industry_total_ind = num_of_military_factories 
	}
	add_to_variable = {
		industry_total_ind = farmnumber
	}
	set_variable = {
		influence_modifier = 10
	}
	divide_variable = {
		influence_modifier = industry_total_ind
	}
	clamp_variable = {
		var = influence_modifier
		min = 0.2
		max = 1
	}
	set_variable = {
		influence_change = 8
	}
	multiply_variable = {
		influence_change = influence_modifier
	}
	set_temp_variable = { percent_change = influence_change }
    set_temp_variable = { tag_index = ROOT.id }
    set_temp_variable = { influence_target = THIS.id }
    change_influence_percentage = yes
}

medium_length_investment_influence_boost = {
	set_variable = {
		industry_total_ind = officeparknumber 
	}
	multiply_variable = {
		industry_total_ind = 2
	}
	add_to_variable = {
		industry_total_ind = num_of_civilian_factories
	}
	add_to_variable = {
		industry_total_ind = num_of_naval_factories
	}
	add_to_variable = {
		industry_total_ind = num_of_military_factories 
	}
	add_to_variable = {
		industry_total_ind = farmnumber
	}
	set_variable = {
		influence_modifier = 10
	}
	divide_variable = {
		influence_modifier = industry_total_ind
	}
	clamp_variable = {
		var = influence_modifier
		min = 0.2
		max = 1
	}
	set_variable = {
		influence_change = 5
	}
	multiply_variable = {
		influence_change = influence_modifier
	}
	set_temp_variable = { percent_change = influence_change }
    set_temp_variable = { tag_index = ROOT.id }
    set_temp_variable = { influence_target = THIS.id }
    change_influence_percentage = yes
}
long_length_investment_influence_boost = {
	set_variable = {
		industry_total_ind = officeparknumber 
	}
	multiply_variable = {
		industry_total_ind = 2
	}
	add_to_variable = {
		industry_total_ind = num_of_civilian_factories
	}
	add_to_variable = {
		industry_total_ind = num_of_naval_factories
	}
	add_to_variable = {
		industry_total_ind = num_of_military_factories 
	}
	add_to_variable = {
		industry_total_ind = farmnumber
	}
	set_variable = {
		influence_modifier = 10
	}
	divide_variable = {
		influence_modifier = industry_total_ind
	}
	clamp_variable = {
		var = influence_modifier
		min = 0.2
		max = 1
	}
	set_variable = {
		influence_change = 8
	}
	multiply_variable = {
		influence_change = influence_modifier
	}
	set_temp_variable = { percent_change = influence_change }
    set_temp_variable = { tag_index = ROOT.id }
    set_temp_variable = { influence_target = THIS.id }
    change_influence_percentage = yes
}

###COMPENDIUM
#Tag Specific are near the bottom of the generic functions. Relevant information
init_influence = {
	clear_array = influence_array_val
	clear_array = influence_array

}

check_uar_influence = {
	if = {
		limit = { tag = ALG }
		set_variable = { egypt_id = EGY.id }
		if = {
			limit = {
				check_variable = { influence_array^0 = egypt_id }
			}	
			set_variable = { egy_placement = 0 }
		}
		if = {
			limit = {
				check_variable = { influence_array^1 = egypt_id } 
			}	
			set_variable = { egy_placement = 1 }
		}
		if = {
			limit = {
				check_variable = { influence_array^2 = egypt_id }
			}	
			set_variable = { egy_placement = 2 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^3 = egypt_id }
			}	
			set_variable = { egy_placement = 3 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^4 = egypt_id } 
			}	
			set_variable = { egy_placement = 4 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^5 = egypt_id }
			}	
			set_variable = { egy_placement = 5 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^6 = egypt_id }
			}	
			set_variable = { egy_placement = 6 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^7 = egypt_id }
			}	
			set_variable = { egy_placement = 7 }
		}
	}	
	if = {
		limit = { tag = BHR }
		set_variable = { egypt_id = EGY.id }
		if = {
			limit = {
				check_variable = { influence_array^0 = egypt_id }
			}	
			set_variable = { egy_placement = 0 }
		}
		if = {
			limit = {
				check_variable = { influence_array^1 = egypt_id } 
			}	
			set_variable = { egy_placement = 1 }
		}
		if = {
			limit = {
				check_variable = { influence_array^2 = egypt_id }
			}	
			set_variable = { egy_placement = 2 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^3 = egypt_id }
			}	
			set_variable = { egy_placement = 3 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^4 = egypt_id } 
			}	
			set_variable = { egy_placement = 4 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^5 = egypt_id }
			}	
			set_variable = { egy_placement = 5 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^6 = egypt_id }
			}	
			set_variable = { egy_placement = 6 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^7 = egypt_id }
			}	
			set_variable = { egy_placement = 7 }
		}
	}	
	if = {
		limit = { tag = IRQ }
		set_variable = { egypt_id = EGY.id }
		if = {
			limit = {
				check_variable = { influence_array^0 = egypt_id }
			}	
			set_variable = { egy_placement = 0 }
		}
		if = {
			limit = {
				check_variable = { influence_array^1 = egypt_id } 
			}	
			set_variable = { egy_placement = 1 }
		}
		if = {
			limit = {
				check_variable = { influence_array^2 = egypt_id }
			}	
			set_variable = { egy_placement = 2 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^3 = egypt_id }
			}	
			set_variable = { egy_placement = 3 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^4 = egypt_id } 
			}	
			set_variable = { egy_placement = 4 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^5 = egypt_id }
			}	
			set_variable = { egy_placement = 5 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^6 = egypt_id }
			}	
			set_variable = { egy_placement = 6 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^7 = egypt_id }
			}	
			set_variable = { egy_placement = 7 }
		}
	}	
	
	if = {
		limit = {
			tag = JOR
		}
		set_variable = { egypt_id = EGY.id }
		if = {
			limit = {
				check_variable = { influence_array^0 = egypt_id }
			}	
			set_variable = { egy_placement = 0 }
		}
		if = {
			limit = {
				check_variable = { influence_array^1 = egypt_id } 
			}	
			set_variable = { egy_placement = 1 }
		}
		if = {
			limit = {
				check_variable = { influence_array^2 = egypt_id }
			}	
			set_variable = { egy_placement = 2 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^3 = egypt_id }
			}	
			set_variable = { egy_placement = 3 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^4 = egypt_id } 
			}	
			set_variable = { egy_placement = 4 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^5 = egypt_id }
			}	
			set_variable = { egy_placement = 5 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^6 = egypt_id }
			}	
			set_variable = { egy_placement = 6 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^7 = egypt_id }
			}	
			set_variable = { egy_placement = 7 }
		}
	}	

	if = {
		limit = { tag = KUW }
		set_variable = { egypt_id = EGY.id }
		if = {
			limit = {
				check_variable = { influence_array^0 = egypt_id }
			}	
			set_variable = { egy_placement = 0 }
		}
		if = {
			limit = {
				check_variable = { influence_array^1 = egypt_id } 
			}	
			set_variable = { egy_placement = 1 }
		}
		if = {
			limit = {
				check_variable = { influence_array^2 = egypt_id }
			}	
			set_variable = { egy_placement = 2 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^3 = egypt_id }
			}	
			set_variable = { egy_placement = 3 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^4 = egypt_id } 
			}	
			set_variable = { egy_placement = 4 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^5 = egypt_id }
			}	
			set_variable = { egy_placement = 5 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^6 = egypt_id }
			}	
			set_variable = { egy_placement = 6 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^7 = egypt_id }
			}	
			set_variable = { egy_placement = 7 }
		}
	}	
	
	if = {
		limit = { tag = LEB }
		set_variable = { egypt_id = EGY.id }
		if = {
			limit = {
				check_variable = { influence_array^0 = egypt_id }
			}	
			set_variable = { egy_placement = 0 }
		}
		if = {
			limit = {
				check_variable = { influence_array^1 = egypt_id } 
			}	
			set_variable = { egy_placement = 1 }
		}
		if = {
			limit = {
				check_variable = { influence_array^2 = egypt_id }
			}	
			set_variable = { egy_placement = 2 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^3 = egypt_id }
			}	
			set_variable = { egy_placement = 3 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^4 = egypt_id } 
			}	
			set_variable = { egy_placement = 4 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^5 = egypt_id }
			}	
			set_variable = { egy_placement = 5 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^6 = egypt_id }
			}	
			set_variable = { egy_placement = 6 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^7 = egypt_id }
			}	
			set_variable = { egy_placement = 7 }
		}
	}	
	
	if = {
		limit = { tag = LBA }
		set_variable = { egypt_id = EGY.id }
		if = {
			limit = {
				check_variable = { influence_array^0 = egypt_id }
			}	
			set_variable = { egy_placement = 0 }
		}
		if = {
			limit = {
				check_variable = { influence_array^1 = egypt_id } 
			}	
			set_variable = { egy_placement = 1 }
		}
		if = {
			limit = {
				check_variable = { influence_array^2 = egypt_id }
			}	
			set_variable = { egy_placement = 2 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^3 = egypt_id }
			}	
			set_variable = { egy_placement = 3 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^4 = egypt_id } 
			}	
			set_variable = { egy_placement = 4 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^5 = egypt_id }
			}	
			set_variable = { egy_placement = 5 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^6 = egypt_id }
			}	
			set_variable = { egy_placement = 6 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^7 = egypt_id }
			}	
			set_variable = { egy_placement = 7 }
		}
	}	
	
	if = {
		limit = { tag = MRT }
		set_variable = { egypt_id = EGY.id }
		if = {
			limit = {
				check_variable = { influence_array^0 = egypt_id }
			}	
			set_variable = { egy_placement = 0 }
		}
		if = {
			limit = {
				check_variable = { influence_array^1 = egypt_id } 
			}	
			set_variable = { egy_placement = 1 }
		}
		if = {
			limit = {
				check_variable = { influence_array^2 = egypt_id }
			}	
			set_variable = { egy_placement = 2 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^3 = egypt_id }
			}	
			set_variable = { egy_placement = 3 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^4 = egypt_id } 
			}	
			set_variable = { egy_placement = 4 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^5 = egypt_id }
			}	
			set_variable = { egy_placement = 5 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^6 = egypt_id }
			}	
			set_variable = { egy_placement = 6 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^7 = egypt_id }
			}	
			set_variable = { egy_placement = 7 }
		}
	}	
	
	if = {
		limit = { tag = MOR }
		set_variable = { egypt_id = EGY.id }
		if = {
			limit = {
				check_variable = { influence_array^0 = egypt_id }
			}	
			set_variable = { egy_placement = 0 }
		}
		if = {
			limit = {
				check_variable = { influence_array^1 = egypt_id } 
			}	
			set_variable = { egy_placement = 1 }
		}
		if = {
			limit = {
				check_variable = { influence_array^2 = egypt_id }
			}	
			set_variable = { egy_placement = 2 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^3 = egypt_id }
			}	
			set_variable = { egy_placement = 3 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^4 = egypt_id } 
			}	
			set_variable = { egy_placement = 4 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^5 = egypt_id }
			}	
			set_variable = { egy_placement = 5 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^6 = egypt_id }
			}	
			set_variable = { egy_placement = 6 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^7 = egypt_id }
			}	
			set_variable = { egy_placement = 7 }
		}
	}	
	
	if = {
		limit = { tag = OMA }
		set_variable = { egypt_id = EGY.id }
		if = {
			limit = {
				check_variable = { influence_array^0 = egypt_id }
			}	
			set_variable = { egy_placement = 0 }
		}
		if = {
			limit = {
				check_variable = { influence_array^1 = egypt_id } 
			}	
			set_variable = { egy_placement = 1 }
		}
		if = {
			limit = {
				check_variable = { influence_array^2 = egypt_id }
			}	
			set_variable = { egy_placement = 2 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^3 = egypt_id }
			}	
			set_variable = { egy_placement = 3 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^4 = egypt_id } 
			}	
			set_variable = { egy_placement = 4 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^5 = egypt_id }
			}	
			set_variable = { egy_placement = 5 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^6 = egypt_id }
			}	
			set_variable = { egy_placement = 6 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^7 = egypt_id }
			}	
			set_variable = { egy_placement = 7 }
		}
	}	
	
	if = {
		limit = { tag = PAL }
		set_variable = { egypt_id = EGY.id }
		if = {
			limit = {
				check_variable = { influence_array^0 = egypt_id }
			}	
			set_variable = { egy_placement = 0 }
		}
		if = {
			limit = {
				check_variable = { influence_array^1 = egypt_id } 
			}	
			set_variable = { egy_placement = 1 }
		}
		if = {
			limit = {
				check_variable = { influence_array^2 = egypt_id }
			}	
			set_variable = { egy_placement = 2 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^3 = egypt_id }
			}	
			set_variable = { egy_placement = 3 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^4 = egypt_id } 
			}	
			set_variable = { egy_placement = 4 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^5 = egypt_id }
			}	
			set_variable = { egy_placement = 5 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^6 = egypt_id }
			}	
			set_variable = { egy_placement = 6 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^7 = egypt_id }
			}	
			set_variable = { egy_placement = 7 }
		}
	}	
	
	if = {
		limit = { tag = QAT }
		set_variable = { egypt_id = EGY.id }
		if = {
			limit = {
				check_variable = { influence_array^0 = egypt_id }
			}	
			set_variable = { egy_placement = 0 }
		}
		if = {
			limit = {
				check_variable = { influence_array^1 = egypt_id } 
			}	
			set_variable = { egy_placement = 1 }
		}
		if = {
			limit = {
				check_variable = { influence_array^2 = egypt_id }
			}	
			set_variable = { egy_placement = 2 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^3 = egypt_id }
			}	
			set_variable = { egy_placement = 3 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^4 = egypt_id } 
			}	
			set_variable = { egy_placement = 4 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^5 = egypt_id }
			}	
			set_variable = { egy_placement = 5 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^6 = egypt_id }
			}	
			set_variable = { egy_placement = 6 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^7 = egypt_id }
			}	
			set_variable = { egy_placement = 7 }
		}
	}	
	
	if = {
		limit = { tag = SAU }
		set_variable = { egypt_id = EGY.id }
		if = {
			limit = {
				check_variable = { influence_array^0 = egypt_id }
			}	
			set_variable = { egy_placement = 0 }
		}
		if = {
			limit = {
				check_variable = { influence_array^1 = egypt_id } 
			}	
			set_variable = { egy_placement = 1 }
		}
		if = {
			limit = {
				check_variable = { influence_array^2 = egypt_id }
			}	
			set_variable = { egy_placement = 2 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^3 = egypt_id }
			}	
			set_variable = { egy_placement = 3 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^4 = egypt_id } 
			}	
			set_variable = { egy_placement = 4 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^5 = egypt_id }
			}	
			set_variable = { egy_placement = 5 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^6 = egypt_id }
			}	
			set_variable = { egy_placement = 6 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^7 = egypt_id }
			}	
			set_variable = { egy_placement = 7 }
		}
	}	
	
	if = {
		limit = { tag = SOM }
		set_variable = { egypt_id = EGY.id }
		if = {
			limit = {
				check_variable = { influence_array^0 = egypt_id }
			}	
			set_variable = { egy_placement = 0 }
		}
		if = {
			limit = {
				check_variable = { influence_array^1 = egypt_id } 
			}	
			set_variable = { egy_placement = 1 }
		}
		if = {
			limit = {
				check_variable = { influence_array^2 = egypt_id }
			}	
			set_variable = { egy_placement = 2 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^3 = egypt_id }
			}	
			set_variable = { egy_placement = 3 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^4 = egypt_id } 
			}	
			set_variable = { egy_placement = 4 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^5 = egypt_id }
			}	
			set_variable = { egy_placement = 5 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^6 = egypt_id }
			}	
			set_variable = { egy_placement = 6 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^7 = egypt_id }
			}	
			set_variable = { egy_placement = 7 }
		}
	}	
	
	if = {
		limit = { tag = SUD }
		set_variable = { egypt_id = EGY.id }
		if = {
			limit = {
				check_variable = { influence_array^0 = egypt_id }
			}	
			set_variable = { egy_placement = 0 }
		}
		if = {
			limit = {
				check_variable = { influence_array^1 = egypt_id } 
			}	
			set_variable = { egy_placement = 1 }
		}
		if = {
			limit = {
				check_variable = { influence_array^2 = egypt_id }
			}	
			set_variable = { egy_placement = 2 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^3 = egypt_id }
			}	
			set_variable = { egy_placement = 3 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^4 = egypt_id } 
			}	
			set_variable = { egy_placement = 4 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^5 = egypt_id }
			}	
			set_variable = { egy_placement = 5 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^6 = egypt_id }
			}	
			set_variable = { egy_placement = 6 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^7 = egypt_id }
			}	
			set_variable = { egy_placement = 7 }
		}
	}	
	
	if = {
		limit = { tag = SYR }
		set_variable = { egypt_id = EGY.id }
		if = {
			limit = {
				check_variable = { influence_array^0 = egypt_id }
			}	
			set_variable = { egy_placement = 0 }
		}
		if = {
			limit = {
				check_variable = { influence_array^1 = egypt_id } 
			}	
			set_variable = { egy_placement = 1 }
		}
		if = {
			limit = {
				check_variable = { influence_array^2 = egypt_id }
			}	
			set_variable = { egy_placement = 2 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^3 = egypt_id }
			}	
			set_variable = { egy_placement = 3 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^4 = egypt_id } 
			}	
			set_variable = { egy_placement = 4 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^5 = egypt_id }
			}	
			set_variable = { egy_placement = 5 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^6 = egypt_id }
			}	
			set_variable = { egy_placement = 6 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^7 = egypt_id }
			}	
			set_variable = { egy_placement = 7 }
		}
	}	
	
	if = {
		limit = { tag = TUN }
		set_variable = { egypt_id = EGY.id }
		if = {
			limit = {
				check_variable = { influence_array^0 = egypt_id }
			}	
			set_variable = { egy_placement = 0 }
		}
		if = {
			limit = {
				check_variable = { influence_array^1 = egypt_id } 
			}	
			set_variable = { egy_placement = 1 }
		}
		if = {
			limit = {
				check_variable = { influence_array^2 = egypt_id }
			}	
			set_variable = { egy_placement = 2 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^3 = egypt_id }
			}	
			set_variable = { egy_placement = 3 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^4 = egypt_id } 
			}	
			set_variable = { egy_placement = 4 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^5 = egypt_id }
			}	
			set_variable = { egy_placement = 5 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^6 = egypt_id }
			}	
			set_variable = { egy_placement = 6 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^7 = egypt_id }
			}	
			set_variable = { egy_placement = 7 }
		}
	}	
	
	if = {
		limit = { tag = UAE }
		set_variable = { egypt_id = EGY.id }
		if = {
			limit = {
				check_variable = { influence_array^0 = egypt_id }
			}	
			set_variable = { egy_placement = 0 }
		}
		if = {
			limit = {
				check_variable = { influence_array^1 = egypt_id } 
			}	
			set_variable = { egy_placement = 1 }
		}
		if = {
			limit = {
				check_variable = { influence_array^2 = egypt_id }
			}	
			set_variable = { egy_placement = 2 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^3 = egypt_id }
			}	
			set_variable = { egy_placement = 3 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^4 = egypt_id } 
			}	
			set_variable = { egy_placement = 4 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^5 = egypt_id }
			}	
			set_variable = { egy_placement = 5 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^6 = egypt_id }
			}	
			set_variable = { egy_placement = 6 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^7 = egypt_id }
			}	
			set_variable = { egy_placement = 7 }
		}
	}	
	
	if = {
		limit = { tag = WES }
		set_variable = { egypt_id = EGY.id }
		if = {
			limit = {
				check_variable = { influence_array^0 = egypt_id }
			}	
			set_variable = { egy_placement = 0 }
		}
		if = {
			limit = {
				check_variable = { influence_array^1 = egypt_id } 
			}	
			set_variable = { egy_placement = 1 }
		}
		if = {
			limit = {
				check_variable = { influence_array^2 = egypt_id }
			}	
			set_variable = { egy_placement = 2 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^3 = egypt_id }
			}	
			set_variable = { egy_placement = 3 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^4 = egypt_id } 
			}	
			set_variable = { egy_placement = 4 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^5 = egypt_id }
			}	
			set_variable = { egy_placement = 5 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^6 = egypt_id }
			}	
			set_variable = { egy_placement = 6 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^7 = egypt_id }
			}	
			set_variable = { egy_placement = 7 }
		}
	}	
	
	if = {
		limit = { tag = DRY }
		set_variable = { egypt_id = EGY.id }
		if = {
			limit = {
				check_variable = { influence_array^0 = egypt_id }
			}	
			set_variable = { egy_placement = 0 }
		}
		if = {
			limit = {
				check_variable = { influence_array^1 = egypt_id } 
			}	
			set_variable = { egy_placement = 1 }
		}
		if = {
			limit = {
				check_variable = { influence_array^2 = egypt_id }
			}	
			set_variable = { egy_placement = 2 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^3 = egypt_id }
			}	
			set_variable = { egy_placement = 3 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^4 = egypt_id } 
			}	
			set_variable = { egy_placement = 4 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^5 = egypt_id }
			}	
			set_variable = { egy_placement = 5 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^6 = egypt_id }
			}	
			set_variable = { egy_placement = 6 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^7 = egypt_id }
			}	
			set_variable = { egy_placement = 7 }
		}
	}	
	
	if = {
		limit = { tag = YEM }
		set_variable = { egypt_id = EGY.id }
		if = {
			limit = {
				check_variable = { influence_array^0 = egypt_id }
			}	
			set_variable = { egy_placement = 0 }
		}
		if = {
			limit = {
				check_variable = { influence_array^1 = egypt_id } 
			}	
			set_variable = { egy_placement = 1 }
		}
		if = {
			limit = {
				check_variable = { influence_array^2 = egypt_id }
			}	
			set_variable = { egy_placement = 2 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^3 = egypt_id }
			}	
			set_variable = { egy_placement = 3 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^4 = egypt_id } 
			}	
			set_variable = { egy_placement = 4 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^5 = egypt_id }
			}	
			set_variable = { egy_placement = 5 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^6 = egypt_id }
			}	
			set_variable = { egy_placement = 6 }
		}
		if = {
			limit = {
				check_variable = { influence_array_val^7 = egypt_id }
			}	
			set_variable = { egy_placement = 7 }
		}
	}
	#IMF Section
	set_variable = { IMF_id = GER.id }
	if = {
		limit = {
			check_variable = { influence_array^0 = IMF_id }
		}	
		set_variable = { IMF_POSITION = 0 }
	}
	else_if = {
		limit = {
			check_variable = { influence_array^1 = IMF_id } 
		}	
		set_variable = { IMF_POSITION = 1 }
	}
	else_if = {
		limit = {
			check_variable = { influence_array^2 = IMF_id }
		}	
		set_variable = { IMF_POSITION = 2 }
	}
	else_if = {
		limit = {
			check_variable = { influence_array_val^3 = IMF_id }
		}	
		set_variable = { IMF_POSITION = 3 }
	}
	else_if = {
		limit = {
			check_variable = { influence_array_val^4 = IMF_id } 
		}	
		set_variable = { IMF_POSITION = 4 }
	}
	else_if = {
		limit = {
			check_variable = { influence_array_val^5 = IMF_id }
		}	
		set_variable = { IMF_POSITION = 5 }
	}
	else_if = {
		limit = {
			check_variable = { influence_array_val^6 = IMF_id }
		}	
		set_variable = { IMF_POSITION = 6 }
	}
	else_if = {
		limit = {
			check_variable = { influence_array_val^7 = IMF_id }
		}	
		set_variable = { IMF_POSITION = 7 }
	}				
	else_if = {
		limit = {
			check_variable = { influence_array_val^8 = IMF_id }
		}	
		set_variable = { IMF_POSITION = 8 }
	}		
	else_if = {
		limit = {
			check_variable = { influence_array_val^9 = IMF_id }
		}	
		set_variable = { IMF_POSITION = 9 }
	}	
	else_if = {
		limit = {
			check_variable = { influence_array_val^10 = IMF_id }
		}	
		set_variable = { IMF_POSITION = 10 }
	}	
	else_if = {
		limit = {
			check_variable = { influence_array_val^11 = IMF_id }
		}	
		set_variable = { IMF_POSITION = 11 }
	}	
	else_if = {
		limit = {
			check_variable = { influence_array_val^12 = IMF_id }
		}	
		set_variable = { IMF_POSITION = 12 }
	}	
	else_if = {
		limit = {
			check_variable = { influence_array_val^13 = IMF_id }
		}	
		set_variable = { IMF_POSITION = 13 }
	}	
	else_if = {
		limit = {
			check_variable = { influence_array_val^14 = IMF_id }
		}	
		set_variable = { IMF_POSITION = 14 }
	}	
	else_if = {
		limit = {
			check_variable = { influence_array_val^15 = IMF_id }
		}	
		set_variable = { IMF_POSITION = 15 }
	}	
	else = {
		set_variable = { IMF_POSITION = 100 }
	}
}

startup_influence = {
	check_uar_influence = yes
	sort_influence = yes #the rest is on_startup
}
recalculate_influence = {
	hidden_effect = {
		check_uar_influence = yes
		sort_influence = yes
		calculate_influence_percentage = yes
		delete_influencer_check = yes
		round_variable = influence_array_val^0
		round_variable = influence_array_val^1
		round_variable = influence_array_val^2
		round_variable = influence_array_val^3
		round_variable = influence_array_val^4
		round_variable = influence_array_val^5
		round_variable = influence_array_val^6
		round_variable = domestic_influence_amount
	}
}
# sort_influence:
# The sort influence method handles the sorting and sequential placement of values in the influence array
sort_influence = {
	# Creation of temp arrays.
	# The arrays are "copied" from influence_array and influence_array_val for sorting
	resize_temp_array = {
		array = influence_array_val_temp
		size = influence_array_val^num
	}
	resize_temp_array = {
		array = influence_array_temp
		size = influence_array_val^num
	}
	# Sort the values by largest influencer
	for_loop_effect = {
		end = influence_array_val^num
		value = v
		find_highest_in_array = {
			array = influence_array_val
			value = max
			index = max_index
		}
		set_temp_variable = { influence_array_val_temp^v = max } #sets biggest at the earliest available position
		set_temp_variable = { influence_array_temp^v = influence_array^max_index } #sets biggest TAG at the earliest available position
		set_variable = { influence_array_val^max_index = -1 } #removes it from selection
	}

	# Clears the Values
	init_influence = yes

	set_temp_variable = { influence_total = 0 }
	# Restores destroyed arrays in the above process - i.e. if they were deleted due to being less then 1%
	for_each_loop = {
		array = influence_array_val_temp
		add_to_array = { influence_array_val = v }
		add_to_temp_variable = { influence_total = v }
	}
	add_to_temp_variable = { influence_total = domestic_influence_amount }
	for_each_loop = {
		array = influence_array_temp
		add_to_array = { influence_array = v }
	}
	clear_temp_array = influence_array_val_temp
	clear_temp_array = influence_array_temp

	set_temp_variable = { new_influence_scalar = 100 }
	divide_temp_variable = { new_influence_scalar = influence_total }
	multiply_variable = { domestic_influence_amount = new_influence_scalar }
	clamp_variable = { var = domestic_influence_amount max = 100 min = 0 }
	for_each_loop = {
		array = influence_array_val
		value = v
		index = i
		multiply_variable = { influence_array_val^i = new_influence_scalar }
		clamp_variable = { var = influence_array_val^i max = 100 min = 0 }
	}

	add_to_temp_variable = { new_influence_total = domestic_influence_amount }
	for_each_loop = {
		array = influence_array_val
		value = v
		index = i
		add_to_temp_variable = { new_influence_total = v }
	}
	#log = "[Root.GetTag]: new_influence_total [?new_influence_total]"

	if = { limit = { NOT = { check_variable = { new_influence_total = 100 } } }
		set_temp_variable = { difference = 100 }
		#log = "[Root.GetTag]: difference [?difference]"
		subtract_from_temp_variable = { difference = new_influence_total }
		add_to_variable = { domestic_influence_amount = difference }
	}
}

calculate_influence_percentage = {
	set_temp_variable = { influence_democratic = 0 }
	set_temp_variable = { influence_neutrality = 0 }
	set_temp_variable = { influence_communism = 0 }
	set_temp_variable = { influence_nationalist = 0 }
	set_temp_variable = { influence_fascism = 0 }
	set_temp_variable = { influence_conservative = 0 }
	set_temp_variable = { influence_Liberal_Conservatism = 0 }
	set_temp_variable = { influence_Christian_Democratic = 0 }
	set_temp_variable = { influence_socialist = 0 }
	set_temp_variable = { influence_Social_Democratic = 0 }
	set_temp_variable = { influence_Social_Liberalism = 0 }
	set_temp_variable = { influence_centrist = 0 }
	set_temp_variable = { influence_liberal = 0 }
	set_temp_variable = { influence_trotskyism = 0 }
	set_temp_variable = { influence_maoism = 0 }
	set_temp_variable = { influence_monarchism = 0 }
	set_temp_variable = { influence_islamism = 0 }
	set_temp_variable = { influence_radical_shiaism = 0 }
	set_temp_variable = { influence_Salafism = 0 }



	for_loop_effect = {
		end = influence_array_val^num
		if = {
			limit = { var:influence_array^v = { has_government = democratic } }
			add_to_temp_variable = { influence_democratic = influence_array_val^v }
		}
		else_if = {
			limit = { var:influence_array^v = { has_government = neutrality } }
			add_to_temp_variable = { influence_neutrality = influence_array_val^v }
		}
		else_if = {
			limit = { var:influence_array^v = { has_government = communism } }
			add_to_temp_variable = { influence_communism = influence_array_val^v }
		}
		else_if = {
			limit = { var:influence_array^v = { has_government = nationalist } }
			add_to_temp_variable = { influence_nationalist = influence_array_val^v }
		}
		else_if = {
			limit = { var:influence_array^v = { has_government = fascism } }
			add_to_temp_variable = { influence_fascism = influence_array_val^v }
		}
        else_if = {
            limit = { var:influence_array^v = { has_government = conservative } }
            add_to_temp_variable = { influence_conservative = influence_array_val^v }
        }
        else_if = {
            limit = { var:influence_array^v = { has_government = Liberal_Conservatism } }
            add_to_temp_variable = { influence_Liberal_Conservatism = influence_array_val^v }
        }
        else_if = {
            limit = { var:influence_array^v = { has_government = Christian_Democratic } }
            add_to_temp_variable = { influence_Christian_Democratic = influence_array_val^v }
        }
        else_if = {
            limit = { var:influence_array^v = { has_government = socialist } }
            add_to_temp_variable = { influence_socialist = influence_array_val^v }
        }
        else_if = {
            limit = { var:influence_array^v = { has_government = Social_Democratic } }
            add_to_temp_variable = { influence_Social_Democratic = influence_array_val^v }
        }
        else_if = {
            limit = { var:influence_array^v = { has_government = Social_Liberalism } }
            add_to_temp_variable = { influence_Social_Liberalism = influence_array_val^v }
        }
        else_if = {
            limit = { var:influence_array^v = { has_government = centrist } }
            add_to_temp_variable = { influence_centrist = influence_array_val^v }
        }
        else_if = {
            limit = { var:influence_array^v = { has_government = liberal } }
            add_to_temp_variable = { influence_liberal = influence_array_val^v }
        }
        else_if = {
            limit = { var:influence_array^v = { has_government = trotskyism } }
            add_to_temp_variable = { influence_trotskyism = influence_array_val^v }
        }
        else_if = {
            limit = { var:influence_array^v = { has_government = maoism } }
            add_to_temp_variable = { influence_maoism = influence_array_val^v }
        }
        else_if = {
            limit = { var:influence_array^v = { has_government = monarchism } }
            add_to_temp_variable = { influence_monarchism = influence_array_val^v }
        }
        else_if = {
            limit = { var:influence_array^v = { has_government = islamism } }
            add_to_temp_variable = { influence_islamism = influence_array_val^v }
        }
        else_if = {
            limit = { var:influence_array^v = { has_government = democratic } }
            add_to_temp_variable = { influence_radical_shiaism = influence_array_val^v }
        }
        else_if = {
            limit = { var:influence_array^v = { has_government = Salafism } }
            add_to_temp_variable = { influence_Salafism = influence_array_val^v }
        }
	}

	## see ideology_drifts.txt: ###
	#clear_influence_count_ideas = yes

	#if = { limit = { check_variable = { influence_democratic > 0.04 } } reset_democratic_influence_ideas = yes }
	#if = { limit = { check_variable = { influence_neutrality > 0.04 } } reset_neutrality_influence_ideas = yes }
	#if = { limit = { check_variable = { influence_communism > 0.04 } } reset_communism_influence_ideas = yes }
	#if = { limit = { check_variable = { influence_nationalist > 0.04 } } reset_nationalist_influence_ideas = yes }
	#if = { limit = { check_variable = { influence_fascism > 0.04 } } reset_fascism_influence_ideas = yes }
    #if = { limit = { check_variable = { influence_conservative > 0.04 } } reset_conservative_influence_ideas = yes }
    #if = { limit = { check_variable = { influence_Liberal_Conservatism > 0.04 } } reset_Liberal_Conservatism_influence_ideas = yes }
    #if = { limit = { check_variable = { influence_Christian_Democratic > 0.04 } } reset_Christian_Democratic_influence_ideas = yes }
    #if = { limit = { check_variable = { influence_socialist > 0.04 } } reset_socialist_influence_ideas = yes }
    #if = { limit = { check_variable = { influence_Social_Democratic > 0.04 } } reset_Social_Democratic_influence_ideas = yes }
    #if = { limit = { check_variable = { influence_Social_Liberalism > 0.04 } } reset_Social_Liberalism_influence_ideas = yes }
    #if = { limit = { check_variable = { influence_centrist > 0.04 } } reset_centrist_influence_ideas = yes }
    #if = { limit = { check_variable = { influence_liberal > 0.04 } } reset_liberal_influence_ideas = yes }
    #if = { limit = { check_variable = { influence_trotskyism > 0.04 } } reset_trotskyism_influence_ideas = yes }
    #if = { limit = { check_variable = { influence_maoism > 0.04 } } reset_maoism_influence_ideas = yes }
    #if = { limit = { check_variable = { influence_monarchism > 0.04 } } reset_monarchism_influence_ideas = yes }
    #if = { limit = { check_variable = { influence_islamism > 0.04 } } reset_islamism_influence_ideas = yes }
    #if = { limit = { check_variable = { influence_radical_shiaism > 0.04 } } reset_radical_shiaism_influence_ideas = yes }
    #if = { limit = { check_variable = { influence_Salafism > 0.04 } } reset_Salafism_influence_ideas = yes }
}



### Assign target for hostile influence ###

hostile_influence_target = {

}

### Actions ###

spread_influence = {
	PREV = { add_political_power = -80 }

	set_temp_variable = { percent_change = 2 }
	set_temp_variable = { tag_index = PREV.id }
	set_temp_variable = { influence_target = THIS.id }
	change_influence_percentage = yes
}

make_puppet_action = {
	#eventually remove explotation idea (shouldn't double up)
	for_loop_effect = {
		end = influence_array^num
		value = v

		meta_effect = {
			text = {
				remove_ideas = [THISTAG]_tribute_idea
			}
			THISTAG = "[?var:influence_array^v.GetTag]"
		}
	}

	PREV = {
		set_autonomy = {
			target = PREV
			autonomy_state = autonomy_puppet
			freedom_level = 0.5
		}
		add_named_threat = { threat = 2 name = created_puppet_loc }
	}
	every_neighbor_country = {
		add_opinion_modifier = { target = PREV modifier = puppeted_neighbor }
	}
}

economic_exploitation_action = {
	meta_effect = {
		text = {
			add_ideas = [ROOTTAG]_tribute_idea
		}
		ROOTTAG = "[?var:influence_array^0.GetTag]"
	}

	#Remove 10% influence
	# Remove 10% Influence
	set_temp_variable = { percent_change = -10 }
	set_temp_variable = { tag_index = PREV.id }
	set_temp_variable = { influence_target = THIS.id }
	change_influence_percentage = yes

	#Opinion Modifiers
	add_opinion_modifier = { target = PREV modifier = exploiter }
	every_neighbor_country = {
		add_opinion_modifier = { target = PREV modifier = exploiter_neighbor }
	}
}



delete_influencer_check = {
	if = {
		limit = {
			check_variable = { influence_array_val^0 < 0.01 }
			check_variable = { influence_array^0 > 0 } #Index 1 - Biggest Influencer
		}
		remove_from_array = { array = influence_array index = 0 }
		remove_from_array = { array = influence_array_val index = 0 }
	}
	if = {
		limit = {
			check_variable = { influence_array_val^1 < 0.01 }
			check_variable = { influence_array^1 > 0 } #Index 2 - Second Largest Influencer
		}
		remove_from_array = { array = influence_array index = 1 }
		remove_from_array = { array = influence_array_val index = 1 }
	}
	if = {
		limit = {
			check_variable = { influence_array_val^2 < 0.01 }
			check_variable = { influence_array^2 > 0 } #Index 3 - Third Largest Influencer
		}
		remove_from_array = { array = influence_array index = 2 }
		remove_from_array = { array = influence_array_val index = 2 }
	}
	if = {
		limit = {
			check_variable = { influence_array_val^3 < 0.01 }
			check_variable = { influence_array^3 > 0 } #Index 4 - Fourth Largest Influencer
		}
		remove_from_array = { array = influence_array index = 3 }
		remove_from_array = { array = influence_array_val index = 3 }
	}
	if = {
		limit = {
			check_variable = { influence_array_val^4 < 0.01 }
			check_variable = { influence_array^4 > 0 } #Index 5 - Fifth Largest Influencer
		}
		remove_from_array = { array = influence_array index = 4 }
		remove_from_array = { array = influence_array_val index = 4 }
	}
	if = {
		limit = {
			check_variable = { influence_array_val^5 < 0.01 }
			check_variable = { influence_array^5 > 0 } #Index 6 - Sixth Largest Influencer
		}
		remove_from_array = { array = influence_array index = 5 }
		remove_from_array = { array = influence_array_val index = 5 }
	}
	if = {
		limit = {
			check_variable = { influence_array_val^6 < 0.01 }
			check_variable = { influence_array^6 > 0 } #Index 6 - Sixth Largest Influencer
		}
		remove_from_array = { array = influence_array index = 6 }
		remove_from_array = { array = influence_array_val index = 6 }
	}

	for_each_loop = {
		array = influence_array
		value = v
		index = i

		if = { limit = { check_variable = { i = 0 } }
			if = { limit = { check_variable = { influence_array^i = influence_array^6 } }
				add_to_variable = { influence_array_val^i = influence_array_val^6 }
				remove_from_array = { array = influence_array index = 6 }
				remove_from_array = { array = influence_array_val index = 6 }
			}
			if = { limit = { check_variable = { influence_array^i = influence_array^5 } }
				add_to_variable = { influence_array_val^i = influence_array_val^5 }
				remove_from_array = { array = influence_array index = 5 }
				remove_from_array = { array = influence_array_val index = 5 }
			}
			if = { limit = { check_variable = { influence_array^i = influence_array^4 } }
				add_to_variable = { influence_array_val^i = influence_array_val^4 }
				remove_from_array = { array = influence_array index = 4 }
				remove_from_array = { array = influence_array_val index = 4 }
			}
			if = { limit = { check_variable = { influence_array^i = influence_array^3 } }
				add_to_variable = { influence_array_val^i = influence_array_val^3 }
				remove_from_array = { array = influence_array index = 3 }
				remove_from_array = { array = influence_array_val index = 3 }
			}
			if = { limit = { check_variable = { influence_array^i = influence_array^2 } }
				add_to_variable = { influence_array_val^i = influence_array_val^2 }
				remove_from_array = { array = influence_array index = 2 }
				remove_from_array = { array = influence_array_val index = 2 }
			}
			if = { limit = { check_variable = { influence_array^i = influence_array^1 } }
				add_to_variable = { influence_array_val^i = influence_array_val^1 }
				remove_from_array = { array = influence_array index = 1 }
				remove_from_array = { array = influence_array_val index = 1 }
			}
		}
		else_if = { limit = { check_variable = { i = 1 } }
			if = { limit = { check_variable = { influence_array^i = influence_array^6 } }
				add_to_variable = { influence_array_val^i = influence_array_val^6 }
				remove_from_array = { array = influence_array index = 6 }
				remove_from_array = { array = influence_array_val index = 6 }
			}
			if = { limit = { check_variable = { influence_array^i = influence_array^5 } }
				add_to_variable = { influence_array_val^i = influence_array_val^5 }
				remove_from_array = { array = influence_array index = 5 }
				remove_from_array = { array = influence_array_val index = 5 }
			}
			if = { limit = { check_variable = { influence_array^i = influence_array^4 } }
				add_to_variable = { influence_array_val^i = influence_array_val^4 }
				remove_from_array = { array = influence_array index = 4 }
				remove_from_array = { array = influence_array_val index = 4 }
			}
			if = { limit = { check_variable = { influence_array^i = influence_array^3 } }
				add_to_variable = { influence_array_val^i = influence_array_val^3 }
				remove_from_array = { array = influence_array index = 3 }
				remove_from_array = { array = influence_array_val index = 3 }
			}
			if = { limit = { check_variable = { influence_array^i = influence_array^2 } }
				add_to_variable = { influence_array_val^i = influence_array_val^2 }
				remove_from_array = { array = influence_array index = 2 }
				remove_from_array = { array = influence_array_val index = 2 }
			}
		}
		else_if = { limit = { check_variable = { i = 2 } }
			if = { limit = { check_variable = { influence_array^i = influence_array^6 } }
				add_to_variable = { influence_array_val^i = influence_array_val^6 }
				remove_from_array = { array = influence_array index = 6 }
				remove_from_array = { array = influence_array_val index = 6 }
			}
			if = { limit = { check_variable = { influence_array^i = influence_array^5 } }
				add_to_variable = { influence_array_val^i = influence_array_val^5 }
				remove_from_array = { array = influence_array index = 5 }
				remove_from_array = { array = influence_array_val index = 5 }
			}
			if = { limit = { check_variable = { influence_array^i = influence_array^4 } }
				add_to_variable = { influence_array_val^i = influence_array_val^4 }
				remove_from_array = { array = influence_array index = 4 }
				remove_from_array = { array = influence_array_val index = 4 }
			}
			if = { limit = { check_variable = { influence_array^i = influence_array^3 } }
				add_to_variable = { influence_array_val^i = influence_array_val^3 }
				remove_from_array = { array = influence_array index = 3 }
				remove_from_array = { array = influence_array_val index = 3 }
			}
		}
		else_if = { limit = { check_variable = { i = 3 } }
			if = { limit = { check_variable = { influence_array^i = influence_array^6 } }
				add_to_variable = { influence_array_val^i = influence_array_val^6 }
				remove_from_array = { array = influence_array index = 6 }
				remove_from_array = { array = influence_array_val index = 6 }
			}
			if = { limit = { check_variable = { influence_array^i = influence_array^5 } }
				add_to_variable = { influence_array_val^i = influence_array_val^5 }
				remove_from_array = { array = influence_array index = 5 }
				remove_from_array = { array = influence_array_val index = 5 }
			}
			if = { limit = { check_variable = { influence_array^i = influence_array^4 } }
				add_to_variable = { influence_array_val^i = influence_array_val^4 }
				remove_from_array = { array = influence_array index = 4 }
				remove_from_array = { array = influence_array_val index = 4 }
			}
		}
		else_if = { limit = { check_variable = { i = 4 } }
			if = { limit = { check_variable = { influence_array^i = influence_array^6 } }
				add_to_variable = { influence_array_val^i = influence_array_val^6 }
				remove_from_array = { array = influence_array index = 6 }
				remove_from_array = { array = influence_array_val index = 6 }
			}
			if = { limit = { check_variable = { influence_array^i = influence_array^5 } }
				add_to_variable = { influence_array_val^i = influence_array_val^5 }
				remove_from_array = { array = influence_array index = 5 }
				remove_from_array = { array = influence_array_val index = 5 }
			}
		}
		else_if = { limit = { check_variable = { i = 5 } }
			if = { limit = { check_variable = { influence_array^i = influence_array^6 } }
				add_to_variable = { influence_array_val^i = influence_array_val^6 }
				remove_from_array = { array = influence_array index = 6 }
				remove_from_array = { array = influence_array_val index = 6 }
			}
		}
	}

	# Checks if the nation
	for_loop_effect = {
		end = influence_array^num
		value = v
		set_temp_variable = { temp_tag = 0 }
		add_to_temp_variable = { temp_tag = influence_array^v }
		if = {
			limit = {
				NOT = { country_exists = temp_var:temp_tag }
			}
			remove_from_array = {
				array = influence_array
				index = v
			}
			remove_from_array = {
				array = influence_array_val
				index = v
			}
		}
	}
}
##GENERIC SCRIPTED DOMESTIC EFFECTS
# Boost Influence Effects
# Boost Domestic Influence:
# The Boost Domestic Influence is a macro function
# set_temp_variable = { percent_change = +-x }
change_domestic_influence_percentage = {
	# Creates the summation of all array calculations
	set_temp_variable = { influence_outlook_amount = 0 }
	for_each_loop = {
		array = influence_array_val
		value = v
		index = i
		add_to_temp_variable = { influence_outlook_amount = v }
	}

	add_to_variable = { domestic_influence_amount = percent_change }
	set_temp_variable = { temp_total = 100 }
	subtract_from_temp_variable = { temp_total = domestic_influence_amount }

	divide_temp_variable = { temp_total = influence_outlook_amount }
	for_each_loop = {
		array = influence_array_val
		value = v
		index = i

		multiply_variable = { influence_array_val^i = temp_total }
	}
	recalculate_influence = yes

	custom_effect_tooltip = change_domestic_influence_percentage_tt
}

# Change Influencer Effect:
# USAGE:
# This is from the perspective of the influencer nation
# Usually used in scripted content
# set_temp_variable = { percent_change = +-x }
# set_temp_variable = { influencer_index = 0-6 }
change_current_influencer_index_percentage = {
	set_temp_variable = { influence_outlook_amount = 0 }
	add_to_temp_variable = { influence_outlook_amount = domestic_influence_amount }

	for_each_loop = {
		array = influence_array_val
		value = v
		index = i

		add_to_temp_variable = { influence_outlook_amount = v }
	}
	clamp_variable = { var = influence_outlook_amount max = 100 min = 0 }
	subtract_from_temp_variable = { influence_outlook_amount = influence_array_val^influencer_index }

	add_to_variable = { influence_array_val^influencer_index = percent_change }
	set_temp_variable = { temp_total = 100 }
	subtract_from_temp_variable = { temp_total = influence_array_val^influencer_index }

	divide_temp_variable = { temp_total = influence_outlook_amount }
	multiply_variable = { domestic_influence_amount = temp_total }
	for_each_loop = {
		array = influence_array_val
		value = v
		index = i

		if = { limit = { NOT = { check_variable = { i = 0 } } }
			multiply_variable = { influence_array_val^i = temp_total }
		}
	}
	recalculate_influence = yes

	custom_effect_tooltip = change_influencer_tt
}

# USAGE:
# This is to scope from different versions. Attempt to see if it works.
# set_temp_variable = { percent_change = -+ x }
# set_temp_variable = { tag_index = SCOPE }
# set_temp_variable = { influence_target = SCOPE }
# Supported Scope: FROM, ROOT, PREV, TAG
change_influence_percentage = {
	log = "[GetDateText]: [ROOT.GetName]: Change Influence Percentage [??var:tag_index.GetName] influence action in [?var:influence_target.GetName]"

	set_temp_variable = { percent_change_temp = percent_change }
	var:influence_target = {
		for_loop_effect = {
			end = influence_array^num
			value = v
			if = {
				limit = {
					check_variable = { influence_array^v = var:tag_index }
				}
				set_temp_variable = { influencer_index = v }
				set_country_flag = found
			}
		}
		if = { limit = { NOT = { has_country_flag = found } }
			add_to_array = { influence_array = var:tag_index }
			add_to_array = { influence_array_val = 0 }

			for_loop_effect = {
				end = influence_array^num
				value = v
				if = {
					limit = {
						check_variable = { influence_array^v = var:tag_index }
					}
					set_temp_variable = { influencer_index = v }
				}
			}
		}

		# Apply multiplier in positive interaction
		# You shouldn't lose more because you are a bigger power
		if = { limit = { check_variable = { percent_change > 0 } }

			var:tag_index = {
				set_temp_variable = { influence_change = modifier@foreign_influence_modifier }
			}

			set_temp_variable = { influence_defense_change = modifier@foreign_influence_defense_modifier }
			subtract_from_temp_variable = { influence_change = influence_defense_change }

			add_to_temp_variable = { influence_change = 1 }
			multiply_temp_variable = { percent_change = influence_change }
		}


		if = {
			limit = {
				check_variable = { influence_array_val^6 > 0 }
				NOT = { check_variable = { influence_array^0 = var:tag_index } }
				NOT = { check_variable = { influence_array^1 = var:tag_index } }
				NOT = { check_variable = { influence_array^2 = var:tag_index } }
				NOT = { check_variable = { influence_array^3 = var:tag_index } }
				NOT = { check_variable = { influence_array^5 = var:tag_index } }
				NOT = { check_variable = { influence_array^6 = var:tag_index } }
			}
			if = {
				limit = { check_variable = { percent_change > influence_array_val^6 } }
				set_variable = { influence_array^6 = var:tag_index }
				set_variable = { influence_array_val^6 = percent_change }
				set_temp_variable = { influencer_index = 6 }

				set_temp_variable = { influence_outlook_amount = 0 }
				add_to_temp_variable = { influence_outlook_amount = domestic_influence_amount }

				for_each_loop = {
					array = influence_array_val
					value = v
					index = i

					add_to_temp_variable = { influence_outlook_amount = v }
				}
				subtract_from_temp_variable = { influence_outlook_amount = influence_array_val^influencer_index }

				add_to_variable = { influence_array_val^influencer_index = percent_change }
				set_temp_variable = { temp_total = 100 }
				subtract_from_temp_variable = { temp_total = influence_array_val^influencer_index }

				divide_temp_variable = { temp_total = influence_outlook_amount }
				multiply_variable = { domestic_influence_amount = temp_total }
				for_each_loop = {
					array = influence_array_val
					value = v
					index = i

					if = { limit = { NOT = { check_variable = { i = 0 } } }
						multiply_variable = { influence_array_val^i = temp_total }
					}
				}
				recalculate_influence = yes

				custom_effect_tooltip = change_influencer_tt
			}
			else = {
				# Creates the summation of all array calculations
				set_temp_variable = { influence_outlook_amount = 0 }
				for_each_loop = {
					array = influence_array_val
					value = v
					index = i
					add_to_temp_variable = { influence_outlook_amount = v }
				}

				add_to_variable = { domestic_influence_amount = percent_change }
				set_temp_variable = { temp_total = 100 }
				subtract_from_temp_variable = { temp_total = domestic_influence_amount }

				divide_temp_variable = { temp_total = influence_outlook_amount }
				for_each_loop = {
					array = influence_array_val
					value = v
					index = i

					multiply_variable = { influence_array_val^i = temp_total }
				}
				recalculate_influence = yes

				custom_effect_tooltip = change_domestic_influence_percentage_tt
			}
		}
		else = {
			for_loop_effect = {
				end = influence_array^num
				value = v
				if = {
					limit = {
						check_variable = { influence_array^v = var:tag_index }
					}
					set_temp_variable = { influencer_index = v }
					set_country_flag = found
				}
			}
			if = {
				limit = { NOT = { has_country_flag = found } }
				add_to_array = { influence_array = var:tag_index }
				add_to_array = { influence_array_val = 0 }

				for_loop_effect = {
					end = influence_array^num
					value = v
					if = {
						limit = {
							check_variable = { influence_array^v = var:tag_index }
						}
						set_temp_variable = { influencer_index = v }
					}
				}
			}
			clr_country_flag = found

			set_temp_variable = { influence_outlook_amount = 0 }
			add_to_temp_variable = { influence_outlook_amount = domestic_influence_amount }

			for_each_loop = {
				array = influence_array_val
				value = v
				index = i

				add_to_temp_variable = { influence_outlook_amount = v }
			}
			subtract_from_temp_variable = { influence_outlook_amount = influence_array_val^influencer_index }

			add_to_variable = { influence_array_val^influencer_index = percent_change }
			set_temp_variable = { temp_total = 100 }
			subtract_from_temp_variable = { temp_total = influence_array_val^influencer_index }

			divide_temp_variable = { temp_total = influence_outlook_amount }
			multiply_variable = { domestic_influence_amount = temp_total }
			for_each_loop = {
				array = influence_array_val
				value = v
				index = i

				if = { limit = { NOT = { check_variable = { i = 0 } } }
					multiply_variable = { influence_array_val^i = temp_total }
				}
			}
			recalculate_influence = yes
			custom_effect_tooltip = change_influencer_tt
		}
	}
	set_temp_variable = { percent_change = percent_change_temp }
}
##Boost Domestic Influence
boost_domestic_influence_1_percent = {
	custom_effect_tooltip = increase_domestic_influence_1_percent_tt
	hidden_effect = {
		set_temp_variable = { percent_change = 1 }
		change_domestic_influence_percentage = yes
	}
}
boost_domestic_influence_2_percent = {
	custom_effect_tooltip = increase_domestic_influence_2_percent_tt
	hidden_effect = {
		set_temp_variable = { percent_change = 2 }
		change_domestic_influence_percentage = yes
	}
}
boost_domestic_influence_3_percent = {
	custom_effect_tooltip = increase_domestic_influence_3_percent_tt
	hidden_effect = {
		set_temp_variable = { percent_change = 3 }
		change_domestic_influence_percentage = yes
	}
}

boost_domestic_influence_4_percent = {
	custom_effect_tooltip = increase_domestic_influence_4_percent_tt
	hidden_effect = {
		set_temp_variable = { percent_change = 4 }
		change_domestic_influence_percentage = yes
	}
}
boost_domestic_influence_5_percent = {
	custom_effect_tooltip = increase_domestic_influence_5_percent_tt
	hidden_effect = {
		set_temp_variable = { percent_change = 5 }
		change_domestic_influence_percentage = yes
	}
}

boost_domestic_influence_6_percent = {
	custom_effect_tooltip = increase_domestic_influence_6_percent_tt
	hidden_effect = {
		set_temp_variable = { percent_change = 6 }
		change_domestic_influence_percentage = yes
	}
}
boost_domestic_influence_7_percent = {
	custom_effect_tooltip = increase_domestic_influence_7_percent_tt
	hidden_effect = {
		set_temp_variable = { percent_change = 7 }
		change_domestic_influence_percentage = yes
	}
}

boost_domestic_influence_8_percent = {
	custom_effect_tooltip = increase_domestic_influence_8_percent_tt
	hidden_effect = {
		set_temp_variable = { percent_change = 8 }
		change_domestic_influence_percentage = yes
	}
}
boost_domestic_influence_9_percent = {
	custom_effect_tooltip = increase_domestic_influence_9_percent_tt
	hidden_effect = {
		set_temp_variable = { percent_change = 9 }
		change_domestic_influence_percentage = yes
	}
}
boost_domestic_influence_10_percent = {
	custom_effect_tooltip = increase_domestic_influence_10_percent_tt
	hidden_effect = {
		set_temp_variable = { percent_change = 10 }
		change_domestic_influence_percentage = yes
	}
}

##Reduce Domestic influence
decrease_domestic_influence_1_percent = {
	custom_effect_tooltip = decrease_domestic_influence_1_percent_tt
	hidden_effect = {
		set_temp_variable = { percent_change = -1 }
		change_domestic_influence_percentage = yes
	}
}
decrease_domestic_influence_2_percent = {
	custom_effect_tooltip = decrease_domestic_influence_2_percent_tt
	hidden_effect = {
		set_temp_variable = { percent_change = -2 }
		change_domestic_influence_percentage = yes
	}}
decrease_domestic_influence_3_percent = {
	custom_effect_tooltip = decrease_domestic_influence_3_percent_tt
	hidden_effect = {
		set_temp_variable = { percent_change = -3 }
		change_domestic_influence_percentage = yes
	}
}

decrease_domestic_influence_4_percent = {
	custom_effect_tooltip = decrease_domestic_influence_4_percent_tt
	hidden_effect = {
		set_temp_variable = { percent_change = -4 }
		change_domestic_influence_percentage = yes
	}
}
decrease_domestic_influence_5_percent = {
	custom_effect_tooltip = decrease_domestic_influence_5_percent_tt
	hidden_effect = {
		set_temp_variable = { percent_change = -5 }
		change_domestic_influence_percentage = yes
	}
}

decrease_domestic_influence_6_percent = {
	custom_effect_tooltip = decrease_domestic_influence_6_percent_tt
	hidden_effect = {
		set_temp_variable = { percent_change = -6 }
		change_domestic_influence_percentage = yes
	}
}
decrease_domestic_influence_7_percent = {
	custom_effect_tooltip = decrease_domestic_influence_7_percent_tt
	hidden_effect = {
		set_temp_variable = { percent_change = -7 }
		change_domestic_influence_percentage = yes
	}
}


decrease_domestic_influence_8_percent = {
	custom_effect_tooltip = decrease_domestic_influence_8_percent_tt
	hidden_effect = {
		set_temp_variable = { percent_change = -8 }
		change_domestic_influence_percentage = yes
	}
}
decrease_domestic_influence_9_percent = {
	custom_effect_tooltip = decrease_domestic_influence_9_percent_tt
	hidden_effect = {
		set_temp_variable = { percent_change = -9 }
		change_domestic_influence_percentage = yes
	}
}

decrease_domestic_influence_10_percent = {
	custom_effect_tooltip = decrease_domestic_influence_10_percent_tt
	hidden_effect = {
		set_temp_variable = { percent_change = -10 }
		change_domestic_influence_percentage = yes
	}
}

#Script to run after any change to influence
monthly_power_projection_gain = {
	set_variable = { foreignPowerProjection_Factories = num_of_factories }
	divide_variable = { foreignPowerProjection_Factories = 100 }
	set_variable = { foreignPowerProjectionMonth = foreignPowerProjection_Factories }

	set_variable = { foreignPowerProjection_Subjects = 0 }
	if = {
		limit = { num_subjects > 0 }
		for_each_scope_loop = {
			array = subjects
			add_to_variable = { ROOT.foreignPowerProjection_Subjects = grossdomesticproduct_fake }
			#log = "[Root.GetTag]: Puppet: [This.GetTag] / GDP: [?grossdomesticproduct_fake]"
		}
	}
	add_to_variable = { var = foreignPowerProjectionMonth value = foreignPowerProjection_Subjects }

	set_variable = { foreignPowerProjection_GDP = grossdomesticproduct_fake }
	add_to_variable = { var = foreignPowerProjectionMonth value = foreignPowerProjection_GDP }
	#log = "[Root.GetTag]: States: [?num_owned_controlled_states] / GDP: [?grossdomesticproduct_fake]"

	set_variable = { foreignPowerProjection_space_race = 0 } # monthly FPP from Space Race
	if = {
		limit = { check_variable = { global.top_space_race_array_country^0 = ROOT.Id } }
		set_variable = { foreignPowerProjection_space_race = 3 }
	}
	else_if = {
		limit = { check_variable = { global.top_space_race_array_country^1 = ROOT.Id } }
		set_variable = { foreignPowerProjection_space_race = 2 }
	}
	else_if = {
		limit = { check_variable = { global.top_space_race_array_country^2 = ROOT.Id } }
		set_variable = { foreignPowerProjection_space_race = 1 }
	}
	add_to_variable = { var = foreignPowerProjectionMonth value = foreignPowerProjection_space_race }

	if = {
		limit = {
			tag = USA
			has_idea = foriegn_assistance_act
		}
		multiply_variable = { foreignPowerProjectionMonth = 1.25 }
	}
	if = {
		limit = {
			tag = USA
			has_idea = Mutual_Development_and_Cooperation_Act
		}
		multiply_variable = { foreignPowerProjectionMonth = 1.25 }
	}
	if = {
		limit = {
			tag = USA
			has_idea = Foriegn_Aid_Reduction_Act
		}
		multiply_variable = { foreignPowerProjectionMonth = 0.75 }
	}
	if = {
		limit = {
			has_idea = influence_increase_cost
		}
		multiply_variable = { influence_increase_cost = 0.5 }
	}
	#log = "[Root.GetTag]: (factories: [?foreignPowerProjection_Factories] + subjects: [?foreignPowerProjection_Subjects] + GDP: [?foreignPowerProjection_GDP]) = [?foreignPowerProjectionMonth]"
	add_to_variable = { foreignPowerProjection = foreignPowerProjectionMonth }
	
}

monthly_set_fpp = {
	clear_variable = fppDomestic
	clear_variable = fppDomesticDoubled
	clear_variable = fppDomesticSet
	
	set_variable = { fppDomestic = num_of_factories }
	add_to_variable = { fppDomestic = num_subjects }
	add_to_variable = { fppDomestic = num_owned_controlled_states }
	add_to_variable = { fppDomestic = num_of_nukes }
	add_to_variable = { fppDomestic = num_divisions }
	add_to_variable = { fppDomestic = bonus_fpp_modifier } # this bonus doesn't seem to exist - Harain

	set_variable = { fppDomesticSet = fppDomestic }
	multiply_variable = { fppDomestic = 2 }
	set_variable = { fppDomesticDoubled = fppDomestic }
	
}





sign_trade_agreement = {
	if = { limit = { tag = GER } ROOT = { add_ideas = trade_treaty_GER	}	}
	else_if = { limit = { tag = ENG } ROOT = { add_ideas = trade_treaty_ENG	}	}
	else_if = { limit = { tag = SOV } ROOT = { add_ideas = trade_treaty_SOV	}	}
	else_if = { limit = { tag = SWE } ROOT = { add_ideas = trade_treaty_SWE	}	}
	else_if = { limit = { tag = FRA } ROOT = { add_ideas = trade_treaty_FRA	}	}
	else_if = { limit = { tag = LUX } ROOT = { add_ideas = trade_treaty_LUX	}	}
	else_if = { limit = { tag = BEL } ROOT = { add_ideas = trade_treaty_BEL	}	}
	else_if = { limit = { tag = HOL } ROOT = { add_ideas = trade_treaty_HOL	}	}
	else_if = { limit = { tag = CZE } ROOT = { add_ideas = trade_treaty_CZE	}	}
	else_if = { limit = { tag = POL } ROOT = { add_ideas = trade_treaty_POL	}	}
	else_if = { limit = { tag = AUS } ROOT = { add_ideas = trade_treaty_AUS	}	}
	else_if = { limit = { tag = LIT } ROOT = { add_ideas = trade_treaty_LIT	}	}
	else_if = { limit = { tag = EST } ROOT = { add_ideas = trade_treaty_EST	}	}
	else_if = { limit = { tag = LAT } ROOT = { add_ideas = trade_treaty_LAT	}	}
	else_if = { limit = { tag = SPR } ROOT = { add_ideas = trade_treaty_SPR	}	}
	else_if = { limit = { tag = ITA } ROOT = { add_ideas = trade_treaty_ITA	}	}
	else_if = { limit = { tag = ROM } ROOT = { add_ideas = trade_treaty_ROM	}	}
	else_if = { limit = { tag = YUG } ROOT = { add_ideas = trade_treaty_YUG	}	}
	else_if = { limit = { tag = SER } ROOT = { add_ideas = trade_treaty_SER	}	}
	else_if = { limit = { tag = SWI } ROOT = { add_ideas = trade_treaty_SWI	}	}
	else_if = { limit = { tag = TUR } ROOT = { add_ideas = trade_treaty_TUR	}	}
	else_if = { limit = { tag = GRE } ROOT = { add_ideas = trade_treaty_GRE	}	}
	else_if = { limit = { tag = ALB } ROOT = { add_ideas = trade_treaty_ALB	}	}
	else_if = { limit = { tag = NOR } ROOT = { add_ideas = trade_treaty_NOR	}	}
	else_if = { limit = { tag = DEN } ROOT = { add_ideas = trade_treaty_DEN	}	}
	else_if = { limit = { tag = BUL } ROOT = { add_ideas = trade_treaty_BUL	}	}
	else_if = { limit = { tag = POR } ROOT = { add_ideas = trade_treaty_POR	}	}
	else_if = { limit = { tag = FIN } ROOT = { add_ideas = trade_treaty_FIN	}	}
	else_if = { limit = { tag = IRE } ROOT = { add_ideas = trade_treaty_IRE	}	}
	else_if = { limit = { tag = HUN } ROOT = { add_ideas = trade_treaty_HUN	}	}
	else_if = { limit = { tag = AFG } ROOT = { add_ideas = trade_treaty_AFG	}	}
	else_if = { limit = { tag = ARG } ROOT = { add_ideas = trade_treaty_ARG	}	}
	else_if = { limit = { tag = AST } ROOT = { add_ideas = trade_treaty_AST	}	}
	else_if = { limit = { tag = BHU } ROOT = { add_ideas = trade_treaty_BHU	}	}
	else_if = { limit = { tag = BOL } ROOT = { add_ideas = trade_treaty_BOL	}	}
	else_if = { limit = { tag = BRA } ROOT = { add_ideas = trade_treaty_BRA	}	}
	else_if = { limit = { tag = CAN } ROOT = { add_ideas = trade_treaty_CAN	}	}
	else_if = { limit = { tag = CHI } ROOT = { add_ideas = trade_treaty_CHI	}	}
	else_if = { limit = { tag = CHL } ROOT = { add_ideas = trade_treaty_CHL	}	}
	else_if = { limit = { tag = COL } ROOT = { add_ideas = trade_treaty_COL	}	}
	else_if = { limit = { tag = COS } ROOT = { add_ideas = trade_treaty_COS	}	}
	else_if = { limit = { tag = ECU } ROOT = { add_ideas = trade_treaty_ECU	}	}
	else_if = { limit = { tag = ELS } ROOT = { add_ideas = trade_treaty_ELS	}	}
	else_if = { limit = { tag = ETH } ROOT = { add_ideas = trade_treaty_ETH	}	}
	else_if = { limit = { tag = GUA } ROOT = { add_ideas = trade_treaty_GUA	}	}
	else_if = { limit = { tag = HON } ROOT = { add_ideas = trade_treaty_HON	}	}
	else_if = { limit = { tag = IRQ } ROOT = { add_ideas = trade_treaty_IRQ	}	}
	else_if = { limit = { tag = JAP } ROOT = { add_ideas = trade_treaty_JAP	}	}
	else_if = { limit = { tag = KOR } ROOT = { add_ideas = trade_treaty_KOR	}	}
	else_if = { limit = { tag = LIB } ROOT = { add_ideas = trade_treaty_LIB	}	}
	else_if = { limit = { tag = MEX } ROOT = { add_ideas = trade_treaty_MEX	}	}
	else_if = { limit = { tag = MEN } ROOT = { add_ideas = trade_treaty_MEN	}	}
	else_if = { limit = { tag = NEP } ROOT = { add_ideas = trade_treaty_NEP	}	}
	else_if = { limit = { tag = NIC } ROOT = { add_ideas = trade_treaty_NIC	}	}
	else_if = { limit = { tag = NZL } ROOT = { add_ideas = trade_treaty_NZL	}	}
	else_if = { limit = { tag = PAN } ROOT = { add_ideas = trade_treaty_PAN	}	}
	else_if = { limit = { tag = PER } ROOT = { add_ideas = trade_treaty_PER	}	}
	else_if = { limit = { tag = "PHI" } ROOT = { add_ideas = trade_treaty_PHI	}	}
	else_if = { limit = { tag = PRU } ROOT = { add_ideas = trade_treaty_PRU	}	}
	else_if = { limit = { tag = SAF } ROOT = { add_ideas = trade_treaty_SAF	}	}
	else_if = { limit = { tag = SAU } ROOT = { add_ideas = trade_treaty_SAU	}	}
	else_if = { limit = { tag = SIA } ROOT = { add_ideas = trade_treaty_SIA	}	}
	else_if = { limit = { tag = SIK } ROOT = { add_ideas = trade_treaty_SIK	}	}
	else_if = { limit = { tag = TIB } ROOT = { add_ideas = trade_treaty_TIB	}	}
	else_if = { limit = { tag = URG } ROOT = { add_ideas = trade_treaty_URG	}	}
	else_if = { limit = { tag = VEN } ROOT = { add_ideas = trade_treaty_VEN	}	}
	else_if = { limit = { tag = YUN } ROOT = { add_ideas = trade_treaty_YUN	}	}
	else_if = { limit = { tag = USA } ROOT = { add_ideas = trade_treaty_USA	}	}
	else_if = { limit = { tag = MON } ROOT = { add_ideas = trade_treaty_MON	}	}
	else_if = { limit = { tag = MNT } ROOT = { add_ideas = trade_treaty_MNT	}	}
	else_if = { limit = { tag = PAR } ROOT = { add_ideas = trade_treaty_PAR	}	}
	else_if = { limit = { tag = CUB } ROOT = { add_ideas = trade_treaty_CUB	}	}
	else_if = { limit = { tag = DOM } ROOT = { add_ideas = trade_treaty_DOM	}	}
	else_if = { limit = { tag = HAI } ROOT = { add_ideas = trade_treaty_HAI	}	}
	else_if = { limit = { tag = YEM } ROOT = { add_ideas = trade_treaty_YEM	}	}
	else_if = { limit = { tag = OMA } ROOT = { add_ideas = trade_treaty_OMA	}	}
	else_if = { limit = { tag = SLO } ROOT = { add_ideas = trade_treaty_SLO	}	}
	else_if = { limit = { tag = RAJ } ROOT = { add_ideas = trade_treaty_RAJ	}	}
	else_if = { limit = { tag = CRO } ROOT = { add_ideas = trade_treaty_CRO	}	}
	else_if = { limit = { tag = PRC } ROOT = { add_ideas = trade_treaty_PRC	}	}
	else_if = { limit = { tag = SRL } ROOT = { add_ideas = trade_treaty_SRL	}	}
	else_if = { limit = { tag = MLD } ROOT = { add_ideas = trade_treaty_MLD	}	}
	else_if = { limit = { tag = BAH } ROOT = { add_ideas = trade_treaty_BAH	}	}
	else_if = { limit = { tag = RIF } ROOT = { add_ideas = trade_treaty_RIF	}	}
	else_if = { limit = { tag = ICE } ROOT = { add_ideas = trade_treaty_ICE	}	}
	else_if = { limit = { tag = LEB } ROOT = { add_ideas = trade_treaty_LEB	}	}
	else_if = { limit = { tag = JOR } ROOT = { add_ideas = trade_treaty_JOR	}	}
	else_if = { limit = { tag = SYR } ROOT = { add_ideas = trade_treaty_SYR	}	}
	else_if = { limit = { tag = EGY } ROOT = { add_ideas = trade_treaty_EGY	}	}
	else_if = { limit = { tag = LBA } ROOT = { add_ideas = trade_treaty_LBA	}	}
	else_if = { limit = { tag = WGR } ROOT = { add_ideas = trade_treaty_WGR	}	}
	else_if = { limit = { tag = DDR } ROOT = { add_ideas = trade_treaty_DDR	}	}
	else_if = { limit = { tag = PAL } ROOT = { add_ideas = trade_treaty_PAL	}	}
	else_if = { limit = { tag = ISR } ROOT = { add_ideas = trade_treaty_ISR	}	}
	else_if = { limit = { tag = VIN } ROOT = { add_ideas = trade_treaty_VIN	}	}
	else_if = { limit = { tag = CAM } ROOT = { add_ideas = trade_treaty_CAM	}	}
	else_if = { limit = { tag = MAL } ROOT = { add_ideas = trade_treaty_MAL	}	}
	else_if = { limit = { tag = INS } ROOT = { add_ideas = trade_treaty_INS	}	}
	else_if = { limit = { tag = LAO } ROOT = { add_ideas = trade_treaty_LAO	}	}
	else_if = { limit = { tag = UKR } ROOT = { add_ideas = trade_treaty_UKR	}	}
	else_if = { limit = { tag = GEO } ROOT = { add_ideas = trade_treaty_GEO	}	}
	else_if = { limit = { tag = AZR } ROOT = { add_ideas = trade_treaty_AZR	}	}
	else_if = { limit = { tag = ARM } ROOT = { add_ideas = trade_treaty_ARM	}	}
	else_if = { limit = { tag = BLR } ROOT = { add_ideas = trade_treaty_BLR	}	}
	else_if = { limit = { tag = ANG } ROOT = { add_ideas = trade_treaty_ANG	}	}
	else_if = { limit = { tag = MZB } ROOT = { add_ideas = trade_treaty_MZB	}	}
	else_if = { limit = { tag = ZIM } ROOT = { add_ideas = trade_treaty_ZIM	}	}
	else_if = { limit = { tag = COG } ROOT = { add_ideas = trade_treaty_COG	}	}
	else_if = { limit = { tag = BOT } ROOT = { add_ideas = trade_treaty_BOT	}	}
	else_if = { limit = { tag = UAE } ROOT = { add_ideas = trade_treaty_UAE	}	}
	else_if = { limit = { tag = QAT } ROOT = { add_ideas = trade_treaty_QAT	}	}
	else_if = { limit = { tag = VTC } ROOT = { add_ideas = trade_treaty_VTC	}	}
	else_if = { limit = { tag = SNM } ROOT = { add_ideas = trade_treaty_SNM	}	}
	else_if = { limit = { tag = MOC } ROOT = { add_ideas = trade_treaty_MOC	}	}
	else_if = { limit = { tag = LIC } ROOT = { add_ideas = trade_treaty_LIC	}	}
	else_if = { limit = { tag = ZAZ } ROOT = { add_ideas = trade_treaty_ZAZ	}	}
	else_if = { limit = { tag = TNG } ROOT = { add_ideas = trade_treaty_TNG	}	}
	else_if = { limit = { tag = CAL } ROOT = { add_ideas = trade_treaty_CAL	}	}
	else_if = { limit = { tag = PMR } ROOT = { add_ideas = trade_treaty_PMR	}	}
	else_if = { limit = { tag = BAV } ROOT = { add_ideas = trade_treaty_BAV	}	}
	else_if = { limit = { tag = SMO } ROOT = { add_ideas = trade_treaty_SMO	}	}
	else_if = { limit = { tag = TOA } ROOT = { add_ideas = trade_treaty_TOA	}	}
	else_if = { limit = { tag = GRN } ROOT = { add_ideas = trade_treaty_GRN	}	}
	else_if = { limit = { tag = WES } ROOT = { add_ideas = trade_treaty_WES	}	}
	else_if = { limit = { tag = PUE } ROOT = { add_ideas = trade_treaty_PUE	}	}
	else_if = { limit = { tag = FCB } ROOT = { add_ideas = trade_treaty_FCB	}	}
	else_if = { limit = { tag = MLA } ROOT = { add_ideas = trade_treaty_MLA	}	}
	else_if = { limit = { tag = SLV } ROOT = { add_ideas = trade_treaty_SLV	}	}
	else_if = { limit = { tag = KOS } ROOT = { add_ideas = trade_treaty_KOS	}	}
	else_if = { limit = { tag = PDG } ROOT = { add_ideas = trade_treaty_PDG	}	}
	else_if = { limit = { tag = INO } ROOT = { add_ideas = trade_treaty_INO	}	}
	else_if = { limit = { tag = HUM } ROOT = { add_ideas = trade_treaty_HUM	}	}
	else_if = { limit = { tag = VIE } ROOT = { add_ideas = trade_treaty_VIE	}	}
	else_if = { limit = { tag = BRM } ROOT = { add_ideas = trade_treaty_BRM	}	}
	else_if = { limit = { tag = PAK } ROOT = { add_ideas = trade_treaty_PAK	}	}
	else_if = { limit = { tag = KPA } ROOT = { add_ideas = trade_treaty_KPA	}	}
	else_if = { limit = { tag = CHE } ROOT = { add_ideas = trade_treaty_CHE	}	}
	else_if = { limit = { tag = SAR } ROOT = { add_ideas = trade_treaty_SAR	}	}
	else_if = { limit = { tag = AND } ROOT = { add_ideas = trade_treaty_AND	}	}
	else_if = { limit = { tag = TRS } ROOT = { add_ideas = trade_treaty_TRS	}	}
	else_if = { limit = { tag = LOS } ROOT = { add_ideas = trade_treaty_LOS	}	}
	else_if = { limit = { tag = KMP } ROOT = { add_ideas = trade_treaty_KMP	}	}
	else_if = { limit = { tag = KUR } ROOT = { add_ideas = trade_treaty_KUR	}	}
	else_if = { limit = { tag = DRY } ROOT = { add_ideas = trade_treaty_DRY	}	}
	else_if = { limit = { tag = SUD } ROOT = { add_ideas = trade_treaty_SUD	}	}
	else_if = { limit = { tag = GHA } ROOT = { add_ideas = trade_treaty_GHA	}	}
	else_if = { limit = { tag = NGA } ROOT = { add_ideas = trade_treaty_NGA	}	}
	else_if = { limit = { tag = SOM } ROOT = { add_ideas = trade_treaty_SOM	}	}
	else_if = { limit = { tag = CYP } ROOT = { add_ideas = trade_treaty_CYP	}	}
	else_if = { limit = { tag = UGA } ROOT = { add_ideas = trade_treaty_UGA	}	}
	else_if = { limit = { tag = JAM } ROOT = { add_ideas = trade_treaty_JAM	}	}
	else_if = { limit = { tag = TRI } ROOT = { add_ideas = trade_treaty_TRI	}	}
	else_if = { limit = { tag = LES } ROOT = { add_ideas = trade_treaty_LES	}	}
	else_if = { limit = { tag = SWA } ROOT = { add_ideas = trade_treaty_SWA	}	}
	else_if = { limit = { tag = ZAM } ROOT = { add_ideas = trade_treaty_ZAM	}	}
	else_if = { limit = { tag = TZN } ROOT = { add_ideas = trade_treaty_TZN	}	}
	else_if = { limit = { tag = KUW } ROOT = { add_ideas = trade_treaty_KUW	}	}
	else_if = { limit = { tag = MOR } ROOT = { add_ideas = trade_treaty_MOR	}	}
	else_if = { limit = { tag = TUN } ROOT = { add_ideas = trade_treaty_TUN	}	}
	else_if = { limit = { tag = ALG } ROOT = { add_ideas = trade_treaty_ALG	}	}
	else_if = { limit = { tag = BRU } ROOT = { add_ideas = trade_treaty_BRU	}	}
	else_if = { limit = { tag = MLI } ROOT = { add_ideas = trade_treaty_MLI	}	}
	else_if = { limit = { tag = NGR } ROOT = { add_ideas = trade_treaty_NGR	}	}
	else_if = { limit = { tag = VOL } ROOT = { add_ideas = trade_treaty_VOL	}	}
	else_if = { limit = { tag = GNA } ROOT = { add_ideas = trade_treaty_GNA	}	}
	else_if = { limit = { tag = MRT } ROOT = { add_ideas = trade_treaty_MRT	}	}
	else_if = { limit = { tag = TOG } ROOT = { add_ideas = trade_treaty_TOG	}	}
	else_if = { limit = { tag = DAH } ROOT = { add_ideas = trade_treaty_DAH	}	}
	else_if = { limit = { tag = SEN } ROOT = { add_ideas = trade_treaty_SEN	}	}
	else_if = { limit = { tag = CHA } ROOT = { add_ideas = trade_treaty_CHA	}	}
	else_if = { limit = { tag = IVO } ROOT = { add_ideas = trade_treaty_IVO	}	}
	else_if = { limit = { tag = MLW } ROOT = { add_ideas = trade_treaty_MLW	}	}
	else_if = { limit = { tag = MOL } ROOT = { add_ideas = trade_treaty_MOL	}	}
	else_if = { limit = { tag = KAZ } ROOT = { add_ideas = trade_treaty_KAZ	}	}
	else_if = { limit = { tag = UZB } ROOT = { add_ideas = trade_treaty_UZB	}	}
	else_if = { limit = { tag = TAJ } ROOT = { add_ideas = trade_treaty_TAJ	}	}
	else_if = { limit = { tag = KYR } ROOT = { add_ideas = trade_treaty_KYR	}	}
	else_if = { limit = { tag = TMS } ROOT = { add_ideas = trade_treaty_TMS	}	}
	else_if = { limit = { tag = KRL } ROOT = { add_ideas = trade_treaty_KRL	}	}
	else_if = { limit = { tag = TAL } ROOT = { add_ideas = trade_treaty_TAL	}	}
	else_if = { limit = { tag = ADR } ROOT = { add_ideas = trade_treaty_ADR	}	}
	else_if = { limit = { tag = SSU } ROOT = { add_ideas = trade_treaty_SSU	}	}
	else_if = { limit = { tag = RNA } ROOT = { add_ideas = trade_treaty_RNA	}	}
	else_if = { limit = { tag = CSD } ROOT = { add_ideas = trade_treaty_CSD	}	}
	else_if = { limit = { tag = NCY } ROOT = { add_ideas = trade_treaty_NCY	}	}
	else_if = { limit = { tag = BAL } ROOT = { add_ideas = trade_treaty_BAL	}	}
	else_if = { limit = { tag = BAN } ROOT = { add_ideas = trade_treaty_BAN	}	}
	else_if = { limit = { tag = ASA } ROOT = { add_ideas = trade_treaty_ASA	}	}
	else_if = { limit = { tag = KHA } ROOT = { add_ideas = trade_treaty_KHA	}	}
	else_if = { limit = { tag = KAS } ROOT = { add_ideas = trade_treaty_KAS	}	}
	else_if = { limit = { tag = CTL } ROOT = { add_ideas = trade_treaty_CTL	}	}
	else_if = { limit = { tag = MAC } ROOT = { add_ideas = trade_treaty_MAC	}	}
	else_if = { limit = { tag = SKN } ROOT = { add_ideas = trade_treaty_SKN	}	}
	else_if = { limit = { tag = CAR } ROOT = { add_ideas = trade_treaty_CAR	}	}
	else_if = { limit = { tag = CMR } ROOT = { add_ideas = trade_treaty_CMR	}	}
	else_if = { limit = { tag = DOC } ROOT = { add_ideas = trade_treaty_DOC	}	}
	else_if = { limit = { tag = EQG } ROOT = { add_ideas = trade_treaty_EQG	}	}
	else_if = { limit = { tag = MAD } ROOT = { add_ideas = trade_treaty_MAD	}	}
	else_if = { limit = { tag = GAB } ROOT = { add_ideas = trade_treaty_GAB	}	}
	else_if = { limit = { tag = RCG } ROOT = { add_ideas = trade_treaty_RCG	}	}
	else_if = { limit = { tag = DAR } ROOT = { add_ideas = trade_treaty_DAR	}	}
	else_if = { limit = { tag = SML } ROOT = { add_ideas = trade_treaty_SML	}	}
	else_if = { limit = { tag = SKK } ROOT = { add_ideas = trade_treaty_SKK	}	}
	else_if = { limit = { tag = TAN } ROOT = { add_ideas = trade_treaty_TAN	}	}
	else_if = { limit = { tag = TEX } ROOT = { add_ideas = trade_treaty_TEX	}	}
	else_if = { limit = { tag = LKT } ROOT = { add_ideas = trade_treaty_LKT	}	}
	else_if = { limit = { tag = KEN } ROOT = { add_ideas = trade_treaty_KEN	}	}
	else_if = { limit = { tag = MAN } ROOT = { add_ideas = trade_treaty_MAN	}	}
	else_if = { limit = { tag = QBC } ROOT = { add_ideas = trade_treaty_QBC	}	}
	else_if = { limit = { tag = NMB } ROOT = { add_ideas = trade_treaty_NMB	}	}
	else_if = { limit = { tag = BHR } ROOT = { add_ideas = trade_treaty_BHR	}	}
	else_if = { limit = { tag = SOS } ROOT = { add_ideas = trade_treaty_SOS	}	}
	else_if = { limit = { tag = ABK } ROOT = { add_ideas = trade_treaty_ABK	}	}
	else_if = { limit = { tag = ERI } ROOT = { add_ideas = trade_treaty_ERI	}	}
	else_if = { limit = { tag = GAM } ROOT = { add_ideas = trade_treaty_GAM	}	}
	else_if = { limit = { tag = RWA } ROOT = { add_ideas = trade_treaty_RWA	}	}
	else_if = { limit = { tag = BRD } ROOT = { add_ideas = trade_treaty_BRD	}	}
	else_if = { limit = { tag = HWI } ROOT = { add_ideas = trade_treaty_HWI	}	}
	else_if = { limit = { tag = FIJ } ROOT = { add_ideas = trade_treaty_FIJ	}	}
	else_if = { limit = { tag = PNG } ROOT = { add_ideas = trade_treaty_PNG	}	}
	else_if = { limit = { tag = GND } ROOT = { add_ideas = trade_treaty_GND	}	}
	else_if = { limit = { tag = KAG } ROOT = { add_ideas = trade_treaty_KAG	}	}
	else_if = { limit = { tag = SKS } ROOT = { add_ideas = trade_treaty_SKS	}	}
	else_if = { limit = { tag = MLT } ROOT = { add_ideas = trade_treaty_MLT	}	}
	else_if = { limit = { tag = PLU } ROOT = { add_ideas = trade_treaty_PLU	}	}
	else_if = { limit = { tag = VOJ } ROOT = { add_ideas = trade_treaty_VOJ	}	}
	else_if = { limit = { tag = GYA } ROOT = { add_ideas = trade_treaty_GYA	}	}
	else_if = { limit = { tag = SRP } ROOT = { add_ideas = trade_treaty_SRP	}	}
	else_if = { limit = { tag = BOS } ROOT = { add_ideas = trade_treaty_BOS	}	}
	else_if = { limit = { tag = BAD } ROOT = { add_ideas = trade_treaty_BAD	}	}
	else_if = { limit = { tag = SVI } ROOT = { add_ideas = trade_treaty_SVI	}	}
	else_if = { limit = { tag = SIE } ROOT = { add_ideas = trade_treaty_SIE	}	}
	else_if = { limit = { tag = SOL } ROOT = { add_ideas = trade_treaty_SOL	}	}
	else_if = { limit = { tag = STL } ROOT = { add_ideas = trade_treaty_STL	}	}
	else_if = { limit = { tag = DJI } ROOT = { add_ideas = trade_treaty_DJI	}	}
	else_if = { limit = { tag = HOK } ROOT = { add_ideas = trade_treaty_HOK	}	}
	else_if = { limit = { tag = AGN } ROOT = { add_ideas = trade_treaty_AGN	}	}
	else_if = { limit = { tag = GAG } ROOT = { add_ideas = trade_treaty_GAG	}	}
	else_if = { limit = { tag = SWK } ROOT = { add_ideas = trade_treaty_SWK	}	}
	else_if = { limit = { tag = NAU } ROOT = { add_ideas = trade_treaty_NAU	}	}
	else_if = { limit = { tag = SGP } ROOT = { add_ideas = trade_treaty_SGP	}	}
	else_if = { limit = { tag = NFL } ROOT = { add_ideas = trade_treaty_NFL	}	}
	else_if = { limit = { tag = NGK } ROOT = { add_ideas = trade_treaty_NGK	}	}
	else_if = { limit = { tag = ADS } ROOT = { add_ideas = trade_treaty_ADS	}	}
	else_if = { limit = { tag = BLZ } ROOT = { add_ideas = trade_treaty_BLZ	}	}
	else_if = { limit = { tag = BRT } ROOT = { add_ideas = trade_treaty_BRT	}	}
	else_if = { limit = { tag = BFR } ROOT = { add_ideas = trade_treaty_BFR	}	}
	else_if = { limit = { tag = SMK } ROOT = { add_ideas = trade_treaty_SMK	}	}
	else_if = { limit = { tag = ZAR } ROOT = { add_ideas = trade_treaty_ZAR	}	}
	else_if = { limit = { tag = ORJ } ROOT = { add_ideas = trade_treaty_ORJ	}	}
	else_if = { limit = { tag = ALN } ROOT = { add_ideas = trade_treaty_ALN	}	}
	else_if = { limit = { tag = SHX } ROOT = { add_ideas = trade_treaty_SHX	}	}
	else_if = { limit = { tag = XSM } ROOT = { add_ideas = trade_treaty_XSM	}	}
	else_if = { limit = { tag = GXC } ROOT = { add_ideas = trade_treaty_GXC	}	}
	else_if = { limit = { tag = CAB } ROOT = { add_ideas = trade_treaty_CAB	}	}
	else_if = { limit = { tag = SMI } ROOT = { add_ideas = trade_treaty_SMI	}	}
	else_if = { limit = { tag = FLA } ROOT = { add_ideas = trade_treaty_FLA	}	}
	else_if = { limit = { tag = WAL } ROOT = { add_ideas = trade_treaty_WAL	}	}
	else_if = { limit = { tag = DMN } ROOT = { add_ideas = trade_treaty_DMN	}	}
	else_if = { limit = { tag = NIR } ROOT = { add_ideas = trade_treaty_NIR	}	}
	else_if = { limit = { tag = REN } ROOT = { add_ideas = trade_treaty_REN	}	}
}

sign_trade_agreement_inv = {
	if = { limit = { ROOT = { tag = GER } } add_ideas = trade_treaty_GER	}	
	else_if = { limit = { ROOT = { tag = ENG } } add_ideas = trade_treaty_ENG	}	
	else_if = { limit = { ROOT = { tag = SOV } } add_ideas = trade_treaty_SOV	}	
	else_if = { limit = { ROOT = { tag = SWE } } add_ideas = trade_treaty_SWE	}	
	else_if = { limit = { ROOT = { tag = FRA } } add_ideas = trade_treaty_FRA	}	
	else_if = { limit = { ROOT = { tag = LUX } } add_ideas = trade_treaty_LUX	}	
	else_if = { limit = { ROOT = { tag = BEL } } add_ideas = trade_treaty_BEL	}	
	else_if = { limit = { ROOT = { tag = HOL } } add_ideas = trade_treaty_HOL	}	
	else_if = { limit = { ROOT = { tag = CZE } } add_ideas = trade_treaty_CZE	}	
	else_if = { limit = { ROOT = { tag = POL } } add_ideas = trade_treaty_POL	}	
	else_if = { limit = { ROOT = { tag = AUS } } add_ideas = trade_treaty_AUS	}	
	else_if = { limit = { ROOT = { tag = LIT } } add_ideas = trade_treaty_LIT	}	
	else_if = { limit = { ROOT = { tag = EST } } add_ideas = trade_treaty_EST	}	
	else_if = { limit = { ROOT = { tag = LAT } } add_ideas = trade_treaty_LAT	}	
	else_if = { limit = { ROOT = { tag = SPR } } add_ideas = trade_treaty_SPR	}	
	else_if = { limit = { ROOT = { tag = ITA } } add_ideas = trade_treaty_ITA	}	
	else_if = { limit = { ROOT = { tag = ROM } } add_ideas = trade_treaty_ROM	}	
	else_if = { limit = { ROOT = { tag = YUG } } add_ideas = trade_treaty_YUG	}	
	else_if = { limit = { ROOT = { tag = SER } } add_ideas = trade_treaty_SER	}	
	else_if = { limit = { ROOT = { tag = SWI } } add_ideas = trade_treaty_SWI	}	
	else_if = { limit = { ROOT = { tag = TUR } } add_ideas = trade_treaty_TUR	}	
	else_if = { limit = { ROOT = { tag = GRE } } add_ideas = trade_treaty_GRE	}	
	else_if = { limit = { ROOT = { tag = ALB } } add_ideas = trade_treaty_ALB	}	
	else_if = { limit = { ROOT = { tag = NOR } } add_ideas = trade_treaty_NOR	}	
	else_if = { limit = { ROOT = { tag = DEN } } add_ideas = trade_treaty_DEN	}	
	else_if = { limit = { ROOT = { tag = BUL } } add_ideas = trade_treaty_BUL	}	
	else_if = { limit = { ROOT = { tag = POR } } add_ideas = trade_treaty_POR	}	
	else_if = { limit = { ROOT = { tag = FIN } } add_ideas = trade_treaty_FIN	}	
	else_if = { limit = { ROOT = { tag = IRE } } add_ideas = trade_treaty_IRE	}	
	else_if = { limit = { ROOT = { tag = HUN } } add_ideas = trade_treaty_HUN	}	
	else_if = { limit = { ROOT = { tag = AFG } } add_ideas = trade_treaty_AFG	}	
	else_if = { limit = { ROOT = { tag = ARG } } add_ideas = trade_treaty_ARG	}	
	else_if = { limit = { ROOT = { tag = AST } } add_ideas = trade_treaty_AST	}	
	else_if = { limit = { ROOT = { tag = BHU } } add_ideas = trade_treaty_BHU	}	
	else_if = { limit = { ROOT = { tag = BOL } } add_ideas = trade_treaty_BOL	}	
	else_if = { limit = { ROOT = { tag = BRA } } add_ideas = trade_treaty_BRA	}	
	else_if = { limit = { ROOT = { tag = CAN } } add_ideas = trade_treaty_CAN	}	
	else_if = { limit = { ROOT = { tag = CHI } } add_ideas = trade_treaty_CHI	}	
	else_if = { limit = { ROOT = { tag = CHL } } add_ideas = trade_treaty_CHL	}	
	else_if = { limit = { ROOT = { tag = COL } } add_ideas = trade_treaty_COL	}	
	else_if = { limit = { ROOT = { tag = COS } } add_ideas = trade_treaty_COS	}	
	else_if = { limit = { ROOT = { tag = ECU } } add_ideas = trade_treaty_ECU	}	
	else_if = { limit = { ROOT = { tag = ELS } } add_ideas = trade_treaty_ELS	}	
	else_if = { limit = { ROOT = { tag = ETH } } add_ideas = trade_treaty_ETH	}	
	else_if = { limit = { ROOT = { tag = GUA } } add_ideas = trade_treaty_GUA	}	
	else_if = { limit = { ROOT = { tag = HON } } add_ideas = trade_treaty_HON	}	
	else_if = { limit = { ROOT = { tag = IRQ } } add_ideas = trade_treaty_IRQ	}	
	else_if = { limit = { ROOT = { tag = JAP } } add_ideas = trade_treaty_JAP	}	
	else_if = { limit = { ROOT = { tag = KOR } } add_ideas = trade_treaty_KOR	}	
	else_if = { limit = { ROOT = { tag = LIB } } add_ideas = trade_treaty_LIB	}	
	else_if = { limit = { ROOT = { tag = MEX } } add_ideas = trade_treaty_MEX	}	
	else_if = { limit = { ROOT = { tag = MEN } } add_ideas = trade_treaty_MEN	}	
	else_if = { limit = { ROOT = { tag = NEP } } add_ideas = trade_treaty_NEP	}	
	else_if = { limit = { ROOT = { tag = NIC } } add_ideas = trade_treaty_NIC	}	
	else_if = { limit = { ROOT = { tag = NZL } } add_ideas = trade_treaty_NZL	}	
	else_if = { limit = { ROOT = { tag = PAN } } add_ideas = trade_treaty_PAN	}	
	else_if = { limit = { ROOT = { tag = PER } } add_ideas = trade_treaty_PER	}	
	else_if = { limit = { ROOT = { tag = "PHI" } } add_ideas = trade_treaty_PHI	}	
	else_if = { limit = { ROOT = { tag = PRU } } add_ideas = trade_treaty_PRU	}	
	else_if = { limit = { ROOT = { tag = SAF } } add_ideas = trade_treaty_SAF	}	
	else_if = { limit = { ROOT = { tag = SAU } } add_ideas = trade_treaty_SAU	}	
	else_if = { limit = { ROOT = { tag = SIA } } add_ideas = trade_treaty_SIA	}	
	else_if = { limit = { ROOT = { tag = SIK } } add_ideas = trade_treaty_SIK	}	
	else_if = { limit = { ROOT = { tag = TIB } } add_ideas = trade_treaty_TIB	}	
	else_if = { limit = { ROOT = { tag = URG } } add_ideas = trade_treaty_URG	}	
	else_if = { limit = { ROOT = { tag = VEN } } add_ideas = trade_treaty_VEN	}	
	else_if = { limit = { ROOT = { tag = YUN } } add_ideas = trade_treaty_YUN	}	
	else_if = { limit = { ROOT = { tag = USA } } add_ideas = trade_treaty_USA	}	
	else_if = { limit = { ROOT = { tag = MON } } add_ideas = trade_treaty_MON	}	
	else_if = { limit = { ROOT = { tag = MNT } } add_ideas = trade_treaty_MNT	}	
	else_if = { limit = { ROOT = { tag = PAR } } add_ideas = trade_treaty_PAR	}	
	else_if = { limit = { ROOT = { tag = CUB } } add_ideas = trade_treaty_CUB	}	
	else_if = { limit = { ROOT = { tag = DOM } } add_ideas = trade_treaty_DOM	}	
	else_if = { limit = { ROOT = { tag = HAI } } add_ideas = trade_treaty_HAI	}	
	else_if = { limit = { ROOT = { tag = YEM } } add_ideas = trade_treaty_YEM	}	
	else_if = { limit = { ROOT = { tag = OMA } } add_ideas = trade_treaty_OMA	}	
	else_if = { limit = { ROOT = { tag = SLO } } add_ideas = trade_treaty_SLO	}	
	else_if = { limit = { ROOT = { tag = RAJ } } add_ideas = trade_treaty_RAJ	}	
	else_if = { limit = { ROOT = { tag = CRO } } add_ideas = trade_treaty_CRO	}	
	else_if = { limit = { ROOT = { tag = PRC } } add_ideas = trade_treaty_PRC	}	
	else_if = { limit = { ROOT = { tag = SRL } } add_ideas = trade_treaty_SRL	}	
	else_if = { limit = { ROOT = { tag = MLD } } add_ideas = trade_treaty_MLD	}	
	else_if = { limit = { ROOT = { tag = BAH } } add_ideas = trade_treaty_BAH	}	
	else_if = { limit = { ROOT = { tag = RIF } } add_ideas = trade_treaty_RIF	}	
	else_if = { limit = { ROOT = { tag = ICE } } add_ideas = trade_treaty_ICE	}	
	else_if = { limit = { ROOT = { tag = LEB } } add_ideas = trade_treaty_LEB	}	
	else_if = { limit = { ROOT = { tag = JOR } } add_ideas = trade_treaty_JOR	}	
	else_if = { limit = { ROOT = { tag = SYR } } add_ideas = trade_treaty_SYR	}	
	else_if = { limit = { ROOT = { tag = EGY } } add_ideas = trade_treaty_EGY	}	
	else_if = { limit = { ROOT = { tag = LBA } } add_ideas = trade_treaty_LBA	}	
	else_if = { limit = { ROOT = { tag = WGR } } add_ideas = trade_treaty_WGR	}	
	else_if = { limit = { ROOT = { tag = DDR } } add_ideas = trade_treaty_DDR	}	
	else_if = { limit = { ROOT = { tag = PAL } } add_ideas = trade_treaty_PAL	}	
	else_if = { limit = { ROOT = { tag = ISR } } add_ideas = trade_treaty_ISR	}	
	else_if = { limit = { ROOT = { tag = VIN } } add_ideas = trade_treaty_VIN	}	
	else_if = { limit = { ROOT = { tag = CAM } } add_ideas = trade_treaty_CAM	}	
	else_if = { limit = { ROOT = { tag = MAL } } add_ideas = trade_treaty_MAL	}	
	else_if = { limit = { ROOT = { tag = INS } } add_ideas = trade_treaty_INS	}	
	else_if = { limit = { ROOT = { tag = LAO } } add_ideas = trade_treaty_LAO	}	
	else_if = { limit = { ROOT = { tag = UKR } } add_ideas = trade_treaty_UKR	}	
	else_if = { limit = { ROOT = { tag = GEO } } add_ideas = trade_treaty_GEO	}	
	else_if = { limit = { ROOT = { tag = AZR } } add_ideas = trade_treaty_AZR	}	
	else_if = { limit = { ROOT = { tag = ARM } } add_ideas = trade_treaty_ARM	}	
	else_if = { limit = { ROOT = { tag = BLR } } add_ideas = trade_treaty_BLR	}	
	else_if = { limit = { ROOT = { tag = ANG } } add_ideas = trade_treaty_ANG	}	
	else_if = { limit = { ROOT = { tag = MZB } } add_ideas = trade_treaty_MZB	}	
	else_if = { limit = { ROOT = { tag = ZIM } } add_ideas = trade_treaty_ZIM	}	
	else_if = { limit = { ROOT = { tag = COG } } add_ideas = trade_treaty_COG	}	
	else_if = { limit = { ROOT = { tag = BOT } } add_ideas = trade_treaty_BOT	}	
	else_if = { limit = { ROOT = { tag = UAE } } add_ideas = trade_treaty_UAE	}	
	else_if = { limit = { ROOT = { tag = QAT } } add_ideas = trade_treaty_QAT	}	
	else_if = { limit = { ROOT = { tag = VTC } } add_ideas = trade_treaty_VTC	}	
	else_if = { limit = { ROOT = { tag = SNM } } add_ideas = trade_treaty_SNM	}	
	else_if = { limit = { ROOT = { tag = MOC } } add_ideas = trade_treaty_MOC	}	
	else_if = { limit = { ROOT = { tag = LIC } } add_ideas = trade_treaty_LIC	}	
	else_if = { limit = { ROOT = { tag = ZAZ } } add_ideas = trade_treaty_ZAZ	}	
	else_if = { limit = { ROOT = { tag = TNG } } add_ideas = trade_treaty_TNG	}	
	else_if = { limit = { ROOT = { tag = CAL } } add_ideas = trade_treaty_CAL	}	
	else_if = { limit = { ROOT = { tag = PMR } } add_ideas = trade_treaty_PMR	}	
	else_if = { limit = { ROOT = { tag = BAV } } add_ideas = trade_treaty_BAV	}	
	else_if = { limit = { ROOT = { tag = SMO } } add_ideas = trade_treaty_SMO	}	
	else_if = { limit = { ROOT = { tag = TOA } } add_ideas = trade_treaty_TOA	}	
	else_if = { limit = { ROOT = { tag = GRN } } add_ideas = trade_treaty_GRN	}	
	else_if = { limit = { ROOT = { tag = WES } } add_ideas = trade_treaty_WES	}	
	else_if = { limit = { ROOT = { tag = PUE } } add_ideas = trade_treaty_PUE	}	
	else_if = { limit = { ROOT = { tag = FCB } } add_ideas = trade_treaty_FCB	}	
	else_if = { limit = { ROOT = { tag = MLA } } add_ideas = trade_treaty_MLA	}	
	else_if = { limit = { ROOT = { tag = SLV } } add_ideas = trade_treaty_SLV	}	
	else_if = { limit = { ROOT = { tag = KOS } } add_ideas = trade_treaty_KOS	}	
	else_if = { limit = { ROOT = { tag = PDG } } add_ideas = trade_treaty_PDG	}	
	else_if = { limit = { ROOT = { tag = INO } } add_ideas = trade_treaty_INO	}	
	else_if = { limit = { ROOT = { tag = HUM } } add_ideas = trade_treaty_HUM	}	
	else_if = { limit = { ROOT = { tag = VIE } } add_ideas = trade_treaty_VIE	}	
	else_if = { limit = { ROOT = { tag = BRM } } add_ideas = trade_treaty_BRM	}	
	else_if = { limit = { ROOT = { tag = PAK } } add_ideas = trade_treaty_PAK	}	
	else_if = { limit = { ROOT = { tag = KPA } } add_ideas = trade_treaty_KPA	}	
	else_if = { limit = { ROOT = { tag = CHE } } add_ideas = trade_treaty_CHE	}	
	else_if = { limit = { ROOT = { tag = SAR } } add_ideas = trade_treaty_SAR	}	
	else_if = { limit = { ROOT = { tag = AND } } add_ideas = trade_treaty_AND	}	
	else_if = { limit = { ROOT = { tag = TRS } } add_ideas = trade_treaty_TRS	}	
	else_if = { limit = { ROOT = { tag = LOS } } add_ideas = trade_treaty_LOS	}	
	else_if = { limit = { ROOT = { tag = KMP } } add_ideas = trade_treaty_KMP	}	
	else_if = { limit = { ROOT = { tag = KUR } } add_ideas = trade_treaty_KUR	}	
	else_if = { limit = { ROOT = { tag = DRY } } add_ideas = trade_treaty_DRY	}	
	else_if = { limit = { ROOT = { tag = SUD } } add_ideas = trade_treaty_SUD	}	
	else_if = { limit = { ROOT = { tag = GHA } } add_ideas = trade_treaty_GHA	}	
	else_if = { limit = { ROOT = { tag = NGA } } add_ideas = trade_treaty_NGA	}	
	else_if = { limit = { ROOT = { tag = SOM } } add_ideas = trade_treaty_SOM	}	
	else_if = { limit = { ROOT = { tag = CYP } } add_ideas = trade_treaty_CYP	}	
	else_if = { limit = { ROOT = { tag = UGA } } add_ideas = trade_treaty_UGA	}	
	else_if = { limit = { ROOT = { tag = JAM } } add_ideas = trade_treaty_JAM	}	
	else_if = { limit = { ROOT = { tag = TRI } } add_ideas = trade_treaty_TRI	}	
	else_if = { limit = { ROOT = { tag = LES } } add_ideas = trade_treaty_LES	}	
	else_if = { limit = { ROOT = { tag = SWA } } add_ideas = trade_treaty_SWA	}	
	else_if = { limit = { ROOT = { tag = ZAM } } add_ideas = trade_treaty_ZAM	}	
	else_if = { limit = { ROOT = { tag = TZN } } add_ideas = trade_treaty_TZN	}	
	else_if = { limit = { ROOT = { tag = KUW } } add_ideas = trade_treaty_KUW	}	
	else_if = { limit = { ROOT = { tag = MOR } } add_ideas = trade_treaty_MOR	}	
	else_if = { limit = { ROOT = { tag = TUN } } add_ideas = trade_treaty_TUN	}	
	else_if = { limit = { ROOT = { tag = ALG } } add_ideas = trade_treaty_ALG	}	
	else_if = { limit = { ROOT = { tag = BRU } } add_ideas = trade_treaty_BRU	}	
	else_if = { limit = { ROOT = { tag = MLI } } add_ideas = trade_treaty_MLI	}	
	else_if = { limit = { ROOT = { tag = NGR } } add_ideas = trade_treaty_NGR	}	
	else_if = { limit = { ROOT = { tag = VOL } } add_ideas = trade_treaty_VOL	}	
	else_if = { limit = { ROOT = { tag = GNA } } add_ideas = trade_treaty_GNA	}	
	else_if = { limit = { ROOT = { tag = MRT } } add_ideas = trade_treaty_MRT	}	
	else_if = { limit = { ROOT = { tag = TOG } } add_ideas = trade_treaty_TOG	}	
	else_if = { limit = { ROOT = { tag = DAH } } add_ideas = trade_treaty_DAH	}	
	else_if = { limit = { ROOT = { tag = SEN } } add_ideas = trade_treaty_SEN	}	
	else_if = { limit = { ROOT = { tag = CHA } } add_ideas = trade_treaty_CHA	}	
	else_if = { limit = { ROOT = { tag = IVO } } add_ideas = trade_treaty_IVO	}	
	else_if = { limit = { ROOT = { tag = MLW } } add_ideas = trade_treaty_MLW	}	
	else_if = { limit = { ROOT = { tag = MOL } } add_ideas = trade_treaty_MOL	}	
	else_if = { limit = { ROOT = { tag = KAZ } } add_ideas = trade_treaty_KAZ	}	
	else_if = { limit = { ROOT = { tag = UZB } } add_ideas = trade_treaty_UZB	}	
	else_if = { limit = { ROOT = { tag = TAJ } } add_ideas = trade_treaty_TAJ	}	
	else_if = { limit = { ROOT = { tag = KYR } } add_ideas = trade_treaty_KYR	}	
	else_if = { limit = { ROOT = { tag = TMS } } add_ideas = trade_treaty_TMS	}	
	else_if = { limit = { ROOT = { tag = KRL } } add_ideas = trade_treaty_KRL	}	
	else_if = { limit = { ROOT = { tag = TAL } } add_ideas = trade_treaty_TAL	}	
	else_if = { limit = { ROOT = { tag = ADR } } add_ideas = trade_treaty_ADR	}	
	else_if = { limit = { ROOT = { tag = SSU } } add_ideas = trade_treaty_SSU	}	
	else_if = { limit = { ROOT = { tag = RNA } } add_ideas = trade_treaty_RNA	}	
	else_if = { limit = { ROOT = { tag = CSD } } add_ideas = trade_treaty_CSD	}	
	else_if = { limit = { ROOT = { tag = NCY } } add_ideas = trade_treaty_NCY	}	
	else_if = { limit = { ROOT = { tag = BAL } } add_ideas = trade_treaty_BAL	}	
	else_if = { limit = { ROOT = { tag = BAN } } add_ideas = trade_treaty_BAN	}	
	else_if = { limit = { ROOT = { tag = ASA } } add_ideas = trade_treaty_ASA	}	
	else_if = { limit = { ROOT = { tag = KHA } } add_ideas = trade_treaty_KHA	}	
	else_if = { limit = { ROOT = { tag = KAS } } add_ideas = trade_treaty_KAS	}	
	else_if = { limit = { ROOT = { tag = CTL } } add_ideas = trade_treaty_CTL	}	
	else_if = { limit = { ROOT = { tag = MAC } } add_ideas = trade_treaty_MAC	}	
	else_if = { limit = { ROOT = { tag = SKN } } add_ideas = trade_treaty_SKN	}	
	else_if = { limit = { ROOT = { tag = CAR } } add_ideas = trade_treaty_CAR	}	
	else_if = { limit = { ROOT = { tag = CMR } } add_ideas = trade_treaty_CMR	}	
	else_if = { limit = { ROOT = { tag = DOC } } add_ideas = trade_treaty_DOC	}	
	else_if = { limit = { ROOT = { tag = EQG } } add_ideas = trade_treaty_EQG	}	
	else_if = { limit = { ROOT = { tag = MAD } } add_ideas = trade_treaty_MAD	}	
	else_if = { limit = { ROOT = { tag = GAB } } add_ideas = trade_treaty_GAB	}	
	else_if = { limit = { ROOT = { tag = RCG } } add_ideas = trade_treaty_RCG	}	
	else_if = { limit = { ROOT = { tag = DAR } } add_ideas = trade_treaty_DAR	}	
	else_if = { limit = { ROOT = { tag = SML } } add_ideas = trade_treaty_SML	}	
	else_if = { limit = { ROOT = { tag = SKK } } add_ideas = trade_treaty_SKK	}	
	else_if = { limit = { ROOT = { tag = TAN } } add_ideas = trade_treaty_TAN	}	
	else_if = { limit = { ROOT = { tag = TEX } } add_ideas = trade_treaty_TEX	}	
	else_if = { limit = { ROOT = { tag = LKT } } add_ideas = trade_treaty_LKT	}	
	else_if = { limit = { ROOT = { tag = KEN } } add_ideas = trade_treaty_KEN	}	
	else_if = { limit = { ROOT = { tag = MAN } } add_ideas = trade_treaty_MAN	}	
	else_if = { limit = { ROOT = { tag = QBC } } add_ideas = trade_treaty_QBC	}	
	else_if = { limit = { ROOT = { tag = NMB } } add_ideas = trade_treaty_NMB	}	
	else_if = { limit = { ROOT = { tag = BHR } } add_ideas = trade_treaty_BHR	}	
	else_if = { limit = { ROOT = { tag = SOS } } add_ideas = trade_treaty_SOS	}	
	else_if = { limit = { ROOT = { tag = ABK } } add_ideas = trade_treaty_ABK	}	
	else_if = { limit = { ROOT = { tag = ERI } } add_ideas = trade_treaty_ERI	}	
	else_if = { limit = { ROOT = { tag = GAM } } add_ideas = trade_treaty_GAM	}	
	else_if = { limit = { ROOT = { tag = RWA } } add_ideas = trade_treaty_RWA	}	
	else_if = { limit = { ROOT = { tag = BRD } } add_ideas = trade_treaty_BRD	}	
	else_if = { limit = { ROOT = { tag = HWI } } add_ideas = trade_treaty_HWI	}	
	else_if = { limit = { ROOT = { tag = FIJ } } add_ideas = trade_treaty_FIJ	}	
	else_if = { limit = { ROOT = { tag = PNG } } add_ideas = trade_treaty_PNG	}	
	else_if = { limit = { ROOT = { tag = GND } } add_ideas = trade_treaty_GND	}	
	else_if = { limit = { ROOT = { tag = KAG } } add_ideas = trade_treaty_KAG	}	
	else_if = { limit = { ROOT = { tag = SKS } } add_ideas = trade_treaty_SKS	}	
	else_if = { limit = { ROOT = { tag = MLT } } add_ideas = trade_treaty_MLT	}	
	else_if = { limit = { ROOT = { tag = PLU } } add_ideas = trade_treaty_PLU	}	
	else_if = { limit = { ROOT = { tag = VOJ } } add_ideas = trade_treaty_VOJ	}	
	else_if = { limit = { ROOT = { tag = GYA } } add_ideas = trade_treaty_GYA	}	
	else_if = { limit = { ROOT = { tag = SRP } } add_ideas = trade_treaty_SRP	}	
	else_if = { limit = { ROOT = { tag = BOS } } add_ideas = trade_treaty_BOS	}	
	else_if = { limit = { ROOT = { tag = BAD } } add_ideas = trade_treaty_BAD	}	
	else_if = { limit = { ROOT = { tag = SVI } } add_ideas = trade_treaty_SVI	}	
	else_if = { limit = { ROOT = { tag = SIE } } add_ideas = trade_treaty_SIE	}	
	else_if = { limit = { ROOT = { tag = SOL } } add_ideas = trade_treaty_SOL	}	
	else_if = { limit = { ROOT = { tag = STL } } add_ideas = trade_treaty_STL	}	
	else_if = { limit = { ROOT = { tag = DJI } } add_ideas = trade_treaty_DJI	}	
	else_if = { limit = { ROOT = { tag = HOK } } add_ideas = trade_treaty_HOK	}	
	else_if = { limit = { ROOT = { tag = AGN } } add_ideas = trade_treaty_AGN	}		
	else_if = { limit = { ROOT = { tag = GAG } } add_ideas = trade_treaty_GAG	}	
	else_if = { limit = { ROOT = { tag = SWK } } add_ideas = trade_treaty_SWK	}	
	else_if = { limit = { ROOT = { tag = NAU } } add_ideas = trade_treaty_NAU	}	
	else_if = { limit = { ROOT = { tag = SGP } } add_ideas = trade_treaty_SGP	}	
	else_if = { limit = { ROOT = { tag = NFL } } add_ideas = trade_treaty_NFL	}	
	else_if = { limit = { ROOT = { tag = NGK } } add_ideas = trade_treaty_NGK	}	
	else_if = { limit = { ROOT = { tag = ADS } } add_ideas = trade_treaty_ADS	}	
	else_if = { limit = { ROOT = { tag = BLZ } } add_ideas = trade_treaty_BLZ	}	
	else_if = { limit = { ROOT = { tag = BRT } } add_ideas = trade_treaty_BRT	}	
	else_if = { limit = { ROOT = { tag = BFR } } add_ideas = trade_treaty_BFR	}	
	else_if = { limit = { ROOT = { tag = SMK } } add_ideas = trade_treaty_SMK	}	
	else_if = { limit = { ROOT = { tag = ZAR } } add_ideas = trade_treaty_ZAR	}	
	else_if = { limit = { ROOT = { tag = ORJ } } add_ideas = trade_treaty_ORJ	}	
	else_if = { limit = { ROOT = { tag = ALN } } add_ideas = trade_treaty_ALN	}	
	else_if = { limit = { ROOT = { tag = SHX } } add_ideas = trade_treaty_SHX	}	
	else_if = { limit = { ROOT = { tag = XSM } } add_ideas = trade_treaty_XSM	}	
	else_if = { limit = { ROOT = { tag = GXC } } add_ideas = trade_treaty_GXC	}	
	else_if = { limit = { ROOT = { tag = CAB } } add_ideas = trade_treaty_CAB	}	
	else_if = { limit = { ROOT = { tag = SMI } } add_ideas = trade_treaty_SMI	}	
	else_if = { limit = { ROOT = { tag = FLA } } add_ideas = trade_treaty_FLA	}	
	else_if = { limit = { ROOT = { tag = WAL } } add_ideas = trade_treaty_WAL	}	
	else_if = { limit = { ROOT = { tag = DMN } } add_ideas = trade_treaty_DMN	}	
	else_if = { limit = { ROOT = { tag = NIR } } add_ideas = trade_treaty_NIR	}	
	else_if = { limit = { ROOT = { tag = REN } } add_ideas = trade_treaty_REN	}	
}

influence_nation = {
	if = {  limit = { ROOT = { has_government = conservative } } add_popularity = { ideology = conservative popularity = 0.05 } }
	else_if = {  limit = { ROOT = { has_government = Liberal_Conservatism } } add_popularity = { ideology = Liberal_Conservatism popularity = 0.05 } }
	else_if = {  limit = { ROOT = { has_government = Christian_Democratic } } add_popularity = { ideology = Christian_Democratic popularity = 0.05 } }
	else_if = {  limit = { ROOT = { has_government = socialist } } add_popularity = { ideology = socialist popularity = 0.05 } }
	else_if = {  limit = { ROOT = { has_government = Social_Democratic } } add_popularity = { ideology = Social_Democratic popularity = 0.05 } }
	else_if = {  limit = { ROOT = { has_government = Social_Liberalism } } add_popularity = { ideology = Social_Liberalism popularity = 0.05 } }
	else_if = {  limit = { ROOT = { has_government = democratic } } add_popularity = { ideology = democratic popularity = 0.05 } }
	else_if = {  limit = { ROOT = { has_government = centrist } } add_popularity = { ideology = centrist popularity = 0.05 } }
	else_if = {  limit = { ROOT = { has_government = liberal } } add_popularity = { ideology = liberal popularity = 0.05 } }
	else_if = {  limit = { ROOT = { has_government = communism } } add_popularity = { ideology = communism popularity = 0.05 } }
	else_if = {  limit = { ROOT = { has_government = trotskyism } } add_popularity = { ideology = trotskyism popularity = 0.05 } }
	else_if = {  limit = { ROOT = { has_government = maoism } } add_popularity = { ideology = maoism popularity = 0.05 } }
	else_if = {  limit = { ROOT = { has_government = fascism } } add_popularity = { ideology = fascism popularity = 0.05 } }
	else_if = {  limit = { ROOT = { has_government = nationalist } } add_popularity = { ideology = nationalist popularity = 0.05 } }
	else_if = {  limit = { ROOT = { has_government = monarchism } } add_popularity = { ideology = monarchism popularity = 0.05 } }
	else_if = {  limit = { ROOT = { has_government = neutrality } } add_popularity = { ideology = neutrality popularity = 0.05 } }
	else_if = {  limit = { ROOT = { has_government = islamism } } add_popularity = { ideology = islamism popularity = 0.05 } }
	else_if = {  limit = { ROOT = { has_government = radical_shiaism } } add_popularity = { ideology = radical_shiaism popularity = 0.05 } }
	else_if = {  limit = { ROOT = { has_government = Salafism } } add_popularity = { ideology = Salafism popularity = 0.05 } }
}

successul_coup_effect = {
	if = {  limit = { FROM = { has_government = conservative } } set_politics = { ruling_party = conservative elections_allowed = no } }
	else_if = {  limit = { FROM = { has_government = Liberal_Conservatism } } set_politics = { ruling_party = Liberal_Conservatism elections_allowed = no } }
	else_if = {  limit = { FROM = { has_government = Christian_Democratic } } set_politics = { ruling_party = Christian_Democratic elections_allowed = no } }
	else_if = {  limit = { FROM = { has_government = socialist } } set_politics = { ruling_party = socialist elections_allowed = no } }
	else_if = {  limit = { FROM = { has_government = Social_Democratic } } set_politics = { ruling_party = Social_Democratic elections_allowed = no } }
	else_if = {  limit = { FROM = { has_government = Social_Liberalism } } set_politics = { ruling_party = Social_Liberalism elections_allowed = no } }
	else_if = {  limit = { FROM = { has_government = democratic } } set_politics = { ruling_party = democratic elections_allowed = no } }
	else_if = {  limit = { FROM = { has_government = centrist } } set_politics = { ruling_party = centrist elections_allowed = no } }
	else_if = {  limit = { FROM = { has_government = liberal } } set_politics = { ruling_party = liberal elections_allowed = no } }
	else_if = {  limit = { FROM = { has_government = communism } } set_politics = { ruling_party = communism elections_allowed = no } }
	else_if = {  limit = { FROM = { has_government = trotskyism } } set_politics = { ruling_party = trotskyism elections_allowed = no } }
	else_if = {  limit = { FROM = { has_government = maoism } } set_politics = { ruling_party = maoism elections_allowed = no } }
	else_if = {  limit = { FROM = { has_government = fascism } } set_politics = { ruling_party = fascism elections_allowed = no } }
	else_if = {  limit = { FROM = { has_government = nationalist } } set_politics = { ruling_party = nationalist elections_allowed = no } }
	else_if = {  limit = { FROM = { has_government = monarchism } } set_politics = { ruling_party = monarchism elections_allowed = no } }
	else_if = {  limit = { FROM = { has_government = neutrality } } set_politics = { ruling_party = neutrality elections_allowed = no } }
	else_if = {  limit = { FROM = { has_government = islamism } } set_politics = { ruling_party = islamism elections_allowed = no } }
	else_if = {  limit = { FROM = { has_government = radical_shiaism } } set_politics = { ruling_party = radical_shiaism elections_allowed = no } }
	else_if = {  limit = { FROM = { has_government = Salafism } } set_politics = { ruling_party = Salafism elections_allowed = no } }
}

influence_nation_coup = {
	if = {  limit = { FROM = { has_government = conservative } } add_popularity = { ideology = conservative popularity = 0.35 } }
	else_if = {  limit = { FROM = { has_government = Liberal_Conservatism } } add_popularity = { ideology = Liberal_Conservatism popularity = 0.35 } }
	else_if = {  limit = { FROM = { has_government = Christian_Democratic } } add_popularity = { ideology = Christian_Democratic popularity = 0.35 } }
	else_if = {  limit = { FROM = { has_government = socialist } } add_popularity = { ideology = socialist popularity = 0.35 } }
	else_if = {  limit = { FROM = { has_government = Social_Democratic } } add_popularity = { ideology = Social_Democratic popularity = 0.35 } }
	else_if = {  limit = { FROM = { has_government = Social_Liberalism } } add_popularity = { ideology = Social_Liberalism popularity = 0.35 } }
	else_if = {  limit = { FROM = { has_government = democratic } } add_popularity = { ideology = democratic popularity = 0.35 } }
	else_if = {  limit = { FROM = { has_government = centrist } } add_popularity = { ideology = centrist popularity = 0.35 } }
	else_if = {  limit = { FROM = { has_government = liberal } } add_popularity = { ideology = liberal popularity = 0.35 } }
	else_if = {  limit = { FROM = { has_government = communism } } add_popularity = { ideology = communism popularity = 0.35 } }
	else_if = {  limit = { FROM = { has_government = trotskyism } } add_popularity = { ideology = trotskyism popularity = 0.35 } }
	else_if = {  limit = { FROM = { has_government = maoism } } add_popularity = { ideology = maoism popularity = 0.35 } }
	else_if = {  limit = { FROM = { has_government = fascism } } add_popularity = { ideology = fascism popularity = 0.35 } }
	else_if = {  limit = { FROM = { has_government = nationalist } } add_popularity = { ideology = nationalist popularity = 0.35 } }
	else_if = {  limit = { FROM = { has_government = monarchism } } add_popularity = { ideology = monarchism popularity = 0.35 } }
	else_if = {  limit = { FROM = { has_government = neutrality } } add_popularity = { ideology = neutrality popularity = 0.35 } }
	else_if = {  limit = { FROM = { has_government = islamism } } add_popularity = { ideology = islamism popularity = 0.35 } }
	else_if = {  limit = { FROM = { has_government = radical_shiaism } } add_popularity = { ideology = radical_shiaism popularity = 0.35 } }
	else_if = {  limit = { FROM = { has_government = Salafism } } add_popularity = { ideology = Salafism popularity = 0.35 } }
}

influence_nation_coup_civil_war = {
	if = {  limit = { FROM = { has_government = conservative } } start_civil_war = { ideology = conservative size = 0.5 } }
	else_if = {  limit = { FROM = { has_government = Liberal_Conservatism } } start_civil_war = { ideology = Liberal_Conservatism size = 0.5 } }
	else_if = {  limit = { FROM = { has_government = Christian_Democratic } } start_civil_war = { ideology = Christian_Democratic size = 0.5 } }
	else_if = {  limit = { FROM = { has_government = socialist } } start_civil_war = { ideology = socialist size = 0.5 } }
	else_if = {  limit = { FROM = { has_government = Social_Democratic } } start_civil_war = { ideology = Social_Democratic size = 0.5 } }
	else_if = {  limit = { FROM = { has_government = Social_Liberalism } } start_civil_war = { ideology = Social_Liberalism size = 0.5 } }
	else_if = {  limit = { FROM = { has_government = democratic } } start_civil_war = { ideology = democratic size = 0.5 } }
	else_if = {  limit = { FROM = { has_government = centrist } } start_civil_war = { ideology = centrist size = 0.5 } }
	else_if = {  limit = { FROM = { has_government = liberal } } start_civil_war = { ideology = liberal size = 0.5 } }
	else_if = {  limit = { FROM = { has_government = communism } } start_civil_war = { ideology = communism size = 0.5 } }
	else_if = {  limit = { FROM = { has_government = trotskyism } } start_civil_war = { ideology = trotskyism size = 0.5 } }
	else_if = {  limit = { FROM = { has_government = maoism } } start_civil_war = { ideology = maoism size = 0.5 } }
	else_if = {  limit = { FROM = { has_government = fascism } } start_civil_war = { ideology = fascism size = 0.5 } }
	else_if = {  limit = { FROM = { has_government = nationalist } } start_civil_war = { ideology = nationalist size = 0.5 } }
	else_if = {  limit = { FROM = { has_government = monarchism } } start_civil_war = { ideology = monarchism size = 0.5 } }
	else_if = {  limit = { FROM = { has_government = neutrality } } start_civil_war = { ideology = neutrality size = 0.5 } }
	else_if = {  limit = { FROM = { has_government = islamism } } start_civil_war = { ideology = islamism size = 0.5 } }
	else_if = {  limit = { FROM = { has_government = radical_shiaism } } start_civil_war = { ideology = radical_shiaism size = 0.5 } }
	else_if = {  limit = { FROM = { has_government = Salafism } } start_civil_war = { ideology = Salafism size = 0.5 } }
}

set_recent_action_check = {
	if = {
		limit = {
			check_variable = { influence_array^0 = ROOT.id }
		}
		add_timed_idea = { idea = influencer1_recent_action days = 120 }
		set_variable = { THIS.idea_len_@token:influencer1_recent_action = 120 }
		set_variable = { THIS.idea_date_@token:influencer1_recent_action = global.num_days }
	}
	if = {
		limit = {
			check_variable = { influence_array^1 = ROOT.id }
		}
		add_timed_idea = { idea = influencer2_recent_action days = 120 }
		set_variable = { THIS.idea_len_@token:influencer2_recent_action = 120 }
		set_variable = { THIS.idea_date_@token:influencer2_recent_action = global.num_days }
	}
	if = {
		limit = {
			check_variable = { influence_array^2 = ROOT.id }
		}
		add_timed_idea = { idea = influencer3_recent_action days = 120 }
		set_variable = { THIS.idea_len_@token:influencer3_recent_action = 120 }
		set_variable = { THIS.idea_date_@token:influencer3_recent_action = global.num_days }
	}
	if = {
		limit = {
			check_variable = { influence_array^3 = ROOT.id }
		}
		add_timed_idea = { idea = influencer4_recent_action days = 120 }
		set_variable = { THIS.idea_len_@token:influencer4_recent_action = 120 }
		set_variable = { THIS.idea_date_@token:influencer4_recent_action = global.num_days }
	}
	if = {
		limit = {
			check_variable = { influence_array^4 = ROOT.id }
		}
		add_timed_idea = { idea = influencer5_recent_action days = 120 }
		set_variable = { THIS.idea_len_@token:influencer5_recent_action = 120 }
		set_variable = { THIS.idea_date_@token:influencer5_recent_action = global.num_days }
	}
	if = {
		limit = {
			check_variable = { influence_array^5 = ROOT.id }
		}
		add_timed_idea = { idea = influencer6_recent_action days = 120 }
		set_variable = { THIS.idea_len_@token:influencer6_recent_action = 120 }
		set_variable = { THIS.idea_date_@token:influencer6_recent_action = global.num_days }
	}
	if = {
		limit = {
			check_variable = { influence_array^6 = ROOT.id }
		}
		add_timed_idea = { idea = influencer7_recent_action days = 120 }
		set_variable = { THIS.idea_len_@token:influencer7_recent_action = 120 }
		set_variable = { THIS.idea_date_@token:influencer7_recent_action = global.num_days }
	}
}

set_recent_action_check_civil_war = {
	if = {
		limit = {
			check_variable = { influence_array^0 = ROOT.id }
		}
		add_ideas = influencer1_civil_war_intervention
	}
	if = {
		limit = {
			check_variable = { influence_array^1 = ROOT.id }
		}
		add_ideas = influencer2_civil_war_intervention
	}
	if = {
		limit = {
			check_variable = { influence_array^2 = ROOT.id }
		}
		add_ideas = influencer3_civil_war_intervention
	}
	if = {
		limit = {
			check_variable = { influence_array^3 = ROOT.id }
		}
		add_ideas = influencer4_civil_war_intervention
	}
	if = {
		limit = {
			check_variable = { influence_array^4 = ROOT.id }
		}
		add_ideas = influencer5_civil_war_intervention
	}
	if = {
		limit = {
			check_variable = { influence_array^5 = ROOT.id }
		}
		add_ideas = influencer6_civil_war_intervention
	}
	if = {
		limit = {
			check_variable = { influence_array^6 = ROOT.id }
		}
		add_ideas = influencer7_civil_war_intervention
	}
}

set_recent_action_check_trade_deal = {
	if = {
		limit = {
			check_variable = { influence_array^0 = ROOT.id }
		}
		add_ideas = influencer1_trade_deal
	}
	if = {
		limit = {
			check_variable = { influence_array^1 = ROOT.id }
		}
		add_ideas = influencer2_trade_deal
	}
	if = {
		limit = {
			check_variable = { influence_array^2 = ROOT.id }
		}
		add_ideas = influencer3_trade_deal
	}
	if = {
		limit = {
			check_variable = { influence_array^3 = ROOT.id }
		}
		add_ideas = influencer4_trade_deal
	}
	if = {
		limit = {
			check_variable = { influence_array^4 = ROOT.id }
		}
		add_ideas = influencer5_trade_deal
	}
	if = {
		limit = {
			check_variable = { influence_array^5 = ROOT.id }
		}
		add_ideas = influencer6_trade_deal
	}
	if = {
		limit = {
			check_variable = { influence_array^6 = ROOT.id }
		}
		add_ideas = influencer7_trade_deal
	}
}

set_recent_action_check_defense_treaty = {
	if = {
		limit = {
			check_variable = { influence_array^0 = ROOT.id }
		}
		add_ideas = influencer1_defense_treaty
	}
	if = {
		limit = {
			check_variable = { influence_array^1 = ROOT.id }
		}
		add_ideas = influencer2_defense_treaty
	}
	if = {
		limit = {
			check_variable = { influence_array^2 = ROOT.id }
		}
		add_ideas = influencer3_defense_treaty
	}
	if = {
		limit = {
			check_variable = { influence_array^3 = ROOT.id }
		}
		add_ideas = influencer4_defense_treaty
	}
	if = {
		limit = {
			check_variable = { influence_array^4 = ROOT.id }
		}
		add_ideas = influencer5_defense_treaty
	}
	if = {
		limit = {
			check_variable = { influence_array^5 = ROOT.id }
		}
		add_ideas = influencer6_defense_treaty
	}
	if = {
		limit = {
			check_variable = { influence_array^6 = ROOT.id }
		}
		add_ideas = influencer7_defense_treaty
	}
}

coup_influence_change_success = {
	if = {
		limit = {
			NOT = { check_variable = { influence_array^0 = ROOT.id } }
		}
		multiply_variable = { influencer1_amount = 0.5 }
	}
	if = {
		limit = {
			NOT = { check_variable = { influence_array^1 = ROOT.id } }
		}
		multiply_variable = { influencer2_amount = 0.5 }
	}
	if = {
		limit = {
			NOT = { check_variable = { influence_array^2 = ROOT.id } }
		}
		multiply_variable = { influencer3_amount = 0.5 }
	}
	if = {
		limit = {
			NOT = { check_variable = { influence_array^3 = ROOT.id } }
		}
		multiply_variable = { influencer4_amount = 0.5 }
	}
	if = {
		limit = {
			NOT = { check_variable = { influence_array^4 = ROOT.id } }
		}
		multiply_variable = { influencer5_amount = 0.5 }
	}
	if = {
		limit = {
			NOT = { check_variable = { influence_array^5 = ROOT.id } }
		}
		multiply_variable = { influencer6_amount = 0.5 }
	}
	if = {
		limit = {
			NOT = { check_variable = { influence_array^6 = ROOT.id } }
		}
		multiply_variable = { influencer7_amount = 0.5 }
	}
	recalculate_influence = yes
}

coup_influence_change_failure = {
	if = {
		limit = {
			check_variable = { influence_array^0 = ROOT.id }
		}
		multiply_variable = { influencer1_amount = 0.25 }
	}
	if = {
		limit = {
			check_variable = { influence_array^1 = ROOT.id }
		}
		multiply_variable = { influencer2_amount = 0.25 }
	}
	if = {
		limit = {
			check_variable = { influence_array^2 = ROOT.id }
		}
		multiply_variable = { influencer3_amount = 0.25 }
	}
	if = {
		limit = {
			check_variable = { influence_array^3 = ROOT.id }
		}
		multiply_variable = { influencer4_amount = 0.25 }
	}
	if = {
		limit = {
			check_variable = { influence_array^4 = ROOT.id }
		}
		multiply_variable = { influencer5_amount = 0.25 }
	}
	if = {
		limit = {
			check_variable = { influence_array^5 = ROOT.id }
		}
		multiply_variable = { influencer6_amount = 0.25 }
	}
	if = {
		limit = {
			check_variable = { influence_array^6 = ROOT.id }
		}
		multiply_variable = { influencer7_amount = 0.25 }
	}
	recalculate_influence = yes
}

generic_grant_5_percent_influence_of_EU = {
	set_temp_variable = { influence_gain = influence_total }
	multiply_temp_variable = { influence_gain = 0.05 } #4%
	multiply_temp_variable = {
		var = influence_gain
		value = AND.influence_multiplier
	} #from global rank idea
	add_to_temp_variable = { influence_gain = 10 } #10 Debugging value to prevent additions by 0
	for_loop_effect = {
		end = influence_array^num
		value = v
		if = {
			limit = {
				check_variable = { influence_array^v = AND }
			}
			add_to_variable = { influence_array_val^v = influence_gain }
			set_country_flag = found
		}
	}
	if = {
		limit = { NOT = { has_country_flag = found } }
		add_to_array = { influence_array = AND.id }
		add_to_array = { influence_array_val = influence_gain }
	}
	clr_country_flag = found
	delete_influencer_check = yes
	recalculate_influence = yes
	custom_effect_tooltip = improve_AND_influence_5_percent_TT

}

