scripted_gui = {


	arab_league_main = {
		window_name = "arab_league_main_container"
		dirty = refresh_arab_league
		
		visible = {
			check_variable = { show_arab_league_main > 0 }
			is_ai = no
			has_country_flag = arab_league_member
	
		}
		ai_enabled = {
			always = no
		}

		effects = {
			exit_arab_league_button_click = {
				set_variable = { show_arab_league_main = 0 }
				set_variable = { show_tutorial_menu = 0 }
			}

			file_menu_button_click = {
				if = {
					limit = { check_variable = { show_file_menu = 1 } }
					set_variable = { show_file_menu = 0 }
				}
				else = {
					set_variable = { show_file_menu = 1 }
				}
			}

			view_menu_button_click = {
				if = {
					limit = { check_variable = { show_view_menu = 1 } }
					set_variable = { show_view_menu = 0 }
				}
				else = {
					set_variable = { show_view_menu = 1 }
				}
			}	

			help_menu_button_click = {
				if = {
					limit = { check_variable = { show_help_menu = 1 } }
					set_variable = { show_help_menu = 0 }
				}
				else = {
					set_variable = { show_help_menu = 1 }
				}
			}						
		}

		triggers = {
			state_targets2_visible = {
				check_variable = { UNS.country_visible = 10 }
			}
		}

		properties = {
			#country_targets = {
			#	image = "[country_targets_icon]"
			#}

			country_targets1={
				image = "[country_targets_icon]"
			}

			#state_targets = {
			#	image = "[state_targets_icon]"
			#}

			state_targets1 = {
				image = "[state_targets_icon]"
			}

			egypt = {
				image = "[EGY_icon]"
			}

			algeria = {
				image = "[ALG_icon]"
			}

			iraq = {
				image = "[IRQ_icon]"
			}

			jordan = {
				image = "[JOR_icon]"
			}

			libya = {
				image = "[LBA_icon]"
			}

			tunisia = {
				image = "[TUN_icon]"
			}

			morocco = {
				image = "[MOR_icon]"
			}

			syria = {
				image = "[SYR_icon]"
			}

			lebanon = {
				image = "[LEB_icon]"
			}

			kuwait = {
				image = "[KUW_icon]"
			}

			yemen = {
				image = "[YEM_icon]"
			}

			oman = {
				image = "[OMA_icon]"
			}

			qatar = {
				image = "[QAT_icon]"
			}

			uae = {
				image = "[UAE_icon]"
			}

			saudi = {
				image = "[SAU_icon]"
			}
		}
	} #arab league end

	arab_league_tab_menu = {
		context_type = player_context
		parent_window_name = "arab_league_main_container"
		window_name = "arab_league_tab"
		
		effects = {
			exitbutton_arab_league_click = {
				ROOT = {
					set_temp_variable = { show = 1 }
					subtract_from_temp_variable = { show = show_un }
					set_variable = { show_un = show }
				}			
			}
			arab_league_submit_proposal_button_click = {
				every_country = {
					limit = {
						has_idea = idea_arab_league_member
					}
					set_variable = {
						arab_check = 1
					}
				}
				if = {
					limit = {
						check_variable = {resolution_confirmed = 0 }
						OR = {							
							check_variable = { root.arab_league_state_target_selected = 1	}
							check_variable = { root.arab_league_nation_target_selected = 1	}
						}
					}
					#country targets hidden
					set_variable = { UNS.country_visible = 0 }

					#set map mode to voting
					set_variable = { UNS.main_screen = 1 }
					
					set_variable = { UNS.session_length = 45 }
					set_variable = { UNS.session_cleanup_length = 60 }
					
					#trigger voting decisions
					UNS = {
						activate_mission = ARAB_LEAGUE_Vote
						activate_mission = ARAB_LEAGUE_Vote_Cleanuo
						set_country_flag = Current_ARAB_LEAGUE_Vote
					}
					

					set_variable = { UNS.country_visible = 0 }
					set_variable = { UNS.state_visible = 0 }

					set_variable = { UNS.arab_league_nation_target = root.arab_league_nation_target }
					set_variable = { UNS.arab_league_action_set = root.arab_league_action_set }
					set_variable = { UNS.arab_league_state_target = root.arab_league_state_target }
					set_variable = { UNS.arab_league_host = THIS.id }
					
					var:root.arab_league_nation_target = {
						save_global_event_target_as = arab_league_nation_global_target
					}
					
					var:root.arab_league_state_target = {
						save_global_event_target_as = arab_league_state_global_target
					}

					var:root.arab_league_state_target = {
						owner = {
							set_variable = { UNS.arab_league_state_target_owner = THIS.id }
						}
					}
					
					var:UNS.arab_league_state_target_owner = {
						save_global_event_target_as = arab_league_state_owner_global_target
					}		
					
					every_country = {
						limit = {
							is_ai = yes
							OR = {
								has_country_flag = arab_league_member	
								has_country_flag = arab_league_founding_member
							}
						}
						ARAB_LEAGUE_ai_vote_sorting = yes
					}

					add_to_variable = {refresh_arab_league= 1 }
					set_variable = {resolution_confirmed = 1 }
				}
			}
		}

		triggers = {
			arab_league_submit_proposal_button_click_enabled = {
				UNS = {
					NOT = { has_country_flag = Current_ARAB_LEAGUE_Vote }
				}
				OR = {
					check_variable = { root.arab_league_nation_target > 0 }
					check_variable = { root.arab_league_state_target > 0 }
				}
			}
		}

		#properties = {
		#
		#	flag_resolution_target = {
		#			image = "[?root.arab_league_nation_target.GetFlag]"
		#		}
		#}
	}

	#relations
	country_arab_league_relations_list = {
		context_type = player_context
		window_name = "arab_league_relations_list_menu"
		parent_window_name = "arab_league_main_container"
		
		dynamic_lists = {
			arab_league_relations_listing_grid = {
				array =  UNS.arab_league_relations_list
				change_scope = yes
				entry_container = arab_league_relations_list_entry
			}
		}
	}

	##influence action list main container
	country_arab_league_influence_influence_action_list = {
		context_type = player_context
		window_name = "arab_league_influence_action_target_list_menu"
		parent_window_name = "arab_league_main_container"
		
		dynamic_lists = {
			arab_league_influence_action_listing_grid = {
				array =  UNS.arab_league_influence_option_list
				change_scope = yes
				entry_container = arab_league_influence_action_target_list_entry
			}
		}
		triggers = {
			arab_league_submit_influence_proposal_button_click_enabled = {
				check_variable = {
					ROOT.influence_countdown = 0
				}
				check_variable = { ROOT.resolution_confirmed = 1 }
			}
			arab_league_influence_action_target_entry_button_click_enabled = {
				check_variable = {
					ROOT.influence_countdown = 0
				}
				check_variable = { ROOT.resolution_confirmed = 1 }
				OR = {
					ROOT = { has_country_flag = ARAB_LEAGUE_YES_ONGOING }
					ROOT = { has_country_flag = ARAB_LEAGUE_NO_ONGOING }
					ROOT = { has_country_flag = ARAB_LEAGUE_ABSTAIN_ONGOING }
				}
				check_variable = { root.arab_league_nation_influence_target > 0 }
			}
			
			
		}
		effects = {
			#influence button click 
			arab_league_submit_influence_proposal_button_click = {
				if = {
					limit = {
						check_variable = { influence_confirmed = 0 }
						check_variable = { influence_chosen = 1 }
						check_variable = { resolution_confirmed = 1 }

						OR = {
							has_country_flag = ARAB_LEAGUE_YES_ONGOING
							has_country_flag = ARAB_LEAGUE_NO_ONGOING
							has_country_flag = ARAB_LEAGUE_ABSTAIN_ONGOING
						}

					}	
					set_variable = { has_randomised = 0 }

					#set map mode to voting
					set_variable = { UNS.main_screen = 1 }
					
					
					#target nation set
					set_variable = { UNS.arab_league_nation_influence_target = root.arab_league_nation_influence_target }
					set_variable = { UNS.arab_league_influence_action_set = root.arab_league_influence_action_set }
					set_variable = { UNS.arab_league_state_influence_target = root.arab_league_state_influence_target }

					#action 1-16 effects
					add_to_variable = { UNS.randomised_acceptance_var = 0}

					##appease government
					if = {
						limit = {
							AND = {
								check_variable = { UNS.arab_league_influence_action_set = 0 }
								ROOT = {
									has_political_power > 100
								}
							}
						}
						var:root.arab_league_nation_influence_target = {
										
							randomize_variable = {
									var = UNS.randomised_acceptance_var
									distribution = uniform
									min = 5
									max = 12
							}

							add_to_variable = {randomised_acceptance = UNS.randomised_acceptance_var}
							add_opinion_modifier = {
								target = ROOT
								modifier = large_increase 
							}
							reverse_add_opinion_modifier = {
								target = ROOT
								modifier = large_increase
							}
						}
						ROOT = {
							add_political_power = -100
							activate_mission = ARAB_LEAGUE_influence_calc
						}
						set_variable = { influence_confirmed = 1 }
						set_variable = { influence_countdown=1 }
					}

					##denounce as anti arab state
					if = {
						limit = {
							AND = {
								check_variable = { UNS.arab_league_influence_action_set = 1 }
								ROOT = {
									has_political_power > 50
								}
							}
						}
						var:root.arab_league_nation_influence_target = {
							randomize_variable = {
									var = UNS.randomised_acceptance_var
									distribution = uniform
									min = 5
									max = 12
							}
							subtract_from_variable = {randomised_acceptance = UNS.randomised_acceptance_var}
							add_opinion_modifier = {
								target = ROOT
								modifier = large_decrease
							}
							every_country = {
								if = {
									limit = {
										has_variable = arab_league_member
									}
									add_opinion_modifier = {
										target = PREV
										modifier = large_decrease
									}
									reverse_add_opinion_modifier = {
										target = PREV
										modifier = large_decrease
									}
								}
							}
						}
						ROOT = {
							add_political_power = -50
							activate_mission = ARAB_LEAGUE_influence_calc
						}
						set_variable = { influence_confirmed = 1 }
						set_variable = { influence_countdown=1 }
					}

					#Boost national influence
					if = {
						limit = {
							AND = { 
								check_variable = { UNS.arab_league_influence_action_set = 2 }
								ROOT = {
									AND = {
										has_intelligence_agency = yes
										has_political_power > 100
									}
								}
							}
						}
						var:root.arab_league_nation_influence_target = {
							randomize_variable = {
									var = UNS.randomised_acceptance_var
									distribution = uniform
									min = 5
									max = 15
							}
							subtract_from_variable = {randomised_acceptance = UNS.randomised_acceptance_var}
							for_loop_effect = {
								end = influence_array^num
								value = v
								if = {
									limit = {
										check_variable = {
											influence_array^v = ROOT
										}
									}
									add_to_variable = {
										influence_array_val^v = 100
									}
									set_country_flag = found
								}
							}
							if = {
								limit = {
									NOT = {
										has_country_flag = found
									}
								}
								add_to_array = {
									influence_array = ROOT.id
								}
								add_to_array = {
									influence_array_val = 100
								}
							}
							clr_country_flag = found
							recalculate_influence = yes
						}
						ROOT = {
							add_political_power = -100
							activate_mission = ARAB_LEAGUE_influence_calc
						}
						set_variable = { influence_confirmed = 1 }
						set_variable = { influence_countdown=1 }
					}

					#send economic aid
					if = {
						limit = {
							check_variable = { UNS.arab_league_influence_action_set = 3 }
						}
						var:root.arab_league_nation_influence_target = {
							randomize_variable = {
									var = UNS.randomised_acceptance_var
									distribution = uniform
									min = 5
									max = 12
							}
							add_to_variable = {randomised_acceptance = UNS.randomised_acceptance_var}
							add_timed_idea = { idea = moderate_foreign_economic_aid  days = 100 }
							add_timed_idea = { idea = idea_arab_league_civs_positive  days = 100 }
						}
						ROOT = {
							add_timed_idea = { idea = idea_arab_league_civs_negative  days = 100 }
							activate_mission = ARAB_LEAGUE_influence_calc
						}
						set_variable = { influence_confirmed = 1 }
						set_variable = { influence_countdown=1 }
					}

					#send insult
					if = {
						limit = {
							AND = {
								check_variable = { UNS.arab_league_influence_action_set = 4 }
								ROOT = {
									has_political_power > 10
								}
							}
						}
						var:root.arab_league_nation_influence_target = {
							randomize_variable = {
									var = UNS.randomised_acceptance_var
									distribution = uniform
									min = 8
									max = 14
							}
							subtract_from_variable = {randomised_acceptance = UNS.randomised_acceptance_var}
							add_opinion_modifier = {
								target = ROOT
								modifier = large_decrease
							}
						}
						ROOT = {
							add_political_power = -10
							activate_mission = ARAB_LEAGUE_influence_calc
						}
						set_variable = { influence_confirmed = 1 }
						set_variable = { influence_countdown=1 }
					}

					#threaten sanctions
					if = {
						limit = {
							AND = {
								check_variable = { UNS.arab_league_influence_action_set = 5 }
								ROOT = {
									has_political_power > 100
								}
							}
						}
						var:root.arab_league_nation_influence_target = {
							country_event = {
								id = ARAB_LEAGUE_RESOLUTION.506
							}
						}
						ROOT = {
							add_political_power = -100
							activate_mission = ARAB_LEAGUE_influence_calc
						}
						set_variable = { influence_confirmed = 1 }
						set_variable = { influence_countdown=1 }
					}

					#disparage internationally
					if = {
						limit = {
							check_variable = { UNS.arab_league_influence_action_set = 6 }
						}
						var:root.arab_league_nation_influence_target = {
							randomize_variable = {
									var = UNS.randomised_acceptance_var
									distribution = uniform
									min = 8
									max = 18
							}
							subtract_from_variable = {randomised_acceptance = UNS.randomised_acceptance_var}
						}
						ROOT = {
							activate_mission = ARAB_LEAGUE_influence_calc
						}
						set_variable = { influence_confirmed = 1 }
						set_variable = { influence_countdown=1 }
					}

					#strengthen diplomatic ties
					if = {
						limit = {
							AND = {
								check_variable = { UNS.arab_league_influence_action_set = 7 }
								ROOT = {
									has_political_power > 50
								}
							}
						}
						var:root.arab_league_nation_influence_target = {
							randomize_variable = {
									var = UNS.randomised_acceptance_var
									distribution = uniform
									min = 3
									max = 8
							}
							add_to_variable = {randomised_acceptance = UNS.randomised_acceptance_var}
							add_opinion_modifier = {
								target = ROOT
								modifier = medium_increase 
							}
							reverse_add_opinion_modifier = {
								target = ROOT
								modifier = medium_increase
							}
						}
						ROOT = {
							add_political_power = -50
							activate_mission = ARAB_LEAGUE_influence_calc
						}
						set_variable = { influence_confirmed = 1 }
						set_variable = { influence_countdown=1 }
					}

					#send tanks
					if = {
						limit = {
							check_variable = { UNS.arab_league_influence_action_set = 8 }
						}
						var:root.arab_league_nation_influence_target = {
							randomize_variable = {
									var = UNS.randomised_acceptance_var
									distribution = uniform
									min = 15
									max = 22
							}
							add_to_variable = {randomised_acceptance = UNS.randomised_acceptance_var}
						}
						ROOT = {
							send_equipment = {
								target = var:root.arab_league_nation_influence_target
								type = mbt_equipment
								amount = 50
							}
							activate_mission = ARAB_LEAGUE_influence_calc
						}
						set_variable = { influence_confirmed = 1 }
						set_variable = { influence_countdown=1 }
					}

					#send aircraft
					if = {
						limit = {
							check_variable = { UNS.arab_league_influence_action_set = 9 }
						}
						var:root.arab_league_nation_influence_target = {
							randomize_variable = {
									var = UNS.randomised_acceptance_var
									distribution = uniform
									min = 15
									max = 20
							}
							add_to_variable = {randomised_acceptance = UNS.randomised_acceptance_var}
						}
						ROOT = {
							send_equipment = {
								target = var:root.arab_league_nation_influence_target
								type = fighter_equipment
								amount = 10
							}
							activate_mission = ARAB_LEAGUE_influence_calc
						}
						set_variable = { influence_confirmed = 1 }
						set_variable = { influence_countdown=1 }
					}

					#send naval craft
					if = {
						limit = {
							check_variable = { UNS.arab_league_influence_action_set = 10 }
						}
						var:root.arab_league_nation_influence_target = {
							randomize_variable = {
									var = UNS.randomised_acceptance_var
									distribution = uniform
									min = 15
									max = 20
							}
							add_to_variable = {randomised_acceptance = UNS.randomised_acceptance_var}
							add_timed_idea = { idea = idea_arab_league_docks_positive  days = 100 }
						}
						ROOT = {
							add_timed_idea = { idea = idea_arab_league_docks_negative  days = 100 }
							activate_mission = ARAB_LEAGUE_influence_calc
						}
						set_variable = { influence_confirmed = 1 }
						set_variable = { influence_countdown=1 }
					}

					#sign defensive treaty
					if = {
						limit = {
							AND = {
								check_variable = { UNS.arab_league_influence_action_set = 11 }
								ROOT = {
									has_political_power > 500
								}
							}
						}
						var:root.arab_league_nation_influence_target = {
							randomize_variable = {
									var = UNS.randomised_acceptance_var
									distribution = uniform
									min = 15
									max = 25
							}
							add_to_variable = {randomised_acceptance = UNS.randomised_acceptance_var}
							country_event = {
								id = ARAB_LEAGUE_RESOLUTION.508
							}
						}
						ROOT = {
							add_political_power = -500
							activate_mission = ARAB_LEAGUE_influence_calc
						}
						set_variable = { influence_confirmed = 1 }
						set_variable = { influence_countdown=1 }
					}

					#make religious gestures
					if = {
						limit = {
							check_variable = { UNS.arab_league_influence_action_set = 12 }
						}
						var:root.arab_league_nation_influence_target = {
							randomize_variable = {
									var = UNS.randomised_acceptance_var
									distribution = uniform
									min = 7
									max = 11
							}
							add_to_variable = {randomised_acceptance = UNS.randomised_acceptance_var}
						}
						ROOT = {
							activate_mission = ARAB_LEAGUE_influence_calc
						}
						set_variable = { influence_confirmed = 1 }
						set_variable = { influence_countdown=1 }
					}

					#bribe senior officials  (10 billion)
					if = {
						limit = {
							check_variable = { UNS.arab_league_influence_action_set = 13 }
						}
						random_list = {
							75 = {
								var:root.arab_league_nation_influence_target = {
									randomize_variable = {
											var = UNS.randomised_acceptance_var
											distribution = uniform
											min = 18
											max = 23
									}
									add_to_variable = {randomised_acceptance = UNS.randomised_acceptance_var}
									add_to_variable = {
										CorruptionLevel = 0.05
									}
									corruption_idea_calc = yes
								}
							}
							25 = {
								var:root.arab_league_nation_influence_target = {
									country_event = {
										id = ARAB_LEAGUE_RESOLUTION.508
									}
								}
							}
						}
						ROOT = {
							subtract_from_variable = { currentMoney = 10 }
							activate_mission = ARAB_LEAGUE_influence_calc
						}
						set_variable = { influence_confirmed = 1 }
						set_variable = { influence_countdown=1 }
					}
					
					##reset array
					ARAB_LEAGUE_array_reset = yes

					#recalculate array
					every_country = {
						limit = {
							has_country_flag = arab_league_member	
							#is_ai = yes
						}
						ARAB_LEAGUE_ai_influence_vote = yes
					}
					add_to_variable = { refresh_arab_league= 1 }
				}
			}
			arab_league_influence_action_target_entry_button_click = { 
				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 0 }
					}
					set_variable = { root.arab_league_influence_action_set = 0 }
					set_variable = { root.influence_chosen = 1 }
				}

				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 1 }
					}
					set_variable = { root.arab_league_influence_action_set = 1 }
					set_variable = { root.influence_chosen = 1 }
				}

				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 2 }
					}
					set_variable = { root.arab_league_influence_action_set = 2 }
					set_variable = { root.influence_chosen = 1 }
				}

				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 3 }
					}
					set_variable = { root.arab_league_influence_action_set = 3 }
					set_variable = { root.influence_chosen = 1 }
				}

				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 4 }
					}
					set_variable = { root.arab_league_influence_action_set = 4 }
					set_variable = { root.influence_chosen = 1 }
				}

				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 5 }
					}
					set_variable = { root.arab_league_influence_action_set = 5 }
					set_variable = { root.influence_chosen = 1 }
				}

				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 6 }
					}
					set_variable = { root.arab_league_influence_action_set = 6 }
					set_variable = { root.influence_chosen = 1 }
				}

				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 7 }
					}
					set_variable = { root.arab_league_influence_action_set = 7 }
					set_variable = { root.influence_chosen = 1 }
				}

				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 8 }
					}
					set_variable = { root.arab_league_influence_action_set = 8 }
					set_variable = { root.influence_chosen = 1 }
				}

				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 9 }
					}
					set_variable = { root.arab_league_influence_action_set = 9 }
					set_variable = { root.influence_chosen = 1 }
				}

				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 10 }
					}
					set_variable = { root.arab_league_influence_action_set = 10 }
					set_variable = { root.influence_chosen = 1 }
				}

				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 11 }
					}
					set_variable = { root.arab_league_influence_action_set = 11 }
					set_variable = { root.influence_chosen = 1 }
				}

				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 12 }
					}
					set_variable = { root.arab_league_influence_action_set = 12 }
					set_variable = { root.influence_chosen = 1 }
				}

				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 13 }
					}
					set_variable = { root.arab_league_influence_action_set = 13 }
					set_variable = { root.influence_chosen = 1 }
				}

				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 14 }
					}
					set_variable = { root.arab_league_influence_action_set = 14 }
					set_variable = { root.influence_chosen = 1 }
				}

				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 15 }
					}
					set_variable = { root.arab_league_influence_action_set = 15 }
					set_variable = { root.influence_chosen = 1 }
				}

				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 16 }
					}
					set_variable = { root.arab_league_influence_action_set = 16 }
					set_variable = { root.influence_chosen = 1 }
				}

				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 17 }
					}
					set_variable = { root.arab_league_influence_action_set = 17 }
					set_variable = { root.influence_chosen = 1 }
				}

				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 18 }
					}
					set_variable = { root.arab_league_influence_action_set = 18 }
					set_variable = { root.influence_chosen = 1 }
				}
				
				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 19 }
					}
					set_variable = { root.arab_league_influence_action_set = 19 }
					set_variable = { root.influence_chosen = 1 }
				}
				
				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 20 }
					}
					set_variable = { root.arab_league_influence_action_set = 20 }
					set_variable = { root.influence_chosen = 1 }
				}

				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 21 }
					}
					set_variable = { root.arab_league_influence_action_set = 21 }
					set_variable = { root.influence_chosen = 1 }
				}

				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 22 }
					}
					set_variable = { root.arab_league_influence_action_set = 22 }
					set_variable = { root.influence_chosen = 1 }
				}

				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 23 }
					}
					set_variable = { root.arab_league_influence_action_set = 23 }
					set_variable = { root.influence_chosen = 1 }
				}

				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 24 }
					}
					set_variable = { root.arab_league_influence_action_set = 24 }
					set_variable = { root.influence_chosen = 1 }
				}

				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 25 }
					}
					set_variable = { root.arab_league_influence_action_set = 25 }
					set_variable = { root.influence_chosen = 1 }
				}

				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 26 }
					}
					set_variable = { root.arab_league_influence_action_set = 26 }
					set_variable = { root.influence_chosen = 1 }
				}

				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 27 }
					}
					set_variable = { root.arab_league_influence_action_set = 27 }
					set_variable = { root.influence_chosen = 1 }
				}

				if = {
					limit = {
						check_variable = { UNS.arab_league_influence_option_list^i = 28 }
					}
					set_variable = { root.arab_league_influence_action_set = 28 }
					set_variable = { root.influence_chosen = 1 }
				}

			}
		}
	}
	
	#country list main container
	influence_list = {
	   context_type = player_context
		window_name = "influence_target_window"
		parent_window_name = "arab_league_main_container"
		visible = {
			NOT = { check_variable = { root.arab_league_action_set = 9 } }
		}	

		effects = {
			iraq_button_click = { 
				if = {
					limit = {
						NOT = {
							tag = IRQ
						}
					}
					set_variable = { root.arab_league_nation_influence_target  = IRQ.id }
				}
			}

			saudi_button_click = { 
				if = {
					limit = {
						NOT = {
							tag = SAU
						}
					}
					set_variable = { root.arab_league_nation_influence_target = SAU.id }
				}
			}

			egypt_button_click = { 
				if = {
					limit = {
						NOT = {
							tag = EGY
						}
					}
					set_variable = { root.arab_league_nation_influence_target = EGY.id }
				}
			}

			jordan_button_click = { 
				if = {
					limit = {
						NOT = {
							tag = JOR
						}
					}
					set_variable = { root.arab_league_nation_influence_target = JOR.id }
				}
			}

			syria_button_click = { 
				if = {
					limit = {
						NOT = {
							tag = SYR
						}
					}
					set_variable = { root.arab_league_nation_influence_target = SYR.id }
				}
			}

			lebanon_button_click = { 
				if = {
					limit = {
						NOT = {
							tag = LEB
						}
					}
					set_variable = { root.arab_league_nation_influence_target = LEB.id }
				}
			}

			qatar_button_click = { 
				if = {
					limit = {
						NOT = {
							tag = QAT
						}
					}
					set_variable = { root.arab_league_nation_influence_target = QAT.id }
				}
			}

			morocco_button_click = { 
				if = {
					limit = {
						MOR = {
							has_country_flag = arab_league_member
						}
						NOT = {
							tag = MOR
						}
					}
					set_variable = { root.arab_league_nation_influence_target = MOR.id }
				}
			}

			algeria_button_click = { 
				if = {
					limit = {
						ALG = {
							has_country_flag = arab_league_member
						}
						NOT = {
							tag = ALG
						}
					}
					set_variable = { root.arab_league_nation_influence_target = ALG.id }
				}
			}

			tunisia_button_click = { 
				if = {
					limit = {
						TUN = {
							has_country_flag = arab_league_member
						}
						NOT = {
							tag = TUN
						}
					}
					set_variable = { root.arab_league_nation_influence_target = TUN.id }
				}
			}

			libya_button_click = { 
				if = {
					limit = {
						LBA = {
							has_country_flag = arab_league_member
						}
						NOT = {
							tag = LBA
						}
					}
					set_variable = { root.arab_league_nation_influence_target = LBA.id }
				}
			}

			oman_button_click = { 
				if = {
					limit = {
						OMA = {
							has_country_flag = arab_league_member
						}
						NOT = {
							tag = OMA
						}
					}
					set_variable = { root.arab_league_nation_influence_target = OMA.id }
				}
			}

			yemen_button_click = { 
				if = {
					limit = {
						YEM = {
							has_country_flag = arab_league_member
						}
						NOT = {
							tag = YEM
						}
					}
					set_variable = { root.arab_league_nation_influence_target = YEM.id }
				}
			}

			kuwait_button_click = { 
				if = {
					limit = {
						KUW = {
							has_country_flag = arab_league_member
						}
						NOT = {
							tag = KUW
						}
					}
					set_variable = { root.arab_league_nation_influence_target = KUW.id }
				}
			}

			uae_button_click = { 
				if = {
					limit = {
						UAE = {
							has_country_flag = arab_league_member
						}
						NOT = {
							tag = UAE
						}
					}
					set_variable = { root.arab_league_nation_influence_target = UAE.id }
				}
			}

			bahrain_button_click = { 
				if = {
					limit = {
						BHR = {
							has_country_flag = arab_league_member
						}
						NOT = {
							tag = BHR
						}
					}
					set_variable = { root.arab_league_nation_influence_target = BHR.id }
				}
			}
		}
	}

	##action list scripted gui
	country_arab_league_action_list = {
		context_type = player_context
		window_name = "arab_league_action_target_list_menu"
		parent_window_name = "arab_league_main_container"
		dynamic_lists = {
			arab_league_action_listing_grid = {
				array =  UNS.arab_league_option_list
				change_scope = yes
				entry_container = arab_league_action_target_list_entry
			}
		}
		triggers = {
			arab_league_action_target_entry_button_click_enabled = {
				check_variable = { ROOT.resolution_confirmed = 0 }
				NOT = {
					AND = {
						check_variable = { UNS.arab_league_option_list^i = 19 }
						has_global_flag = arab_league_1
					}
				}
				NOT = {
					AND = {
						check_variable = { UNS.arab_league_option_list^i = 20 }
						has_global_flag = arab_league_2
					}
				}	
				NOT = {
					AND = {
						check_variable = { UNS.arab_league_option_list^i = 21 }
						has_global_flag = arab_league_3
					}
				}		
				NOT = {
					AND = {
						check_variable = { UNS.arab_league_option_list^i = 22 }
						has_global_flag = arab_league_4
					}
				}	
				NOT = {
					AND = {
						check_variable = { UNS.arab_league_option_list^i = 23 }
						has_global_flag = arab_league_5
					}
				}	
				NOT = {
					AND = {
						check_variable = { UNS.arab_league_option_list^i = 24 }
						has_global_flag = arab_league_6
					}
				}		
				NOT = {
					AND = {
						check_variable = { UNS.arab_league_option_list^i = 25 }
						has_global_flag = arab_league_7
					}
				}	
				NOT = {
					AND = {
						check_variable = { UNS.arab_league_option_list^i = 26 }
						has_global_flag = arab_league_8
					}
				}	
				NOT = {
					AND = {
						check_variable = { UNS.arab_league_option_list^i = 27 }
						has_global_flag = arab_league_9
					}
				}	
				NOT = {
					AND = {
						check_variable = { UNS.arab_league_option_list^i = 28 }
						has_global_flag = arab_league_10
					}
				}	
				OR = {
					AND = {
						check_variable = { UNS.arab_league_option_list^i = 20 }
						has_global_flag = arab_league_1
					}
					AND = {
						check_variable = { UNS.arab_league_option_list^i = 21 }
						has_global_flag = arab_league_2
					}
					AND = {
						check_variable = { UNS.arab_league_option_list^i = 22 }
						has_global_flag = arab_league_3
					}
					AND = {
						check_variable = { UNS.arab_league_option_list^i = 23 }
						has_global_flag = arab_league_4
					}
					AND = {
						check_variable = { UNS.arab_league_option_list^i = 24 }
						has_global_flag = arab_league_5
					}
					AND = {
						check_variable = { UNS.arab_league_option_list^i = 25 }
						has_global_flag = arab_league_6
					}
					AND = {
						check_variable = { UNS.arab_league_option_list^i = 26 }
						has_global_flag = arab_league_7
					}
					AND = {
						check_variable = { UNS.arab_league_option_list^i = 27 }
						has_global_flag = arab_league_8
					}
					AND = {
						check_variable = { UNS.arab_league_option_list^i = 28 }
						has_global_flag = arab_league_9
						check_variable = { UNS.Domestic_Progressbar_Total > 89 }
						NOT = {
							check_variable = { UNS.unite_league_done = 1}
						}
					}
					OR = {
						check_variable = { UNS.arab_league_option_list^i < 20 }
					}
				}

			}
		}
		effects = {
			arab_league_action_target_entry_button_click = { 
				clear_array = ROOT.arab_league_option_country_list
				set_variable = { UNS.country_visible = 1}
				set_variable = {UNS.state_visible = 0}
				set_variable = { root.arab_league_nation_target = 0 }
				set_variable = { root.arab_league_state_target = 0 }
				set_variable = { root.arab_league_nation_target_selected = 0 }
				ROOT = {
					add_to_variable = {refresh_arab_league= 1 }
				}

				#International Decisions
				###############################################################################
				
				##Align with Superpower
				if = {
					limit = {
						check_variable = { UNS.arab_league_option_list^i = 0 }
					}
					set_variable = { root.arab_league_action_set = 0 }
					clear_array = ROOT.arab_league_option_country_list
					add_to_array = { ROOT.arab_league_option_country_list = USA.id }
					add_to_array = { ROOT.arab_league_option_country_list = SOV.id }
				}

				##Condemn Colonialism
				if = {
					limit = {
						check_variable = { UNS.arab_league_option_list^i = 1 }
					}
					set_variable = { root.arab_league_action_set = 1 }
					clear_array = ROOT.arab_league_option_country_list
					every_country = {
						limit = {
							NOT = { tag = ROOT }
							OR = {
								AND = {
									tag = HOL
									OR = {
										any_owned_state = {
											is_on_continent = africa		
										}
										any_owned_state = {
											is_on_continent = asia		
										}										
										any_country = {
											is_subject_of = HOL
											OR = {
												any_owned_state = {
													is_on_continent = africa		
												}
												any_owned_state = {
													is_on_continent = asia		
												}													
											}
										}
									}
								}
								AND = {
									tag = ENG
									OR = {
										any_owned_state = {
											is_on_continent = africa		
										}
										any_owned_state = {
											is_on_continent = asia		
										}										
										any_country = {
											is_subject_of = ENG
											OR = {
												any_owned_state = {
													is_on_continent = africa		
												}
												any_owned_state = {
													is_on_continent = asia		
												}													
											}
										}
									}
								}
								AND = {
									tag = POR
									OR = {
										any_owned_state = {
											is_on_continent = africa		
										}
										any_owned_state = {
											is_on_continent = asia		
										}										
										any_country = {
											is_subject_of = POR
											OR = {
												any_owned_state = {
													is_on_continent = africa		
												}
												any_owned_state = {
													is_on_continent = asia		
												}													
											}
										}
									}
								}
								AND = {
									tag = FRA
									OR = {
										any_owned_state = {
											is_on_continent = africa		
										}
										any_owned_state = {
											is_on_continent = asia		
										}										
										any_country = {
											is_subject_of = FRA
											OR = {
												any_owned_state = {
													is_on_continent = africa		
												}
												any_owned_state = {
													is_on_continent = asia		
												}													
											}
										}
									}
								}
								AND = {
									tag = SPR
									OR = {
										any_owned_state = {
											is_on_continent = africa		
										}
										any_owned_state = {
											is_on_continent = asia		
										}										
										any_country = {
											is_subject_of = SPR
											OR = {
												any_owned_state = {
													is_on_continent = africa		
												}
												any_owned_state = {
													is_on_continent = asia		
												}													
											}
										}
									}
								}
								AND = {
									tag = BEL
									OR = {
										any_owned_state = {
											is_on_continent = africa		
										}
										any_owned_state = {
											is_on_continent = asia		
										}										
										any_country = {
											is_subject_of = BEL
											OR = {
												any_owned_state = {
													is_on_continent = africa		
												}
												any_owned_state = {
													is_on_continent = asia		
												}													
											}
										}
									}
								}
							}
						}
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}
				}

				##Contain Foreign Influence
 				if = {
					limit = {
						check_variable = { UNS.arab_league_option_list^i = 2 }
					}
					set_variable = { root.arab_league_action_set = 2 }
					clear_array = ROOT.arab_league_option_country_list

					every_country = {
						limit = {
							has_country_flag= arab_league_member
						}
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}
				}

				##Ban foreign Diplomats
 				if = {
					limit = {
						check_variable = { UNS.arab_league_option_list^i = 3 }
					}
					set_variable = { root.arab_league_action_set = 3 }
					clear_array = ROOT.arab_league_option_country_list
					every_country = {
						limit = {
							has_country_flag = arab_league_member							
						}
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}
				}

				##Demand Arab State
 				if = {
					limit = {
						check_variable = { UNS.arab_league_option_list^i = 4 }
					}
					set_variable = { root.arab_league_action_set = 4 }
					set_variable = { UNS.country_visible = 0}
					set_variable = {UNS.state_visible = 1}
					ROOT = {
						add_to_variable = {refresh_arab_league= 1 }
					}
					clear_array = ROOT.arab_league_option_state_list
					every_state = {
						limit = {
							is_core_of = ROOT
							NOT = { owner = { tag = ROOT } }
						}
						add_to_array = { ROOT.arab_league_option_state_list = THIS.id }
						set_variable = { ROOT.arab_league_nation_target = ROOT.id }
					}
				}

				##Arab Trade Sanctions
 				if = {
					limit = {
						check_variable = { UNS.arab_league_option_list^i = 5 }
					}
					set_variable = { root.arab_league_action_set = 5 }
					clear_array = ROOT.arab_league_option_country_list
					every_country = {
						limit = {
							check_variable = { badboy > 5 }
							NOT = { tag = ROOT }
						}
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}

					ISR = {
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}

					PER = {
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}

					TUR = {
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}

					ETH = {
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}

					GRE = {
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}

					PAK = {
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}

					RAJ = {
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}
				}

				##Denounce Internationally
 				if = {
					limit = {
						check_variable = { UNS.arab_league_option_list^i = 6 }
					}
					set_variable = { root.arab_league_action_set = 6 }
					clear_array = ROOT.arab_league_option_country_list
					every_country = {
						limit = {
							check_variable = { badboy > 10 }
							NOT = { tag = ROOT }
						}
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}

					ISR = {
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}

					PER = {
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}

					TUR = {
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}
				}

				##Enact Oil Embargo
 				if = {
					limit = {
						check_variable = { UNS.arab_league_option_list^i = 7 }
					}
					set_variable = { root.arab_league_action_set = 7 }
					clear_array = ROOT.arab_league_option_country_list
					
					##check for industrial base
					every_country = {
						limit = {
							num_of_civilian_factories > 30
							NOT = { is_subject = yes }
						}
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}

					##check for negative relations
					every_country = {
						limit = {
							NOT = { is_subject = yes }
							meta_trigger = {
								debug = yes
								text = {									
									has_opinion = {
										target = [CHECKTAG]
										value < -30
									}
								}
								CHECKTAG = "[?UNS.arab_league_host.GetTag]"
							}
						}
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}

					ISR = {
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}

					PER = {
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}

					TUR = {
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}
				}

				##Inter-League Resolutions
				###########################################################################

				##Request Arab Loans
 				if = {
					limit = {
						check_variable = { UNS.arab_league_option_list^i = 8 }
					}
					set_variable = { root.arab_league_action_set = 8 }
					clear_array = ROOT.arab_league_option_country_list
					every_country = {
						limit = {
							has_country_flag = arab_league_member
							is_ai = no
						}
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}
				}

				##Request Control of State
 				if = {
					limit = {
						check_variable = { UNS.arab_league_option_list^i = 9 }
					}
					set_variable = { root.arab_league_action_set = 9 }
					set_variable = { UNS.country_visible = 0}
					set_variable = {UNS.state_visible = 1}
					ROOT = {
						add_to_variable = {refresh_arab_league= 1 }
					}
					clear_array = ROOT.arab_league_option_state_list

					every_state = {
						limit = { owner = { tag = ROOT } }
						every_neighbor_state = {
							limit = {
								NOT={
									owner = { tag = ROOT } 
									
									is_in_array = {
										array = ROOT.arab_league_option_state_list
										value = THIS.id
									}
								}
								owner = { has_country_flag = arab_league_member } 
							}
							add_to_array = { ROOT.arab_league_option_state_list = THIS.id }
							set_variable = { ROOT.arab_league_nation_target = ROOT.id }
						}
					}
				}	

				##declare peacekeeping missions
 				if = {
					limit = { check_variable = { UNS.arab_league_option_list^i = 10 } }
					set_variable = { root.arab_league_action_set = 10 }
					clear_array = ROOT.arab_league_option_country_list
					every_country = {
						limit = {
							has_country_flag = arab_league_member
							has_war = no 
							any_owned_state = {
								has_resistance = yes
							}
						}
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}
				}	

				##request arab intervention	
 				if = {
					limit = { check_variable = { UNS.arab_league_option_list^i = 11 } }
					set_variable = { root.arab_league_action_set = 11 }
					clear_array = ROOT.arab_league_option_country_list
					every_country = {
						limit = {
							has_country_flag = arab_league_member
							has_war = yes 
						}
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}
					set_variable = { UNS.arab_league_nation_target = THIS.id }
				}	

				##embargo arab state
 				if = {
					limit = {
						check_variable = { UNS.arab_league_option_list^i = 12 }
						has_defensive_war = yes 
						OR = {
							has_civil_war = yes
							alliance_strength_ratio < 0.75
						}
						check_variable = { badboy < 15 }
					}
					set_variable = { root.arab_league_action_set = 12 }
					clear_array = ROOT.arab_league_option_country_list
				}	

				##remove embargo
 				if = {
					limit = { check_variable = { UNS.arab_league_option_list^i = 13 } }
					set_variable = { root.arab_league_action_set = 13 }
					clear_array = ROOT.arab_league_option_country_list
					every_country = {
						limit = {
							check_variable = { badboy > 20 }
							NOT = { tag = ROOT }
							has_offensive_war = yes
							alliance_strength_ratio < 1
						}
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}
				}

				##send monetary aid
 				if = {
					limit = { check_variable = { UNS.arab_league_option_list^i = 14 } }
					set_variable = { root.arab_league_action_set = 14 }
					clear_array = ROOT.arab_league_option_country_list
					every_country = {
						limit = { has_country_flag = arab_league_member	 }
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}
				}	

				##send edu aid	
 				if = {
					limit = { check_variable = { UNS.arab_league_option_list^i = 15 } }
					set_variable = { root.arab_league_action_set = 15 }
					clear_array = ROOT.arab_league_option_country_list
					every_country = {
						limit = { has_country_flag = arab_league_member }
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}
				}

				##release nation
 				if = {
					limit = { check_variable = { UNS.arab_league_option_list^i = 16 } }
					set_variable = { root.arab_league_action_set = 16 }
					clear_array = ROOT.arab_league_option_country_list
					set_variable = { root.tag_list = 0 }
					every_country = {
						limit = { has_country_flag = arab_league_member }
						add_to_array = { arab_league_list = THIS.id }
					}	

					for_each_loop = {
						array = global.countries
						if = {
							limit = {
								NOT = { country_exists = v }
								NOT = { check_variable = { v = COG.id } }
								NOT = { check_variable = { v = FCB.id } }
								NOT = { check_variable = { v = KMP.id } }
								NOT = { check_variable = { v = GER.id } }
								NOT = { check_variable = { v = CAP.id } }
								NOT = { check_variable = { v = CUM.id } }
								NOT = { check_variable = { v = MAO.id } }
								NOT = { check_variable = { v = IND.id } }
								NOT = { check_variable = { v = LAO.id } }
								NOT = { check_variable = { v = UNT.id } }
								NOT = { check_variable = { v = CSA.id } }
								NOT = { check_variable = { v = YAN.id } }
								NOT = { check_variable = { v = TAL.id } }
								NOT = { check_variable = { v = SEE.id } }
								NOT = { check_variable = { v = LOP.id } }
								NOT = { check_variable = { v = AGN.id } }
								NOT = { is_in_array = { ROOT.arab_league_option_country_list = v } }
								any_state = {
									is_core_of = v
									owner  = {
										has_country_flag = arab_league_member
									}
								}
							}
							add_to_variable = { root.tag_list = 1 }
							add_to_array = { ROOT.arab_league_option_country_list = v }
						}
					}	
				}

				##increase session length
				if = {
					limit = { check_variable = { UNS.arab_league_option_list^i = 17 } }
					set_variable = { root.arab_league_action_set = 17 }
					clear_array = ROOT.arab_league_option_country_list
					add_to_array = { ROOT.arab_league_option_country_list = UNS.arab_league_host }
				}

				##reset session length
				if = {
					limit = { check_variable = { UNS.arab_league_option_list^i = 18 } }
					set_variable = { root.arab_league_action_set = 18 }
					clear_array = ROOT.arab_league_option_country_list
					add_to_array = { ROOT.arab_league_option_country_list = UNS.arab_league_host }
				}

				##unification resolutions
				################################################################################

				##establish a common economic zone
				if = {
					limit = {
						check_variable = { UNS.arab_league_option_list^i = 19 }
					}
					set_variable = { root.arab_league_action_set = 19 }
					clear_array = ROOT.arab_league_option_country_list
					add_to_array = { ROOT.arab_league_option_country_list = UNS.arab_league_host }
				}

				##establish the azad (free movement) zone
				if = {
					limit = {
						check_variable = { UNS.arab_league_option_list^i = 20 }
					}
					set_variable = { root.arab_league_action_set = 20 }
					clear_array = ROOT.arab_league_option_country_list
					add_to_array = { ROOT.arab_league_option_country_list = UNS.arab_league_host }
				}

				##establish research sharing
				if = {
					limit = {
						check_variable = { UNS.arab_league_option_list^i = 21 }
					}
					set_variable = { root.arab_league_action_set = 21 }
					clear_array = ROOT.arab_league_option_country_list
					add_to_array = { ROOT.arab_league_option_country_list = UNS.arab_league_host }
				}


				##shift league HQ
				if = {
					limit = {
						check_variable = { UNS.arab_league_option_list^i = 22 }
					}
					set_variable = { root.arab_league_action_set = 22 }
					clear_array = ROOT.arab_league_option_country_list
					every_country = {
						limit = {
							has_country_flag = arab_league_member
						}
						add_to_array = { ROOT.arab_league_option_country_list = THIS.id }
					}
				}

				##form arab parliament
				if = {
					limit = {
						check_variable = { UNS.arab_league_option_list^i = 23 }
					}
					set_variable = { root.arab_league_action_set = 23 }
					clear_array = ROOT.arab_league_option_country_list
					add_to_array = { ROOT.arab_league_option_country_list = UNS.arab_league_host }
					
				}

				##reinforce pan arabism
				if = {
					limit = {
						check_variable = { UNS.arab_league_option_list^i = 24 }
					}
					set_variable = { root.arab_league_action_set = 24 }
					clear_array = ROOT.arab_league_option_country_list
					add_to_array = { ROOT.arab_league_option_country_list = UNS.arab_league_host }
				}

				##strengthen league unity
				if = {
					limit = {
						check_variable = { UNS.arab_league_option_list^i = 25 }
					}
					set_variable = { root.arab_league_action_set = 25 }
					clear_array = ROOT.arab_league_option_country_list
					add_to_array = { ROOT.arab_league_option_country_list = UNS.arab_league_host }
				}

				##rally support for unification
				if = {
					limit = {
						check_variable = { UNS.arab_league_option_list^i = 26 }
					}
					set_variable = { root.arab_league_action_set = 26 }
					clear_array = ROOT.arab_league_option_country_list
					add_to_array = { ROOT.arab_league_option_country_list = UNS.arab_league_host }
				}
				##Form the arab front
				if = {
					limit = {
						check_variable = { UNS.arab_league_option_list^i = 27 }
					}
					set_variable = { root.arab_league_action_set = 27 }
					clear_array = ROOT.arab_league_option_country_list
					add_to_array = { ROOT.arab_league_option_country_list = UNS.arab_league_host }
				}
				##unite the league
				if = {
					limit = {
						check_variable = { UNS.arab_league_option_list^i = 28 }
					}
					set_variable = { root.arab_league_action_set = 28 }
					clear_array = ROOT.arab_league_option_country_list
					add_to_array = { ROOT.arab_league_option_country_list = UNS.arab_league_host }
					
				}
			}
		}
	}

	#country list main container
	country_arab_league_country_list = {
	   context_type = player_context
		window_name = "arab_league_action_country_menu"
		parent_window_name = "arab_league_main_container"
		visible = {
			NOT = { 
				OR = {check_variable = { root.arab_league_action_set = 9 } 
					check_variable = { root.arab_league_action_set = 4 }
				}
			}
			check_variable = { UNS.country_visible = 1}
		}
		dynamic_lists = {
			arab_league_action_country_listing_grid = {
				array = ROOT.arab_league_option_country_list
				change_scope = yes
				entry_container = arab_league_action_country_target_entry
			}
		}
		effects = {
			arab_league_action_country_target_entry_button_click = { 
				set_variable = { root.arab_league_nation_target = THIS.id }
				set_variable = { root.arab_league_nation_target_selected = 1 }
			}
		}
		properties = {
			flag = {
				image = "[This.GetFlag]"
			}
		}
	}

	#state list main container / replaces country when relevant resolution selected
	country_arab_league_state_list = {
	   context_type = player_context
		window_name = "arab_league_action_state_menu"
		parent_window_name = "arab_league_main_container"
		visible = {
			OR = {
				check_variable = { root.arab_league_action_set = 9 }
				check_variable = { root.arab_league_action_set = 4 }
			}
			check_variable = { UNS.state_visible = 1}
		}
		dynamic_lists = {
			arab_league_action_state_listing_grid = {
				array = ROOT.arab_league_option_state_list
				change_scope = yes
				entry_container = arab_league_action_state_target_entry
			}
		}
		effects = {
			arab_league_action_state_target_entry_button_click = { 
				set_variable = { root.arab_league_state_target = THIS.id }
				set_variable = { root.arab_league_state_target_selected = 1 }
			}
		}
		properties = {
			flag2 = {
				image = "[This.owner.GetFlag]"
			}
		}
	}

	#yes vote list container
	arab_league_yes_vote_list_gui = {
	   context_type = player_context
		window_name = "arab_league_yes_vote_list"
		parent_window_name = "arab_league_main_container"
		dynamic_lists = {
			arab_league_yes_vote_list_grid = {
				array = UNS.arab_league_vote_yes_list
				change_scope = yes
				entry_container = arab_league_yes_vote_list_entry
			}
		}
		effects = {
			yes_vote_button_click = {
				set_country_flag = ARAB_LEAGUE_YES_ONGOING
				clear_array = UNS.arab_league_vote_yes_list
				add_to_variable = { UNS.arab_league_yes_count = 1 }

				#set for current nation
				set_variable = { randomised_acceptance = 80}

				##reset array
				ARAB_LEAGUE_array_reset = yes

				#recalculate array
				every_country = {
					limit = {
						has_country_flag = arab_league_member	
						#is_ai = yes
					}
					ARAB_LEAGUE_ai_influence_vote = yes
				}

				every_country = {
					limit = { has_country_flag = ARAB_LEAGUE_YES_ONGOING }
					add_to_array = { UNS.arab_league_vote_yes_list = THIS.id }
				}
				if = {
					limit = { has_country_flag = ARAB_LEAGUE_VETO_ONGOING }
					clr_country_flag = ARAB_LEAGUE_VETO_ONGOING
					clear_array = UNS.arab_league_vote_veto_list
					add_to_variable = { UNS.arab_league_veto_count = -1 }
					every_country = {
						limit = { has_country_flag = ARAB_LEAGUE_VETO_ONGOING }
						add_to_array = { UNS.arab_league_vote_veto_list = THIS.id }
					}
				}
				if = {
					limit = { has_country_flag = ARAB_LEAGUE_NO_ONGOING }
					add_to_variable = { UNS.arab_league_no_count = -1 }
					clr_country_flag = ARAB_LEAGUE_NO_ONGOING
					clear_array = UNS.arab_league_vote_no_list
					every_country = {
						limit = { has_country_flag = ARAB_LEAGUE_NO_ONGOING }
						add_to_array = { UNS.arab_league_vote_no_list = THIS.id }
					}
				}
				if = {
					limit = { has_country_flag = ARAB_LEAGUE_ABSTAIN_ONGOING }
					add_to_variable = { UNS.arab_league_abstain_count = -1 }
					clr_country_flag = ARAB_LEAGUE_ABSTAIN_ONGOING
					clear_array = UNS.arab_league_vote_abstain_list
					every_country = {
						limit = { has_country_flag = ARAB_LEAGUE_ABSTAIN_ONGOING }
						add_to_array = { UNS.arab_league_vote_abstain_list = THIS.id }
					}
				}
				add_to_variable = {refresh_arab_league= 1 }
			}
		}
		triggers = {
			yes_vote_button_click_enabled = {
				NOT = { has_country_flag = ARAB_LEAGUE_YES_ONGOING }
				UNS = { has_country_flag = Current_ARAB_LEAGUE_Vote }
			}
		}
	}

	#no vote list container
	arab_league_no_vote_list_gui = {
	   context_type = player_context
		window_name = "arab_league_no_vote_list"
		parent_window_name = "arab_league_main_container"
		dynamic_lists = {
			arab_league_no_vote_list_grid = {
				array = UNS.arab_league_vote_no_list
				change_scope = yes
				entry_container = arab_league_no_vote_list_entry
			}
		}
		effects = {
			no_vote_button_click = {
				add_to_variable = { UNS.arab_league_no_count = 1 }
				set_country_flag = ARAB_LEAGUE_NO_ONGOING

				#set for current nation
				set_variable = { randomised_acceptance = 20}

				##reset array
				ARAB_LEAGUE_array_reset = yes

				#recalculate array
				every_country = {
					limit = {
						has_country_flag = arab_league_member	
						#is_ai = yes
					}
					ARAB_LEAGUE_ai_influence_vote = yes
				}
				clear_array = UNS.arab_league_vote_no_list
				every_country = {
					limit = { has_country_flag = ARAB_LEAGUE_NO_ONGOING }
					add_to_array = { UNS.arab_league_vote_no_list = THIS.id }
				}
				if = {
					limit = { has_country_flag = ARAB_LEAGUE_VETO_ONGOING }
					clr_country_flag = ARAB_LEAGUE_VETO_ONGOING
					clear_array = UNS.arab_league_vote_veto_list
					add_to_variable = { UNS.arab_league_veto_count = -1 }
					every_country = {
						limit = { has_country_flag = ARAB_LEAGUE_VETO_ONGOING }
						add_to_array = { UNS.arab_league_vote_veto_list = THIS.id }
					}
				}
				if = {
					limit = { has_country_flag = ARAB_LEAGUE_YES_ONGOING }
					clr_country_flag = ARAB_LEAGUE_YES_ONGOING
					clear_array = UNS.arab_league_vote_yes_list
					add_to_variable = { UNS.arab_league_yes_count = -1 }
					every_country = {
						limit = { has_country_flag = ARAB_LEAGUE_YES_ONGOING }
						add_to_array = { UNS.arab_league_vote_yes_list = THIS.id }
					}
				}
				if = {
					limit = { has_country_flag = ARAB_LEAGUE_ABSTAIN_ONGOING }
					add_to_variable = { UNS.arab_league_abstain_count = -1 }
					clr_country_flag = ARAB_LEAGUE_ABSTAIN_ONGOING
					clear_array = UNS.arab_league_vote_abstain_list
					every_country = {
						limit = { has_country_flag = ARAB_LEAGUE_ABSTAIN_ONGOING }
						add_to_array = { UNS.arab_league_vote_abstain_list = THIS.id }
					}
				}
				add_to_variable = {refresh_arab_league= 1 }
			}
		}
		triggers = {
			no_vote_button_click_enabled = {
				NOT = { has_country_flag = ARAB_LEAGUE_NO_ONGOING }
				UNS = { has_country_flag = Current_ARAB_LEAGUE_Vote }
			}
		}
	}

	#abstain vote list container
	arab_league_abstain_vote_list_gui = {
	   context_type = player_context
		window_name = "arab_league_abstain_vote_list"
		parent_window_name = "arab_league_main_container"
		dynamic_lists = {
			arab_league_abstain_vote_list_grid = {
				array = UNS.arab_league_vote_abstain_list
				change_scope = yes
				entry_container = arab_league_abstain_vote_list_entry
			}
		}
		effects = {
			abstain_vote_button_click = {
				add_to_variable = { UNS.arab_league_abstain_count = 1 }
				set_country_flag = ARAB_LEAGUE_ABSTAIN_ONGOING

				#set for current nation
				set_variable = { randomised_acceptance = 50 }

				##reset array
				ARAB_LEAGUE_array_reset = yes

				#recalculate array
				every_country = {
					limit = {
						has_country_flag = arab_league_member	
						#is_ai = yes
					}
					ARAB_LEAGUE_ai_influence_vote = yes
				}

				clear_array = UNS.arab_league_vote_abstain_list
				every_country = {
					limit = { has_country_flag = ARAB_LEAGUE_ABSTAIN_ONGOING }
					add_to_array = { UNS.arab_league_vote_abstain_list = THIS.id }
				}
				if = {
					limit = { has_country_flag = ARAB_LEAGUE_VETO_ONGOING }
					clr_country_flag = ARAB_LEAGUE_VETO_ONGOING
					clear_array = UNS.arab_league_vote_veto_list
					add_to_variable = { UNS.arab_league_veto_count = -1 }
					every_country = {
						limit = { has_country_flag = ARAB_LEAGUE_VETO_ONGOING }
						add_to_array = { UNS.arab_league_vote_veto_list = THIS.id }
					}
				}
				if = {
					limit = { has_country_flag = ARAB_LEAGUE_YES_ONGOING }
					clr_country_flag = ARAB_LEAGUE_YES_ONGOING
					clear_array = UNS.arab_league_vote_yes_list
					add_to_variable = { UNS.arab_league_yes_count = -1 }
					every_country = {
						limit = { has_country_flag = ARAB_LEAGUE_YES_ONGOING }
						add_to_array = { UNS.arab_league_vote_yes_list = THIS.id }
					}
				}
				if = {
					limit = { has_country_flag = ARAB_LEAGUE_NO_ONGOING }
					add_to_variable = { UNS.arab_league_no_count = -1 }
					clr_country_flag = ARAB_LEAGUE_NO_ONGOING
					clear_array = UNS.arab_league_vote_no_list
					every_country = {
						limit = { has_country_flag = ARAB_LEAGUE_NO_ONGOING }
						add_to_array = { UNS.arab_league_vote_no_list = THIS.id }
					}
				}
				add_to_variable = {refresh_arab_league= 1 }
			}
		}
		triggers = {
			abstain_vote_button_click_enabled = {
				NOT = { has_country_flag = ARAB_LEAGUE_ABSTAIN_ONGOING }
				UNS = { has_country_flag = Current_ARAB_LEAGUE_Vote }
			}
		}
	}
	
	#member list container
	arab_league_member_list_gui = {
	   context_type = player_context
		window_name = "arab_league_member_list"
		parent_window_name = "arab_league_main_container"
		dynamic_lists = {
			arab_league_member_list_grid = {
				array = UNS.arab_league_total_member_list
				change_scope = yes
				entry_container = arab_league_member_list_entry
			}
		}
	}

	arab_league_file_menu = {
		parent_window_name = "arab_league_main_container"
		window_name = "file_menu"
		dirty = file_menu_refresh
		
		visible = {
			check_variable = { show_file_menu = 1 }
		}
		
		ai_enabled = {
			always = no
		}

		effects = {
			file_menu_button_easter_click = {
				set_temp_variable = { s = show_mine_sweeper }
				set_variable = { show_mine_sweeper = 1 }
				subtract_from_variable = { show_mine_sweeper = s }
				set_temp_variable = { first_run = 1 }
				reset_mines = yes
			}

			file_menu_button_exit_click = {
				set_variable = { show_arab_league_main = 0 }
				set_variable = { show_tutorial_menu = 0 }
				set_variable = { show_file_menu = 0 }
			}								
		}
	}

	arab_league_view_menu = {
		parent_window_name = "arab_league_main_container"
		window_name = "view_menu"
		dirty = view_menu_refresh
		
		visible = {
			check_variable = { show_view_menu = 1 }
		}
		
		ai_enabled = {
			always = no
		}

		effects = {
			view_menu_button_exit_click = {
				set_variable = { show_view_menu = 0 }
			}	
			deprecate_click = {
				add_to_variable = { UNS.Domestic_Progressbar_Total = 10 }
				add_to_variable = { unity_menu_refresh = 1 }
			}	

			view_unify_button_click = {
				if = {
					limit = { check_variable = { show_unity_menu = 1 } }
					set_variable = { show_unity_menu = 0 }
				}
				else = {
					set_variable = { show_unity_menu = 1 }
				}
			}
		}
	}

	arab_league_unity_menu = {
		parent_window_name = "arab_league_main_container"
		window_name = "unity_menu"
		dirty = unity_menu_refresh
		
		visible = {
			check_variable = { show_unity_menu = 1 }
		}
		
		ai_enabled = {
			always = no
		}

		effects = {
			unity_menu_exit_click = {
				set_variable = { show_unity_menu = 0 }
			}
		}

		properties = {
			unity_progressbar = {
				frame = UNS.Domestic_Progressbar_Total
			}
			domestic_phase_progress_icon_10 = {
				frame = ROOT.Domestic_Progressbar_1
			}
			phase_progress_icon_2 = {
				frame = ROOT.Domestic_Progressbar_2
			}
			phase_progress_icon_3 = {
				frame = ROOT.Domestic_Progressbar_3
			}
			domestic_progressbar_content = {
				frame = UNS.Domestic_Progressbar_Total
			}
		}
	}

	arab_league_help_menu = {
		parent_window_name = "arab_league_main_container"
		window_name = "help_menu"
		dirty = help_menu_refresh
		
		visible = {
			check_variable = { show_help_menu = 1 }
		}
		
		ai_enabled = {
			always = no
		}

		effects = {
			help_menu_button_3_click = {
				if = {
					limit = { check_variable = { show_tutorial_menu = 1 } }
					set_variable = { show_tutorial_menu = 0 }
				}
				else = {
					set_variable = { show_tutorial_menu = 1 }
				}
			}

			help_menu_button_exit_click = {
				set_variable = { show_tutorial_menu = 0 }
			}
		}
	}

	arab_league_tutorial_menu = {
		parent_window_name = "arab_league_main_container"
		window_name = "tutorial_menu"
		dirty = tutorial_menu_refresh
		
		visible = {
			check_variable = { show_tutorial_menu = 1 }
		}
		
		ai_enabled = {
			always = no
		}

		effects = {
			tut_menu_exit_click = {
				set_variable = { show_tutorial_menu = 0 }
			}
		}
	}

	arab_league_tutorial_menu = {
		parent_window_name = "arab_league_main_container"
		window_name = "tutorial_menu"
		dirty = tutorial_menu_refresh
		
		visible = {
			check_variable = { show_tutorial_menu = 1 }
		}
		
		ai_enabled = {
			always = no
		}

		effects = {
			tut_menu_exit_click = {
				set_variable = { show_tutorial_menu = 0 }
			}
		}
	}
}
