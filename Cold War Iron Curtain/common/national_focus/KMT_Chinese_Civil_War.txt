focus_tree = {
	id = ROC_50s_Civil_War
	country = {
		factor = 0
		modifier = {
			add = 50
			tag = CHI
		}
		
		
	}
	
	initial_show_position = {
		x = 25
		y = 0 
		 
	}
	
	focus = {
		id = CHI_CIVILWAR_the_chinese_civil_war
		
		icon = GFX_Lessons_of_the_civilwar
		search_filters = {
			IC_FILTER
		}
		cost = 0.2
		x = 25
		y = 0

		available = {
			NOT = {has_global_flag = chinese_civil_war_over}
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetTag]: id = CHI_CIVILWAR_the_chinese_civil_war"
			add_ideas = CHI_Martial_law
		}
	}
	
	focus = {
		id = CHI_CIVILWAR_abandon_mainland
		
		icon = GFX_Retreat_to_Taiwan
		search_filters = {
			IC_FILTER
		}
		cost = 1
		x = 20
		y = 1

		available = {
			NOT = {has_global_flag = chinese_civil_war_over}
		}
		
		prerequisite = {
			focus = CHI_CIVILWAR_the_chinese_civil_war
		}
		
		mutually_exclusive = {
			focus = CHI_CIVILWAR_defend_mainland
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetTag]: id = CHI_CIVILWAR_abandon_mainland"
			set_capital = {state = 593}
			add_timed_idea = {
				idea = CHI_Great_Retreat
				days = 300
			}
			set_variable = { THIS.idea_len_@token:CHI_Great_Retreat = 300 }
            set_variable = { THIS.idea_date_@token:CHI_Great_Retreat = global.num_days }
		}
	}
	
	focus = {
		id = CHI_CIVILWAR_relocate_gold_reserves
		
		icon = GFX_relocate_gold_reserves
		search_filters = {
			IC_FILTER
		}
		cost = 4
		x = 21
		y = 2

		available = {
			NOT = {has_global_flag = chinese_civil_war_over}
		}
		
		prerequisite = {
			focus = CHI_CIVILWAR_abandon_mainland
		}
		
		
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetTag]: id = CHI_CIVILWAR_relocate_gold_reserves"
			swap_ideas = {
					remove_idea = CHI_Inflation_small
					add_idea = CHI_Inflation_small2
			}
			PRC = {
				add_timed_idea = {
					idea = CHI_moved_gold_reserve_PRC
					days = 365
				}
				set_variable = { THIS.idea_len_@token:CHI_moved_gold_reserve_PRC = 365 }
				set_variable = { THIS.idea_date_@token:CHI_moved_gold_reserve_PRC = global.num_days }
			}
			
		}
	}
	
	focus = {
		id = CHI_CIVILWAR_relocate_important_institutions
		
		icon = GFX_move_important_institutions
		search_filters = {
			IC_FILTER
		}
		cost = 2
		x = 19
		y = 2

		available = {
			NOT = {has_global_flag = chinese_civil_war_over}
		}
		
		prerequisite = {
			focus = CHI_CIVILWAR_abandon_mainland
		}
		
		
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetTag]: id = CHI_CIVILWAR_relocate_important_institutions"
			PRC = {
				add_timed_idea = {
					idea = asian_illiteracy_2
					days = 365
				}
				set_variable = { THIS.idea_len_@token:asian_illiteracy_2 = 365 }
				set_variable = { THIS.idea_date_@token:asian_illiteracy_2 = global.num_days }
			}
		}
	}
	
	focus = {
		id = CHI_CIVILWAR_evacuate_civilians
		
		icon = GFX_Evacuate_Civilians_to_taiwan
		search_filters = {
			IC_FILTER
		}
		cost = 5
		x = 20
		y = 3

		available = {
			NOT = {has_global_flag = chinese_civil_war_over}
		}
		
		prerequisite = {
			focus = CHI_CIVILWAR_relocate_important_institutions
		}
		
		prerequisite = {
			focus = CHI_CIVILWAR_relocate_gold_reserves
		}
		
		
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetTag]: id = CHI_CIVILWAR_evacuate_civilians"
			595 = {
				add_manpower = -210000
			}
			596 = {
				add_manpower = -210000
			}
			592 = {
				add_manpower = -210000
			}
			1576 = {
				add_manpower = -10000
			}
			
			593 = {
				add_manpower = 210000
			}
			1547 = {
				add_manpower = 210000
			}
			524 = {
				add_manpower = 210000
			}
			1006 = {
				add_manpower = 10000
			}
			hidden_effect = {
				country_event = { id = bss.227 days = 9 }
			}
		}
	}
	
	focus = {
		id = CHI_CIVILWAR_fortify_taiwan
		
		icon = GFX_Defend_Taiwan
		search_filters = {
			IC_FILTER
		}
		cost = 7
		x = 19
		y = 4

		available = {
			NOT = {has_global_flag = chinese_civil_war_over}
		}
		
		prerequisite = {
			focus = CHI_CIVILWAR_evacuate_civilians
		}
		
		mutually_exclusive = {
			focus = CHI_CIVILWAR_fortify_hainan
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetTag]: id = CHI_CIVILWAR_fortify_taiwan"
				593 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = coastal_bunker
						level = 1
						province = 7186
						instant_build = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 1
						province = 7214
						instant_build = yes
					}
					
				}	
				
				1547 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = coastal_bunker
						level = 1
						province = 12068
						instant_build = yes
					}
					
					
				}
				
				524 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = coastal_bunker
						level = 1
						province = 1091
						instant_build = yes
					}
					
					
				}
		}
	}
	
	focus = {
		id = CHI_CIVILWAR_fortify_hainan
		
		icon = GFX_Defend_Hainan
		search_filters = {
			IC_FILTER
		}
		cost = 7
		x = 21
		y = 4

		available = {
			NOT = {has_global_flag = chinese_civil_war_over}
		}
		
		prerequisite = {
			focus = CHI_CIVILWAR_evacuate_civilians
		}
		
		mutually_exclusive = {
			focus = CHI_CIVILWAR_fortify_taiwan
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetTag]: id = CHI_CIVILWAR_fortify_hainan"
				591 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = coastal_bunker
						level = 1
						province = 1070
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 1
						province = 1070
						instant_build = yes
					}
					
					add_building_construction = {
						type = coastal_bunker
						level = 1
						province = 11963
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 1
						province = 11963
						instant_build = yes
					}
					
				}	
				
				
			
			
		}
	}
	
	focus = {
		id = CHI_CIVILWAR_our_darkest_hour
		
		icon = GFX_fall_of_mainland
		search_filters = {
			IC_FILTER
		}
		cost = 1
		x = 20
		y = 5

		available = {
			always = no
		}
		
		prerequisite = {
			focus = CHI_CIVILWAR_fortify_taiwan
			focus = CHI_CIVILWAR_fortify_hainan
		}
		
		
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetTag]: id = CHI_CIVILWAR_our_darkest_hour"
			country_event = bss.221
			
				
		}
	}
	
	focus = {
		id = CHI_CIVILWAR_defend_mainland
		
		icon = GFX_Continu_fight
		search_filters = {
			IC_FILTER
		}
		cost = 2
		x = 30
		y = 1

		prerequisite = {
			focus = CHI_CIVILWAR_the_chinese_civil_war
		}
		
		mutually_exclusive = {
			focus = CHI_CIVILWAR_abandon_mainland
		}
		
		available = {
			NOT = {has_global_flag = chinese_civil_war_over}
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetTag]: id = CHI_CIVILWAR_defend_mainland"
			
			add_timed_idea = {
				idea = CHI_defend_free_china
				days = 730
			}
			set_variable = { THIS.idea_len_@token:CHI_defend_free_china = 730 }
            set_variable = { THIS.idea_date_@token:CHI_defend_free_china = global.num_days }
			add_command_power = 100
		}
	}
	
	focus = {
		id = CHI_CIVILWAR_call_for_foreign_support
		
		icon = GFX_usa_50_bring_the_issue_to_the_UN
		search_filters = {
			IC_FILTER
		}
		cost = 4
		x = 34
		y = 2

		prerequisite = {
			focus = CHI_CIVILWAR_defend_mainland
		}
		
		
		
		available = {
			NOT = {has_global_flag = chinese_civil_war_over}
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetTag]: id = CHI_CIVILWAR_call_for_foreign_support"
			news_event = bss.222
		}
	}
	
	focus = {
		id = CHI_CIVILWAR_western_guns
		
		icon = GFX_usa_50_ramp_up_equipment_shipments
		search_filters = {
			IC_FILTER
		}
		cost = 4
		x = 33
		y = 3

		prerequisite = {
			focus = CHI_CIVILWAR_call_for_foreign_support
		}
		
		
		
		available = {
			NOT = {has_global_flag = chinese_civil_war_over}
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetTag]: id = CHI_CIVILWAR_western_guns"
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 3000
				producer = USA
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 500
				producer = USA
			}
			add_equipment_to_stockpile = {
				type = motorized_equipment_2
				amount = 400
				producer = USA
			}
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 3000
				producer = ENG
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 500
				producer = ENG
			}
			add_equipment_to_stockpile = {
				type = motorized_equipment
				amount = 400
				producer = ENG
			}
		}
	}
	
	focus = {
		id = CHI_CIVILWAR_request_american_planes
		
		icon = GFX_usa_50_begin_replacing_w_demons
		search_filters = {
			IC_FILTER
		}
		cost = 4
		x = 35
		y = 3

		prerequisite = {
			focus = CHI_CIVILWAR_call_for_foreign_support
		}
		
		
		
		available = {
			NOT = {has_global_flag = chinese_civil_war_over}
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetTag]: id = CHI_CIVILWAR_western_guns"
			add_equipment_to_stockpile = {
				type = fighter_equipment_3
				amount = 200
				producer = USA
			}
			
		}
	}
	
	focus = {
		id = CHI_CIVILWAR_request_army_fonds
		
		icon = GFX_usa_truman_tax_relief_for_poor
		search_filters = {
			IC_FILTER
		}
		cost = 4
		x = 34
		y = 5

		prerequisite = {
			focus = CHI_CIVILWAR_western_guns
		}
		
		prerequisite = {
			focus = CHI_CIVILWAR_request_american_planes
		}
		
		
		
		available = {
			NOT = {has_global_flag = chinese_civil_war_over}
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetTag]: id = CHI_CIVILWAR_request_army_fonds"
			add_to_variable = {
				MutualAssistanceProgramFunding = 20
			}
			custom_effect_tooltip = moderately_increase_mutual_assistance_funding
			524 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
				
			}
		}
	}
	
	
	
	focus = {
		id = CHI_CIVILWAR_fortify_shanghai
		
		icon = GFX_Defend_Shanghai
		search_filters = {
			IC_FILTER
		}
		cost = 3
		x = 27
		y = 2

		prerequisite = {
			focus = CHI_CIVILWAR_defend_mainland
		}
		
		
		
		
		available = {
			NOT = {has_global_flag = chinese_civil_war_over}
			CHI = {controls_state = 613}
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetTag]: id = CHI_CIVILWAR_fortify_shanghai"
			
			613 = {
					add_extra_state_shared_building_slots = 1
					
					add_building_construction = {
						type = bunker
						level = 2
						province = 7014
						instant_build = yes
					}		
			}
			if = {
				limit = {
					has_game_rule = {
								rule = chinese_civil_war_mode
								option = New_Chinese_Civil_War
					}
				}
				CHI = {
						add_days_mission_timeout = {
							mission = The_Shanghai_Campaign 
							days = -10
						}
				}
			}		
		}
	}
	
	
		

	
	focus = {
		id = CHI_CIVILWAR_Central_Command_CKS
		
		icon = GFX_Central_command_cks
		search_filters = {
			IC_FILTER
		}
		cost = 5
		x = 27
		y = 3

		prerequisite = {
			focus = CHI_CIVILWAR_fortify_shanghai
			
		}
		
		
		
		
		
		available = {
			NOT = {has_global_flag = chinese_civil_war_over}
			has_country_leader = {
					name = "Chiang Kai-shek"
					ruling_only = yes
			}
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetTag]: id = CHI_CIVILWAR_Central_Command_CKS"
			add_country_leader_trait = Generalissimo
		}
	}
	
	focus = {
		id = CHI_CIVILWAR_anti_ccp_propaganda
		
		icon = GFX_Anti_CCP_Propaganda
		search_filters = {
			IC_FILTER
		}
		cost = 5
		x = 25
		y = 3

		prerequisite = {

			focus = CHI_CIVILWAR_fortify_shanghai
		}
		
		
		
		
		
		available = {
			NOT = {has_global_flag = chinese_civil_war_over}
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetTag]: id = CHI_CIVILWAR_anti_ccp_propaganda"
			add_war_support = 0.1
		}
	}
	
	focus = {
		id = CHI_CIVILWAR_expand_airbases
		
		icon = GFX_Civil_War_Expand_Airbases
		search_filters = {
			IC_FILTER
		}
		cost = 5
		x = 29
		y = 3

		prerequisite = {
			focus = CHI_CIVILWAR_fortify_shanghai
		}
		
		
		bypass = {
			AND = {
				NOT = {CHI = {controls_state = 613}}
			    NOT = {CHI = {controls_state = 601}}
			
			}
		}
		
		
		available = {
			NOT = {has_global_flag = chinese_civil_war_over}
			OR = {
				CHI = {controls_state = 613}
				CHI = {controls_state = 601}
			}
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetTag]: id = CHI_CIVILWAR_expand_airbases"
			
			If = {
				limit = {
					CHI = {controls_state = 613}
				}	
				613 = {
				
					add_building_construction = {
					type = air_base
					level = 3
					instant_build = yes
					}
						
				}
			}
			If = {
				limit = {
					CHI = {controls_state = 601}
				}	
				601 = {
				
					add_building_construction = {
					type = air_base
					level = 3
					instant_build = yes
					}
						
				}
			}
					
		}
	}
	
	focus = {
		id = CHI_CIVILWAR_crush_rural_peasant_revolts
		
		icon = GFX_No_Concessions_to_Peasants
		search_filters = {
			IC_FILTER
		}
		cost = 5
		x = 26
		y = 4

		prerequisite = {
			focus = CHI_CIVILWAR_expand_airbases
		}
		prerequisite = {
			focus = CHI_CIVILWAR_anti_ccp_propaganda
		}
		prerequisite = {
			focus = CHI_CIVILWAR_Central_Command_CKS
		}
		
		
		mutually_exclusive = {
			focus = CHI_CIVILWAR_concessions_to_peasants
		}
		
		
		available = {
			NOT = {has_global_flag = chinese_civil_war_over}
			CHI = {has_idea = CHI_Peasant_revolts}
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetTag]: id = CHI_CIVILWAR_crush_rural_peasant_revolts"
			remove_ideas = CHI_Peasant_revolts
			add_political_power = -300
			add_stability = -0.15
			
		}
	}
	
	focus = {
		id = CHI_CIVILWAR_concessions_to_peasants
		
		icon = GFX_Concessions_to_Peasants
		search_filters = {
			IC_FILTER
		}
		cost = 5
		x = 28
		y = 4

		prerequisite = {
			focus = CHI_CIVILWAR_expand_airbases
		}
		prerequisite = {
			focus = CHI_CIVILWAR_anti_ccp_propaganda
		}
		prerequisite = {
			focus = CHI_CIVILWAR_Central_Command_CKS
		}
		
		
		mutually_exclusive = {
			focus = CHI_CIVILWAR_crush_rural_peasant_revolts
		}
		
		
		available = {
			NOT = {has_global_flag = chinese_civil_war_over}
			CHI = {has_idea = CHI_Peasant_revolts}
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetTag]: id = CHI_CIVILWAR_concessions_to_peasants"
			custom_effect_tooltip = Peasants_appeased_tt
			hidden_effect = {
				set_country_flag = Peasants_appeased_flag
			}
			swap_ideas = {
				remove_idea = CHI_Peasant_revolts
				add_idea = CHI_Peasant_appeased
			}
		}
	}
	
	focus = {
		id = CHI_CIVILWAR_amnesty_for_ccp_deserters
		
		icon = GFX_CCP_Deserters
		search_filters = {
			IC_FILTER
		}
		cost = 5
		x = 27
		y = 5

		prerequisite = {
			focus = CHI_CIVILWAR_concessions_to_peasants
			focus = CHI_CIVILWAR_crush_rural_peasant_revolts
		}
		
		
		
		
		
		
		
		available = {
			NOT = {has_global_flag = chinese_civil_war_over}
			PRC = {surrender_progress > 0.40}
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetTag]: id = CHI_CIVILWAR_amnesty_for_ccp_deserters"
			PRC = {
				add_war_support = -0.10
				add_manpower = -200000
				
				
			}
			CHI = {
				add_manpower = 200000
				
			
			}
			
		}
	}
	
	
	focus = {
		id = CHI_CIVILWAR_Sweet_Victory
		
		icon = GFX_usa_50_the_kmt_holds_on
		search_filters = {
			IC_FILTER
		}
		cost = 1
		x = 30
		y = 6

		prerequisite = {
			focus = CHI_CIVILWAR_request_army_fonds
		}
		prerequisite = {
			focus = CHI_CIVILWAR_amnesty_for_ccp_deserters
		}
		
		available = {
			always = no
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetTag]: id = CHI_CIVILWAR_Sweet_Victory"
			load_focus_tree = KMT_1950s_Victory
			hidden_effect = {remove_ideas = american_advisors}
			
		}
	}
}	