Yugoslavia_influence_decisions = {

YUG_proclaim_balkan_federation = {

		icon = contract

		allowed = {
			tag = YUG
		}

	   available = {
			 tag = YUG
			 owns_state = 44
			 owns_state = 1012
			 owns_state = 909
			 owns_state = 48
			 owns_state = 1208
			 owns_state = 212
			 owns_state = 211
			 owns_state = 77
		}

		cost = 100

		fire_only_once = yes

		visible = {
			tag = YUG
		}

		complete_effect = {
			set_cosmetic_tag = YUG_Greater_Balkan
			news_event = yug.20
			set_party_name = { 
				ideology = trotskyism 
				long_name = "Savez Komunista Balkana" 
				name = "SKB" 
			}
		}

		ai_will_do = {
			factor = 100
		}
	}
	YUG_Apply_to_Join_NATO = {

		icon = contract
		allowed = {
			tag = YUG
		}
		
		visible = {
			has_completed_focus = YUG_end_the_one_party_state
		}

		available = {
			tag = YUG
			
		}
		
		complete_effect = {
			USA = { country_event = YUG_NATO.1 }
		}
		cost = 0

		fire_only_once = yes
		selectable_mission = no

		ai_will_do = {
			factor = 0
		}
	}
	Spread_Titoist_Propaganda_ALB = {

		icon = contract

		available = {
			tag = YUG
		}
		
		complete_effect = {
			custom_effect_tooltip = influence_gain_100
			ALB = {
				add_popularity = {
					ideology = trotskyism 
					popularity = 0.01
				}
				set_temp_variable = { percent_change = 5 }
				set_temp_variable = { tag_index = ROOT.id }
				set_temp_variable = { influence_target = THIS.id }
				change_influence_percentage = yes				
			}
		}

		cost = 100
		days_re_enable = 365

		fire_only_once = no
		selectable_mission = no

		ai_will_do = {
			factor = 0
		}
	}

	Spread_Titoist_Propaganda_BUL = {

		icon = contract

		available = {
			tag = YUG
		}
		
		complete_effect = {
			custom_effect_tooltip = influence_gain_100
			BUL = {
				add_popularity = {
					ideology = trotskyism 
					popularity = 0.01
				}
				set_temp_variable = { percent_change = 5 }
				set_temp_variable = { tag_index = ROOT.id }
				set_temp_variable = { influence_target = THIS.id }
				change_influence_percentage = yes			
			}
		}

		cost = 100
		days_re_enable = 365

		fire_only_once = no
		selectable_mission = no

		ai_will_do = {
			factor = 0
		}
	}

	Spread_Titoist_Propaganda_PDG = {

		icon = contract

		available = {
			tag = YUG
		}
		
		complete_effect = {
			custom_effect_tooltip = influence_gain_100
			PDG = {
				add_popularity = {
					ideology = trotskyism 
					popularity = 0.01
				}
				set_temp_variable = { percent_change = 5 }
				set_temp_variable = { tag_index = ROOT.id }
				set_temp_variable = { influence_target = THIS.id }
				change_influence_percentage = yes			
			}
		}

		cost = 100
		days_re_enable = 365

		fire_only_once = no
		selectable_mission = no

		ai_will_do = {
			factor = 0
		}
	}
	Integrate_BUL = {

		icon = contract

		available = {
			tag = YUG
			country_exists = BUL
			has_war = no
			custom_trigger_tooltip = {
				tooltip = Integration_YUG
				check_variable = { BUL.influence_array^0 = ROOT }
				check_variable = { BUL.influence_array_calc^0 > 0.74 }
			}
		}
		
		complete_effect = {
			SOV = {
				country_event = {
					id = yug_annex.1
					days = 1
				}
			}
		}

		cost = 0
		days_re_enable = 0

		fire_only_once = yes
		selectable_mission = no

		ai_will_do = {
			factor = 0
		}
	}
	Intervene_in_the_Greek_Civil_War = {

		icon = contract

		available = {
			tag = YUG
			country_exists = PDG
			country_exists = GRE
			PDG = { NOT = { is_in_faction_with = SOV } }
		}
		
		complete_effect = {
			hidden_effect = {
				news_event = YUG_GREEK_CIVIL_WAR.1
			}
			declare_war_on = {
				target = GRE
				type = puppet_wargoal_focus
			}
			PDG = {
				set_temp_variable = { percent_change = 5 }
				set_temp_variable = { tag_index = ROOT.id }
				set_temp_variable = { influence_target = THIS.id }
				change_influence_percentage = yes	
			}
		}

		cost = 0
		days_re_enable = 0

		fire_only_once = yes
		selectable_mission = no

		ai_will_do = {
			factor = 0
		}
	}
	Integrate_ALB = {

		icon = contract

		available = {
			tag = YUG
			country_exists = ALB
			has_war = no
			custom_trigger_tooltip = {
				tooltip = Integration_YUG
				check_variable = { ALB.influence_array^0 = ROOT }
				check_variable = { ALB.influence_array_calc^0 > 0.74 }
			}
		}
		
		complete_effect = {
			SOV = {
				country_event = {
					id = yug_annex.2
					days = 1
				}
			}
		}

		cost = 0
		days_re_enable = 0

		fire_only_once = yes
		selectable_mission = no

		ai_will_do = {
			factor = 0
		}
	}
	Integrate_PDG = {

		icon = contract

		available = {
			tag = YUG
			country_exists = PDG
			has_war = no
			custom_trigger_tooltip = {
				tooltip = Integration_YUG
				check_variable = { PDG.influence_array^0 = ROOT }
				check_variable = { PDG.influence_array_calc^0 > 0.74 }
			}
		}
		
		complete_effect = {
			hidden_effect = {
				news_event = YUG_INTEGRATION.1
			}
			annex_country = {
				target = PDG
				transfer_troops = yes
			}
			every_owned_state = {
				limit = { is_core_of = PDG }
				add_core_of = YUG
			}
		}

		cost = 0
		days_re_enable = 0

		fire_only_once = yes
		selectable_mission = no

		ai_will_do = {
			factor = 0
		}
	}
}

YUG_ethnicity_opinion = {

	YUG_test_1 = {

	icon = contract

		allowed = {
			tag = YUG
		}

		visible = {
		    is_debug = yes
		}		

		available = {
		    tag = YUG
		}

		complete_effect = {
		    hidden_effect = {
		        add_to_variable = { yug_serbian_opinion = 15}
		        clamp_variable = { 
		           var = yug_serbian_opinion 
		           min = 0
		           max = 100
		        }
		    }
		    custom_effect_tooltip = YUG_localisation_serbian_positive
		    load_focus_tree = YUG_70s

		} 
		cost = 0
		days_re_enable = 0

		fire_only_once = yes
		selectable_mission = no

		ai_will_do = {
			factor = 0
		}
	}


	YUG_yearly_political_impact_update = {

		icon = mission_icon

			activation = {		   
				tag = YUG
			}

			allowed = {
				tag = YUG
			}

			available = {
				always = no
			}

			visible = {
			    is_debug = yes
			}		

			available = {
		
			}

			is_good = yes
			days_mission_timeout = 350

			timeout_effect = {
		   	 	YUG_calculate_ethnic_opinion_factor = yes	   
		   	 	custom_effect_tooltip = YUG_localisation_ethnic_opinion_factor_update 	
			}

			ai_will_do = {
				factor = 0
			}
	}	

	YUG_test_2 = {

	icon = contract

		allowed = {
			tag = YUG
		}

		visible = {
		    is_debug = yes
		}		

		available = {
		    tag = YUG
		}

		complete_effect = {

		    hidden_effect = {
		        add_to_variable = { yug_serbian_opinion = 15}
		        clamp_variable = { 
		           var = yug_serbian_opinion 
		           min = 0
		           max = 100
		        }
		    }
		    set_temp_variable = { yug_tempvar = 5 }
		    YUG_change_rof_var = yes
		    set_temp_variable = { yug_tempvar = -2 }		    
		    YUG_change_mildef_var = yes
		    YUG_change_intdef_var = yes

		    YUG_calc_informbiro_effects = yes
		    YUG_calculate_ethnic_opinion_factor = yes

		    custom_effect_tooltip = YUG_localisation_serbian_positive
		    if = {
		    	limit = { has_country_flag = YUG_tito_assasination }
		    	clr_country_flag = YUG_tito_assasination
		    }
		    else = {
		   		set_country_flag = YUG_tito_assasination		    
		    }
		    mark_focus_tree_layout_dirty = yes

		}
		cost = 0
		days_re_enable = 0

		fire_only_once = yes
		selectable_mission = no

		ai_will_do = {
			factor = 0
		}
	}
}

YUG_petogodisnji_plan = {
	
	YUG_first_fiveyearplan_conditions = {

		icon = mission_icon

			activation = {		   
				always = yes	
			}

			allowed = {
				tag = YUG
			}

			visible = {
			    is_debug = yes
			}		

			available = {
			    industrial_complex > 17
			    steel_factory > 2			    
			    arms_factory > 4
			    custom_trigger_tooltip = {
				    tooltip = yug_mildef_above_80
				    check_variable = { Progress_MILDEF_var > 80 }
				}			    
			    agri_industrial_complex > 49
			    custom_trigger_tooltip = {
				    tooltip = yug_rof_above_70
				    check_variable = { Progress_ROF_var > 70 }
				}			    
			}

			is_good = no
			days_mission_timeout = 588

			timeout_effect = {
				add_stability = -0.05
		   	 	clr_country_flag = YUG_first_fiveyearplan
		   	 	remove_ideas = DDR_idea_first_five_year_plan
			}

			ai_will_do = {
				factor = 0
			}
	}	



	
}

YUG_informbiro = {

	YUG_famine_looming = {

		icon = mission_icon

			activation = {		   
				check_variable = { Progress_ROF_var < 25 }	
				NOT = {
					OR = {
						has_country_flag = YUG_famine1
						has_country_flag = YUG_famine2
					}
					has_country_flag = YUG_tito_assasination
				}
			}

			allowed = {
				tag = YUG
			}

			visible = {
			    is_debug = yes
			}		

			available = {
			    custom_trigger_tooltip = {
				    tooltip = yug_rof_above_25	
				    check_variable = { Progress_ROF_var > 25 }
				}		
			}

			is_good = no
			days_mission_timeout = 100

			timeout_effect = {
		   	 	add_ideas = famine2
		   	 	set_country_flag = YUG_famine1
				set_temp_variable = { yug_tempvar = -10 }
				YUG_change_intdef_var = yes		   	 	
			}

			ai_will_do = {
				factor = 0
			}
	}	

	YUG_famine_worsening = {

		icon = mission_icon

			activation = {		   
				check_variable = { Progress_ROF_var < 25 }
				has_country_flag = YUG_famine1
				NOT = {
					has_country_flag = YUG_tito_assasination
				}
			}

			allowed = {
				tag = YUG
			}

			visible = {
			    is_debug = yes
			}		

			available = {
			    custom_trigger_tooltip = {
				    tooltip = yug_rof_above_25	
				    check_variable = { Progress_ROF_var > 25 }
				}		
			}

			is_good = no
			days_mission_timeout = 100

			timeout_effect = {
		   	 	swap_ideas = {
		   	 		remove_idea = famine2
		   	 		add_idea = famine3
		   	 	}
		   	 	set_country_flag = YUG_famine2
		   	 	clr_country_flag = YUG_famine1
				set_temp_variable = { yug_tempvar = -40 }
				YUG_change_intdef_var = yes			   	 	
			}

			ai_will_do = {
				factor = 0
			}
	}	

	YUG_food_situation_improving = {

		icon = mission_icon

			activation = {		   
				check_variable = { Progress_ROF_var > 25 }
			    OR = {
				  	has_country_flag = YUG_famine1
				  	has_country_flag = YUG_famine2
				}				
			}

			allowed = {
				tag = YUG
			}

			visible = {
			    is_debug = yes
			}		

			available = {
				OR = {
					custom_trigger_tooltip = {
					    tooltip = yug_rof_below_25	
					    check_variable = { Progress_ROF_var < 25 }
					}	
					has_completed_focus = YUG_yugoslavia_free_from_soviets		
				}
			}

			is_good = yes
			days_mission_timeout = 100

			timeout_effect = {
				if = {
					limit = { has_idea = famine3 }
		   	 		swap_ideas = {
		   	 			remove_idea = famine3
		   	 			add_idea = famine2
		   	 		}
		   	 		clr_country_flag = YUG_famine2
		   	 		set_country_flag = YUG_famine1
		   	 	}
		   	 	else = {
		   	 		remove_ideas = famine2
		   	 		clr_country_flag = YUG_famine1
		   	 	}
			}

			ai_will_do = {
				factor = 0
			}
	}	

	informbiro_the_Crusaders = {

		icon = generic_civil_support

		available = {
			#has_country_flag = crusaders_crushed
		
			divisions_in_state = {
				size > 2
				state = 163
			}
			
		}
		cancel_trigger = {
			has_country_flag = crusaders_crushed
		}
		
		visible = {
			tag = YUG
		}

		days_mission_timeout = 60

		activation = {
			has_country_flag = crusader_insurgency
			NOT = {
				has_country_flag = crusaders_crushed
			}
		}
		ai_will_do = {
			factor = 1
		}

		
		visible = {
			
		}

		fixed_random_seed = no

		fire_only_once = no

		is_good = no
		
		complete_effect = {
			activate_mission = The_Crusaders
		}

		timeout_effect = {
			#Outer Area
			random_list = {
				25 = {
					add_to_variable = { crusader_insurgency = 1 } 
					custom_effect_tooltip = 1_ins_tt
				}
				35 = {
					add_to_variable = { crusader_insurgency = 2 } 
					custom_effect_tooltip = 2_ins_tt
				}
				40 = {
					
				}
			}
			
		}
	}	

	YUG_security_apparatus_failing = {

		icon = mission_icon

			activation = {		   
				check_variable = { Progress_INTDEF_var < 30 }	
			}

			allowed = {
				tag = YUG
			}

			visible = {
			    is_debug = yes
			}		

			available = {
				OR = {
				    custom_trigger_tooltip = {
					    tooltip = yug_intdef_above_30	
					    check_variable = { Progress_INTDEF_var > 30 }
					}		
					has_completed_focus = YUG_yugoslavia_free_from_soviets
					NOT = {
						check_variable = { yug_cominformistplot = 7 }
					}
				}
			}

			is_good = no
			days_mission_timeout = 15

			timeout_effect = {
				if = { 
					limit = { check_variable = { yug_cominformistplot = 0 } }
					complete_national_focus = YUG_scale_back_udba_operations
				}
				else_if = {
					limit = { check_variable = { yug_cominformistplot = 1 } }
					complete_national_focus = YUG_undermine_udba
				}
				else_if = {
					limit = { check_variable = { yug_cominformistplot = 2 } }
					complete_national_focus = YUG_gather_support_from_russophile_communists
				}
				else_if = {
					limit = { check_variable = { yug_cominformistplot = 3 } }
					complete_national_focus = YUG_fund_ragtag_cominformist_partisans
				}
				else_if = {
					limit = { check_variable = { yug_cominformistplot = 4 } }
					complete_national_focus = YUG_fund_pero_popivoda_return
				}
				else_if = {
					limit = { check_variable = { yug_cominformistplot = 5 } }
					complete_national_focus = YUG_sow_corruption_into_kos
				}
				else_if = {
					limit = { check_variable = { yug_cominformistplot = 6 } }
					complete_national_focus = YUG_a_deal_with_crusaders
				}		
				else_if = {
					limit = { check_variable = { yug_cominformistplot = 6 } }
					complete_national_focus = YUG_brand_rankovic_a_traitor
				}	
				else = {
		   	 		complete_national_focus = YUG_assasinate_tito
				}																						
			}

			ai_will_do = {
				factor = 0
			}
	}



}

YUG_investment_request = {

	YUG_request_eib_aid = {

	icon = bonds

		allowed = {
			tag = YUG
		}

		visible = {
		    has_completed_focus = YUG_free_trade_agreements_with_eec
		}		

		available = {
		    has_completed_focus = YUG_get_access_to_eib
		    has_completed_focus = YUG_clear_trieste_issue
		}

		complete_effect = {
		    add_to_variable = { yug70_investors = 1 }
		    custom_effect_tooltip = yug_localisation_investorsplus
		}

		cost = 50
		days_re_enable = 0

		fire_only_once = yes
		selectable_mission = no

		ai_will_do = {
			factor = 0
		}
	}	

	YUG_request_comecon_aid = {

	icon = bonds

		allowed = {
			tag = YUG
		}

		visible = {
		    has_completed_focus = YUG_free_trade_agreements_with_eec
		}		

		available = {
		    has_completed_focus = YUG_emphasize_need_for_comecon_assistance
		}

		complete_effect = {
		    add_to_variable = { yug70_investors = 1 }
		    custom_effect_tooltip = yug_localisation_investorsplus
		}

		cost = 50
		days_re_enable = 0

		fire_only_once = yes
		selectable_mission = no

		ai_will_do = {
			factor = 0
		}
	}

	YUG_request_arab_countries_aid = {

	icon = bonds

		allowed = {
			tag = YUG
		}

		visible = {
		    has_completed_focus = YUG_free_trade_agreements_with_eec
		}		

		available = {
		    has_completed_focus = YUG_equate_zionism_and_apartheid
		}

		complete_effect = {
		    add_to_variable = { yug70_investors = 1 }
		    custom_effect_tooltip = yug_localisation_investorsplus
		}

		cost = 50
		days_re_enable = 0

		fire_only_once = yes
		selectable_mission = no

		ai_will_do = {
			factor = 0
		}
	}

	YUG_request_us_invesment = {

	icon = bonds

		allowed = {
			tag = YUG
		}

		visible = {
		    has_completed_focus = YUG_free_trade_agreements_with_eec
		}		

		available = {
		    has_completed_focus = YUG_attract_us_investors
		}

		complete_effect = {
		    add_to_variable = { yug70_investors = 1 }
		    custom_effect_tooltip = yug_localisation_investorsplus
		}

		cost = 50
		days_re_enable = 0

		fire_only_once = yes
		selectable_mission = no

		ai_will_do = {
			factor = 0
		}
	}

	YUG_request_trans-yugoslav_road_funding = {

	icon = bonds

		allowed = {
			tag = YUG
		}

		visible = {
		    has_completed_focus = YUG_free_trade_agreements_with_eec
		}		

		available = {
			custom_trigger_tooltip = {
				tooltip = yug_ctt_investor_2
				check_variable = { var = yug70_investors value = 2 compare = greater_than_or_equals}

			}
		    has_completed_focus = YUG_prepare_trans_yugoslav_road_construction
		}

		complete_effect = {
		   custom_effect_tooltip = yug_localisation_transyugoroad_funded
		   YUG = {
		   		set_country_flag = YUG_transyugoroad_funded
		   }
		}

		cost = 50
		days_re_enable = 0

		fire_only_once = yes
		selectable_mission = no

		ai_will_do = {
			factor = 0
		}
	}
	YUG_trans-yugoslav_zagreb-venezia = {

	icon = generic_construction

		allowed = {
			tag = YUG
		}

		visible = {
		    has_completed_focus = YUG_free_trade_agreements_with_eec
		}		

		available = {
		    has_completed_focus = YUG_prepare_trans_yugoslav_road_construction
		}

		highlight_states = {
			highlight_state_targets = {
				state = 109
			}
			highlight_color_while_active = 3
			highlight_color_before_active = 2
		}

        days_remove = 300
        complete_effect = {
        	if = { 
        		limit = { has_country_flag = YUG_transyugoroad_funded }
        	}
        	else = {	       	
	        	add_to_variable = {
					tooltip = adjust_money_tt
					currentMoney = -35
				}	
			}
        } 
		remove_effect = {
		    hidden_effect = {
		        set_temp_variable = { yug_temp_opinion = 15 }		    
		        add_to_variable = { yug_croatian_opinion = 15 }
		        clamp_variable = { 
		           var = yug_croatian_opinion 
		           min = 0
		           max = 100
		        }
		        add_to_variable = { yug_slovene_opinion = 15 }
		        clamp_variable = { 
		           var = yug_slovene_opinion 
		           min = 0
		           max = 100
		        }		        
		    }
		    custom_effect_tooltip = YUG_localisation_croatian_opinion_positive
		    custom_effect_tooltip = YUG_localisation_slovene_opinion_positive
			build_railway = {
			    level = 2
			    build_only_on_allied = yes
			    path = { 3631 9627 6650 15667 15672 11581 }
			    start_province = 3631
			    target_province = 11581
			}
		}

		cost = 75
		days_re_enable = 0

		fire_only_once = yes
		selectable_mission = no

		ai_will_do = {
			factor = 0
		}
	}

	YUG_trans-yugoslav_nis-beograd = {

	icon = generic_construction

		allowed = {
			tag = YUG
		}

		visible = {
		    has_completed_focus = YUG_free_trade_agreements_with_eec
		}		

		available = {
		    has_completed_focus = YUG_prepare_trans_yugoslav_road_construction
		}


		highlight_states = {
			highlight_state_targets = {
				state = 107
			}
			highlight_color_while_active = 3
			highlight_color_before_active = 2
		}

        days_remove = 250
        complete_effect = {
        	if = { 
        		limit = { has_country_flag = YUG_transyugoroad_funded }
        	}
        	else = {	       	
	        	add_to_variable = {
					tooltip = adjust_money_tt
					currentMoney = -25
				}	
			}
        }        
		remove_effect = {
		    hidden_effect = {
		        set_temp_variable = { yug_temp_opinion = 15 }		    
		        add_to_variable = { yug_serbian_opinion = 15}
		        clamp_variable = { 
		           var = yug_serbian_opinion 
		           min = 0
		           max = 100
		        }		        
		    }
		    custom_effect_tooltip = YUG_localisation_serbian_opinion_positive
			build_railway = {
			    level = 2
			    build_only_on_allied = yes
			    path = { 11586 11583 15696 6998 9602 9906 }
			    start_province = 11586
			    target_province = 9906
			}
		}

		cost = 50
		days_re_enable = 0

		fire_only_once = yes
		selectable_mission = no

		ai_will_do = {
			factor = 0
		}
	}
	YUG_trans-yugoslav_nis-solun = {

	icon = generic_construction

		allowed = {
			tag = YUG
		}

		visible = {
		    has_completed_focus = YUG_free_trade_agreements_with_eec
		}		

		available = {
		    has_completed_focus = YUG_prepare_trans_yugoslav_road_construction
		}

		highlight_states = {
			highlight_state_targets = {
				state = 1498
			}
			highlight_color_while_active = 3
			highlight_color_before_active = 2
		}

        days_remove = 400
        complete_effect = {
        	if = { 
        		limit = { has_country_flag = YUG_transyugoroad_funded }
        	}
        	else = {	       	
	        	add_to_variable = {
					tooltip = adjust_money_tt
					currentMoney = -40
				}	
			}
        }       
		remove_effect = {
		    hidden_effect = {
		        set_temp_variable = { yug_temp_opinion = 15 }		    
		        add_to_variable = { yug_serbian_opinion = 15}
		        clamp_variable = { 
		           var = yug_serbian_opinion 
		           min = 0
		           max = 100
		        }		  
		        add_to_variable = { yug_macedonian_opinion = 15}
		        clamp_variable = { 
		           var = yug_macedonian_opinion 
		           min = 0
		           max = 100
		        }		              
		    }
		    custom_effect_tooltip = YUG_localisation_serbian_opinion_positive
		    custom_effect_tooltip = YUG_localisation_macedonian_opinion_positive		    
			build_railway = {
			    level = 2
			    build_only_on_allied = yes
			    path = { 9906 15679 11832 3882 3833 }
			    start_province = 9906
			    target_province = 3833
			}
		}

		cost = 50
		days_re_enable = 0

		fire_only_once = yes
		selectable_mission = no

		ai_will_do = {
			factor = 0
		}
	}

}